(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Lo(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ve={},ns=[],Dt=()=>{},od=()=>!1,nr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ao=t=>t.startsWith("onUpdate:"),We=Object.assign,Ro=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ld=Object.prototype.hasOwnProperty,ge=(t,e)=>ld.call(t,e),he=Array.isArray,Fs=t=>sr(t)==="[object Map]",ad=t=>sr(t)==="[object Set]",pe=t=>typeof t=="function",ze=t=>typeof t=="string",fs=t=>typeof t=="symbol",De=t=>t!==null&&typeof t=="object",Uc=t=>(De(t)||pe(t))&&pe(t.then)&&pe(t.catch),cd=Object.prototype.toString,sr=t=>cd.call(t),ud=t=>sr(t).slice(8,-1),pd=t=>sr(t)==="[object Object]",Do=t=>ze(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Bs=Lo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ir=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},hd=/-(\w)/g,gn=ir(t=>t.replace(hd,(e,n)=>n?n.toUpperCase():"")),dd=/\B([A-Z])/g,zn=ir(t=>t.replace(dd,"-$1").toLowerCase()),qc=ir(t=>t.charAt(0).toUpperCase()+t.slice(1)),Sr=ir(t=>t?`on${qc(t)}`:""),bn=(t,e)=>!Object.is(t,e),Mr=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},io=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},md=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ha;const rr=()=>ha||(ha=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function or(t){if(he(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=ze(s)?wd(s):or(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(ze(t)||De(t))return t}const fd=/;(?![^(]*\))/g,vd=/:([^]+)/,bd=/\/\*[^]*?\*\//g;function wd(t){const e={};return t.replace(bd,"").split(fd).forEach(n=>{if(n){const s=n.split(vd);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function lr(t){let e="";if(ze(t))e=t;else if(he(t))for(let n=0;n<t.length;n++){const s=lr(t[n]);s&&(e+=s+" ")}else if(De(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const _d="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gd=Lo(_d);function Hc(t){return!!t||t===""}/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ke;class Cd{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ke,!e&&Ke&&(this.index=(Ke.scopes||(Ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ke;try{return Ke=this,e()}finally{Ke=n}}}on(){++this._on===1&&(this.prevScope=Ke,Ke=this)}off(){this._on>0&&--this._on===0&&(Ke=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Gc(){return Ke}function yd(t,e=!1){Ke&&Ke.cleanups.push(t)}let ke;const Tr=new WeakSet;class Wc{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ke&&Ke.active&&Ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Tr.has(this)&&(Tr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,da(this),Zc(this);const e=ke,n=yt;ke=this,yt=!0;try{return this.fn()}finally{Jc(this),ke=e,yt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)jo(e);this.deps=this.depsTail=void 0,da(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Tr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ro(this)&&this.run()}get dirty(){return ro(this)}}let Yc=0,js,Ns;function Xc(t,e=!1){if(t.flags|=8,e){t.next=Ns,Ns=t;return}t.next=js,js=t}function Fo(){Yc++}function Bo(){if(--Yc>0)return;if(Ns){let e=Ns;for(Ns=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;js;){let e=js;for(js=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Zc(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Jc(t){let e,n=t.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),jo(s),xd(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}t.deps=e,t.depsTail=n}function ro(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Qc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Qc(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ws)||(t.globalVersion=Ws,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ro(t))))return;t.flags|=2;const e=t.dep,n=ke,s=yt;ke=t,yt=!0;try{Zc(t);const i=t.fn(t._value);(e.version===0||bn(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{ke=n,yt=s,Jc(t),t.flags&=-3}}function jo(t,e=!1){const{dep:n,prevSub:s,nextSub:i}=t;if(s&&(s.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)jo(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function xd(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let yt=!0;const eu=[];function Xt(){eu.push(yt),yt=!1}function Zt(){const t=eu.pop();yt=t===void 0?!0:t}function da(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ke;ke=void 0;try{e()}finally{ke=n}}}let Ws=0;class Pd{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class No{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ke||!yt||ke===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ke)n=this.activeLink=new Pd(ke,this),ke.deps?(n.prevDep=ke.depsTail,ke.depsTail.nextDep=n,ke.depsTail=n):ke.deps=ke.depsTail=n,tu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=ke.depsTail,n.nextDep=void 0,ke.depsTail.nextDep=n,ke.depsTail=n,ke.deps===n&&(ke.deps=s)}return n}trigger(e){this.version++,Ws++,this.notify(e)}notify(e){Fo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Bo()}}}function tu(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)tu(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const oo=new WeakMap,On=Symbol(""),lo=Symbol(""),Ys=Symbol("");function Ue(t,e,n){if(yt&&ke){let s=oo.get(t);s||oo.set(t,s=new Map);let i=s.get(n);i||(s.set(n,i=new No),i.map=s,i.key=n),i.track()}}function Ht(t,e,n,s,i,r){const o=oo.get(t);if(!o){Ws++;return}const l=a=>{a&&a.trigger()};if(Fo(),e==="clear")o.forEach(l);else{const a=he(t),h=a&&Do(n);if(a&&n==="length"){const p=Number(s);o.forEach((d,L)=>{(L==="length"||L===Ys||!fs(L)&&L>=p)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(Ys)),e){case"add":a?h&&l(o.get("length")):(l(o.get(On)),Fs(t)&&l(o.get(lo)));break;case"delete":a||(l(o.get(On)),Fs(t)&&l(o.get(lo)));break;case"set":Fs(t)&&l(o.get(On));break}}Bo()}function Wn(t){const e=_e(t);return e===t?e:(Ue(e,"iterate",Ys),xt(t)?e:e.map(Ze))}function zo(t){return Ue(t=_e(t),"iterate",Ys),t}const Ed={__proto__:null,[Symbol.iterator](){return $r(this,Symbol.iterator,Ze)},concat(...t){return Wn(this).concat(...t.map(e=>he(e)?Wn(e):e))},entries(){return $r(this,"entries",t=>(t[1]=Ze(t[1]),t))},every(t,e){return It(this,"every",t,e,void 0,arguments)},filter(t,e){return It(this,"filter",t,e,n=>n.map(Ze),arguments)},find(t,e){return It(this,"find",t,e,Ze,arguments)},findIndex(t,e){return It(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return It(this,"findLast",t,e,Ze,arguments)},findLastIndex(t,e){return It(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return It(this,"forEach",t,e,void 0,arguments)},includes(...t){return Or(this,"includes",t)},indexOf(...t){return Or(this,"indexOf",t)},join(t){return Wn(this).join(t)},lastIndexOf(...t){return Or(this,"lastIndexOf",t)},map(t,e){return It(this,"map",t,e,void 0,arguments)},pop(){return Ps(this,"pop")},push(...t){return Ps(this,"push",t)},reduce(t,...e){return ma(this,"reduce",t,e)},reduceRight(t,...e){return ma(this,"reduceRight",t,e)},shift(){return Ps(this,"shift")},some(t,e){return It(this,"some",t,e,void 0,arguments)},splice(...t){return Ps(this,"splice",t)},toReversed(){return Wn(this).toReversed()},toSorted(t){return Wn(this).toSorted(t)},toSpliced(...t){return Wn(this).toSpliced(...t)},unshift(...t){return Ps(this,"unshift",t)},values(){return $r(this,"values",Ze)}};function $r(t,e,n){const s=zo(t),i=s[e]();return s!==t&&!xt(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const kd=Array.prototype;function It(t,e,n,s,i,r){const o=zo(t),l=o!==t&&!xt(t),a=o[e];if(a!==kd[e]){const d=a.apply(t,r);return l?Ze(d):d}let h=n;o!==t&&(l?h=function(d,L){return n.call(this,Ze(d),L,t)}:n.length>2&&(h=function(d,L){return n.call(this,d,L,t)}));const p=a.call(o,h,s);return l&&i?i(p):p}function ma(t,e,n,s){const i=zo(t);let r=n;return i!==t&&(xt(t)?n.length>3&&(r=function(o,l,a){return n.call(this,o,l,a,t)}):r=function(o,l,a){return n.call(this,o,Ze(l),a,t)}),i[e](r,...s)}function Or(t,e,n){const s=_e(t);Ue(s,"iterate",Ys);const i=s[e](...n);return(i===-1||i===!1)&&Uo(n[0])?(n[0]=_e(n[0]),s[e](...n)):i}function Ps(t,e,n=[]){Xt(),Fo();const s=_e(t)[e].apply(t,n);return Bo(),Zt(),s}const Vd=Lo("__proto__,__v_isRef,__isVue"),nu=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(fs));function Sd(t){fs(t)||(t=String(t));const e=_e(this);return Ue(e,"has",t),e.hasOwnProperty(t)}class su{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?Bd:lu:r?ou:ru).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=he(e);if(!i){let a;if(o&&(a=Ed[n]))return a;if(n==="hasOwnProperty")return Sd}const l=Reflect.get(e,n,Ge(e)?e:s);return(fs(n)?nu.has(n):Vd(n))||(i||Ue(e,"get",n),r)?l:Ge(l)?o&&Do(n)?l:l.value:De(l)?i?au(l):Xs(l):l}}class iu extends su{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._isShallow){const a=An(r);if(!xt(s)&&!An(s)&&(r=_e(r),s=_e(s)),!he(e)&&Ge(r)&&!Ge(s))return a?!1:(r.value=s,!0)}const o=he(e)&&Do(n)?Number(n)<e.length:ge(e,n),l=Reflect.set(e,n,s,Ge(e)?e:i);return e===_e(i)&&(o?bn(s,r)&&Ht(e,"set",n,s):Ht(e,"add",n,s)),l}deleteProperty(e,n){const s=ge(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&Ht(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!fs(n)||!nu.has(n))&&Ue(e,"has",n),s}ownKeys(e){return Ue(e,"iterate",he(e)?"length":On),Reflect.ownKeys(e)}}class Md extends su{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Td=new iu,$d=new Md,Od=new iu(!0);const ao=t=>t,ki=t=>Reflect.getPrototypeOf(t);function Ld(t,e,n){return function(...s){const i=this.__v_raw,r=_e(i),o=Fs(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,h=i[t](...s),p=n?ao:e?co:Ze;return!e&&Ue(r,"iterate",a?lo:On),{next(){const{value:d,done:L}=h.next();return L?{value:d,done:L}:{value:l?[p(d[0]),p(d[1])]:p(d),done:L}},[Symbol.iterator](){return this}}}}function Vi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ad(t,e){const n={get(i){const r=this.__v_raw,o=_e(r),l=_e(i);t||(bn(i,l)&&Ue(o,"get",i),Ue(o,"get",l));const{has:a}=ki(o),h=e?ao:t?co:Ze;if(a.call(o,i))return h(r.get(i));if(a.call(o,l))return h(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&Ue(_e(i),"iterate",On),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=_e(r),l=_e(i);return t||(bn(i,l)&&Ue(o,"has",i),Ue(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,a=_e(l),h=e?ao:t?co:Ze;return!t&&Ue(a,"iterate",On),l.forEach((p,d)=>i.call(r,h(p),h(d),o))}};return We(n,t?{add:Vi("add"),set:Vi("set"),delete:Vi("delete"),clear:Vi("clear")}:{add(i){!e&&!xt(i)&&!An(i)&&(i=_e(i));const r=_e(this);return ki(r).has.call(r,i)||(r.add(i),Ht(r,"add",i,i)),this},set(i,r){!e&&!xt(r)&&!An(r)&&(r=_e(r));const o=_e(this),{has:l,get:a}=ki(o);let h=l.call(o,i);h||(i=_e(i),h=l.call(o,i));const p=a.call(o,i);return o.set(i,r),h?bn(r,p)&&Ht(o,"set",i,r):Ht(o,"add",i,r),this},delete(i){const r=_e(this),{has:o,get:l}=ki(r);let a=o.call(r,i);a||(i=_e(i),a=o.call(r,i)),l&&l.call(r,i);const h=r.delete(i);return a&&Ht(r,"delete",i,void 0),h},clear(){const i=_e(this),r=i.size!==0,o=i.clear();return r&&Ht(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Ld(i,t,e)}),n}function Io(t,e){const n=Ad(t,e);return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(ge(n,i)&&i in s?n:s,i,r)}const Rd={get:Io(!1,!1)},Dd={get:Io(!1,!0)},Fd={get:Io(!0,!1)};const ru=new WeakMap,ou=new WeakMap,lu=new WeakMap,Bd=new WeakMap;function jd(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nd(t){return t.__v_skip||!Object.isExtensible(t)?0:jd(ud(t))}function Xs(t){return An(t)?t:Ko(t,!1,Td,Rd,ru)}function zd(t){return Ko(t,!1,Od,Dd,ou)}function au(t){return Ko(t,!0,$d,Fd,lu)}function Ko(t,e,n,s,i){if(!De(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=Nd(t);if(r===0)return t;const o=i.get(t);if(o)return o;const l=new Proxy(t,r===2?s:n);return i.set(t,l),l}function zs(t){return An(t)?zs(t.__v_raw):!!(t&&t.__v_isReactive)}function An(t){return!!(t&&t.__v_isReadonly)}function xt(t){return!!(t&&t.__v_isShallow)}function Uo(t){return t?!!t.__v_raw:!1}function _e(t){const e=t&&t.__v_raw;return e?_e(e):t}function Id(t){return!ge(t,"__v_skip")&&Object.isExtensible(t)&&io(t,"__v_skip",!0),t}const Ze=t=>De(t)?Xs(t):t,co=t=>De(t)?au(t):t;function Ge(t){return t?t.__v_isRef===!0:!1}function uo(t){return cu(t,!1)}function qo(t){return cu(t,!0)}function cu(t,e){return Ge(t)?t:new Kd(t,e)}class Kd{constructor(e,n){this.dep=new No,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:_e(e),this._value=n?e:Ze(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||xt(e)||An(e);e=s?e:_e(e),bn(e,n)&&(this._rawValue=e,this._value=s?e:Ze(e),this.dep.trigger())}}function ss(t){return Ge(t)?t.value:t}function uu(t){return pe(t)?t():ss(t)}const Ud={get:(t,e,n)=>e==="__v_raw"?t:ss(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return Ge(i)&&!Ge(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function pu(t){return zs(t)?t:new Proxy(t,Ud)}class qd{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new No(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ws-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return Xc(this,!0),!0}get value(){const e=this.dep.track();return Qc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Hd(t,e,n=!1){let s,i;return pe(t)?s=t:(s=t.get,i=t.set),new qd(s,i,n)}const Si={},Ni=new WeakMap;let $n;function Gd(t,e=!1,n=$n){if(n){let s=Ni.get(n);s||Ni.set(n,s=[]),s.push(t)}}function Wd(t,e,n=Ve){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:l,call:a}=n,h=X=>i?X:xt(X)||i===!1||i===0?mn(X,1):mn(X);let p,d,L,H,F=!1,j=!1;if(Ge(t)?(d=()=>t.value,F=xt(t)):zs(t)?(d=()=>h(t),F=!0):he(t)?(j=!0,F=t.some(X=>zs(X)||xt(X)),d=()=>t.map(X=>{if(Ge(X))return X.value;if(zs(X))return h(X);if(pe(X))return a?a(X,2):X()})):pe(t)?e?d=a?()=>a(t,2):t:d=()=>{if(L){Xt();try{L()}finally{Zt()}}const X=$n;$n=p;try{return a?a(t,3,[H]):t(H)}finally{$n=X}}:d=Dt,e&&i){const X=d,ae=i===!0?1/0:i;d=()=>mn(X(),ae)}const z=Gc(),C=()=>{p.stop(),z&&z.active&&Ro(z.effects,p)};if(r&&e){const X=e;e=(...ae)=>{X(...ae),C()}}let J=j?new Array(t.length).fill(Si):Si;const te=X=>{if(!(!(p.flags&1)||!p.dirty&&!X))if(e){const ae=p.run();if(i||F||(j?ae.some((ve,xe)=>bn(ve,J[xe])):bn(ae,J))){L&&L();const ve=$n;$n=p;try{const xe=[ae,J===Si?void 0:j&&J[0]===Si?[]:J,H];J=ae,a?a(e,3,xe):e(...xe)}finally{$n=ve}}}else p.run()};return l&&l(te),p=new Wc(d),p.scheduler=o?()=>o(te,!1):te,H=X=>Gd(X,!1,p),L=p.onStop=()=>{const X=Ni.get(p);if(X){if(a)a(X,4);else for(const ae of X)ae();Ni.delete(p)}},e?s?te(!0):J=p.run():o?o(te.bind(null,!0),!0):p.run(),C.pause=p.pause.bind(p),C.resume=p.resume.bind(p),C.stop=C,C}function mn(t,e=1/0,n){if(e<=0||!De(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ge(t))mn(t.value,e,n);else if(he(t))for(let s=0;s<t.length;s++)mn(t[s],e,n);else if(ad(t)||Fs(t))t.forEach(s=>{mn(s,e,n)});else if(pd(t)){for(const s in t)mn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&mn(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ui(t,e,n,s){try{return s?t(...s):t()}catch(i){ar(i,e,n)}}function Bt(t,e,n,s){if(pe(t)){const i=ui(t,e,n,s);return i&&Uc(i)&&i.catch(r=>{ar(r,e,n)}),i}if(he(t)){const i=[];for(let r=0;r<t.length;r++)i.push(Bt(t[r],e,n,s));return i}}function ar(t,e,n,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ve;if(e){let l=e.parent;const a=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const p=l.ec;if(p){for(let d=0;d<p.length;d++)if(p[d](t,a,h)===!1)return}l=l.parent}if(r){Xt(),ui(r,null,10,[t,a,h]),Zt();return}}Yd(t,n,i,s,o)}function Yd(t,e,n,s=!0,i=!1){if(i)throw t;console.error(t)}const Je=[];let Ot=-1;const is=[];let hn=null,es=0;const hu=Promise.resolve();let zi=null;function du(t){const e=zi||hu;return t?e.then(this?t.bind(this):t):e}function Xd(t){let e=Ot+1,n=Je.length;for(;e<n;){const s=e+n>>>1,i=Je[s],r=Zs(i);r<t||r===t&&i.flags&2?e=s+1:n=s}return e}function Ho(t){if(!(t.flags&1)){const e=Zs(t),n=Je[Je.length-1];!n||!(t.flags&2)&&e>=Zs(n)?Je.push(t):Je.splice(Xd(e),0,t),t.flags|=1,mu()}}function mu(){zi||(zi=hu.then(vu))}function Zd(t){he(t)?is.push(...t):hn&&t.id===-1?hn.splice(es+1,0,t):t.flags&1||(is.push(t),t.flags|=1),mu()}function fa(t,e,n=Ot+1){for(;n<Je.length;n++){const s=Je[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Je.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function fu(t){if(is.length){const e=[...new Set(is)].sort((n,s)=>Zs(n)-Zs(s));if(is.length=0,hn){hn.push(...e);return}for(hn=e,es=0;es<hn.length;es++){const n=hn[es];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}hn=null,es=0}}const Zs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function vu(t){try{for(Ot=0;Ot<Je.length;Ot++){const e=Je[Ot];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ui(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ot<Je.length;Ot++){const e=Je[Ot];e&&(e.flags&=-2)}Ot=-1,Je.length=0,fu(),zi=null,(Je.length||is.length)&&vu()}}let Ct=null,bu=null;function Ii(t){const e=Ct;return Ct=t,bu=t&&t.type.__scopeId||null,e}function Jd(t,e=Ct,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&Pa(-1);const r=Ii(e);let o;try{o=t(...i)}finally{Ii(r),s._d&&Pa(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function En(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[s];a&&(Xt(),Bt(a,n,8,[t.el,l,t,e]),Zt())}}const Qd=Symbol("_vte"),em=t=>t.__isTeleport;function Go(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Go(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Wo(t,e){return pe(t)?We({name:t.name},e,{setup:t}):t}function wu(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Is(t,e,n,s,i=!1){if(he(t)){t.forEach((F,j)=>Is(F,e&&(he(e)?e[j]:e),n,s,i));return}if(Ks(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Is(t,e,n,s.component.subTree);return}const r=s.shapeFlag&4?el(s.component):s.el,o=i?null:r,{i:l,r:a}=t,h=e&&e.r,p=l.refs===Ve?l.refs={}:l.refs,d=l.setupState,L=_e(d),H=d===Ve?()=>!1:F=>ge(L,F);if(h!=null&&h!==a&&(ze(h)?(p[h]=null,H(h)&&(d[h]=null)):Ge(h)&&(h.value=null)),pe(a))ui(a,l,12,[o,p]);else{const F=ze(a),j=Ge(a);if(F||j){const z=()=>{if(t.f){const C=F?H(a)?d[a]:p[a]:a.value;i?he(C)&&Ro(C,r):he(C)?C.includes(r)||C.push(r):F?(p[a]=[r],H(a)&&(d[a]=p[a])):(a.value=[r],t.k&&(p[t.k]=a.value))}else F?(p[a]=o,H(a)&&(d[a]=o)):j&&(a.value=o,t.k&&(p[t.k]=o))};o?(z.id=-1,at(z,n)):z()}}}rr().requestIdleCallback;rr().cancelIdleCallback;const Ks=t=>!!t.type.__asyncLoader,_u=t=>t.type.__isKeepAlive;function tm(t,e){gu(t,"a",e)}function nm(t,e){gu(t,"da",e)}function gu(t,e,n=He){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(cr(e,s,n),n){let i=n.parent;for(;i&&i.parent;)_u(i.parent.vnode)&&sm(s,e,n,i),i=i.parent}}function sm(t,e,n,s){const i=cr(e,t,s,!0);Yo(()=>{Ro(s[e],i)},n)}function cr(t,e,n=He,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Xt();const l=pi(n),a=Bt(e,n,t,o);return l(),Zt(),a});return s?i.unshift(r):i.push(r),r}}const tn=t=>(e,n=He)=>{(!Qs||t==="sp")&&cr(t,(...s)=>e(...s),n)},im=tn("bm"),ur=tn("m"),rm=tn("bu"),om=tn("u"),lm=tn("bum"),Yo=tn("um"),am=tn("sp"),cm=tn("rtg"),um=tn("rtc");function pm(t,e=He){cr("ec",t,e)}const hm=Symbol.for("v-ndc"),po=t=>t?zu(t)?el(t):po(t.parent):null,Us=We(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>po(t.parent),$root:t=>po(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>yu(t),$forceUpdate:t=>t.f||(t.f=()=>{Ho(t.update)}),$nextTick:t=>t.n||(t.n=du.bind(t.proxy)),$watch:t=>Am.bind(t)}),Lr=(t,e)=>t!==Ve&&!t.__isScriptSetup&&ge(t,e),dm={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:l,appContext:a}=t;let h;if(e[0]!=="$"){const H=o[e];if(H!==void 0)switch(H){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Lr(s,e))return o[e]=1,s[e];if(i!==Ve&&ge(i,e))return o[e]=2,i[e];if((h=t.propsOptions[0])&&ge(h,e))return o[e]=3,r[e];if(n!==Ve&&ge(n,e))return o[e]=4,n[e];ho&&(o[e]=0)}}const p=Us[e];let d,L;if(p)return e==="$attrs"&&Ue(t.attrs,"get",""),p(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==Ve&&ge(n,e))return o[e]=4,n[e];if(L=a.config.globalProperties,ge(L,e))return L[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Lr(i,e)?(i[e]=n,!0):s!==Ve&&ge(s,e)?(s[e]=n,!0):ge(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let l;return!!n[o]||t!==Ve&&ge(t,o)||Lr(e,o)||(l=r[0])&&ge(l,o)||ge(s,o)||ge(Us,o)||ge(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ge(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function va(t){return he(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ho=!0;function mm(t){const e=yu(t),n=t.proxy,s=t.ctx;ho=!1,e.beforeCreate&&ba(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:h,created:p,beforeMount:d,mounted:L,beforeUpdate:H,updated:F,activated:j,deactivated:z,beforeDestroy:C,beforeUnmount:J,destroyed:te,unmounted:X,render:ae,renderTracked:ve,renderTriggered:xe,errorCaptured:re,serverPrefetch:le,expose:oe,inheritAttrs:S,components:$,directives:x,filters:y}=e;if(h&&fm(h,s,null),o)for(const m in o){const _=o[m];pe(_)&&(s[m]=_.bind(n))}if(i){const m=i.call(n,n);De(m)&&(t.data=Xs(m))}if(ho=!0,r)for(const m in r){const _=r[m],P=pe(_)?_.bind(n,n):pe(_.get)?_.get.bind(n,n):Dt,M=!pe(_)&&pe(_.set)?_.set.bind(n):Dt,T=dr({get:P,set:M});Object.defineProperty(s,m,{enumerable:!0,configurable:!0,get:()=>T.value,set:g=>T.value=g})}if(l)for(const m in l)Cu(l[m],s,n,m);if(a){const m=pe(a)?a.call(n):a;Reflect.ownKeys(m).forEach(_=>{Cm(_,m[_])})}p&&ba(p,t,"c");function b(m,_){he(_)?_.forEach(P=>m(P.bind(n))):_&&m(_.bind(n))}if(b(im,d),b(ur,L),b(rm,H),b(om,F),b(tm,j),b(nm,z),b(pm,re),b(um,ve),b(cm,xe),b(lm,J),b(Yo,X),b(am,le),he(oe))if(oe.length){const m=t.exposed||(t.exposed={});oe.forEach(_=>{Object.defineProperty(m,_,{get:()=>n[_],set:P=>n[_]=P})})}else t.exposed||(t.exposed={});ae&&t.render===Dt&&(t.render=ae),S!=null&&(t.inheritAttrs=S),$&&(t.components=$),x&&(t.directives=x),le&&wu(t)}function fm(t,e,n=Dt){he(t)&&(t=mo(t));for(const s in t){const i=t[s];let r;De(i)?"default"in i?r=Oi(i.from||s,i.default,!0):r=Oi(i.from||s):r=Oi(i),Ge(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function ba(t,e,n){Bt(he(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Cu(t,e,n,s){let i=s.includes(".")?Ru(n,s):()=>n[s];if(ze(t)){const r=e[t];pe(r)&&qs(i,r)}else if(pe(t))qs(i,t.bind(n));else if(De(t))if(he(t))t.forEach(r=>Cu(r,e,n,s));else{const r=pe(t.handler)?t.handler.bind(n):e[t.handler];pe(r)&&qs(i,r,t)}}function yu(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!i.length&&!n&&!s?a=e:(a={},i.length&&i.forEach(h=>Ki(a,h,o,!0)),Ki(a,e,o)),De(e)&&r.set(e,a),a}function Ki(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&Ki(t,r,n,!0),i&&i.forEach(o=>Ki(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=vm[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const vm={data:wa,props:_a,emits:_a,methods:Ds,computed:Ds,beforeCreate:Xe,created:Xe,beforeMount:Xe,mounted:Xe,beforeUpdate:Xe,updated:Xe,beforeDestroy:Xe,beforeUnmount:Xe,destroyed:Xe,unmounted:Xe,activated:Xe,deactivated:Xe,errorCaptured:Xe,serverPrefetch:Xe,components:Ds,directives:Ds,watch:wm,provide:wa,inject:bm};function wa(t,e){return e?t?function(){return We(pe(t)?t.call(this,this):t,pe(e)?e.call(this,this):e)}:e:t}function bm(t,e){return Ds(mo(t),mo(e))}function mo(t){if(he(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Xe(t,e){return t?[...new Set([].concat(t,e))]:e}function Ds(t,e){return t?We(Object.create(null),t,e):e}function _a(t,e){return t?he(t)&&he(e)?[...new Set([...t,...e])]:We(Object.create(null),va(t),va(e??{})):e}function wm(t,e){if(!t)return e;if(!e)return t;const n=We(Object.create(null),t);for(const s in e)n[s]=Xe(t[s],e[s]);return n}function xu(){return{app:null,config:{isNativeTag:od,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _m=0;function gm(t,e){return function(s,i=null){pe(s)||(s=We({},s)),i!=null&&!De(i)&&(i=null);const r=xu(),o=new WeakSet,l=[];let a=!1;const h=r.app={_uid:_m++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:sf,get config(){return r.config},set config(p){},use(p,...d){return o.has(p)||(p&&pe(p.install)?(o.add(p),p.install(h,...d)):pe(p)&&(o.add(p),p(h,...d))),h},mixin(p){return r.mixins.includes(p)||r.mixins.push(p),h},component(p,d){return d?(r.components[p]=d,h):r.components[p]},directive(p,d){return d?(r.directives[p]=d,h):r.directives[p]},mount(p,d,L){if(!a){const H=h._ceVNode||Ft(s,i);return H.appContext=r,L===!0?L="svg":L===!1&&(L=void 0),t(H,p,L),a=!0,h._container=p,p.__vue_app__=h,el(H.component)}},onUnmount(p){l.push(p)},unmount(){a&&(Bt(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(p,d){return r.provides[p]=d,h},runWithContext(p){const d=rs;rs=h;try{return p()}finally{rs=d}}};return h}}let rs=null;function Cm(t,e){if(He){let n=He.provides;const s=He.parent&&He.parent.provides;s===n&&(n=He.provides=Object.create(s)),n[t]=e}}function Oi(t,e,n=!1){const s=He||Ct;if(s||rs){let i=rs?rs._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&pe(e)?e.call(s&&s.proxy):e}}const Pu={},Eu=()=>Object.create(Pu),ku=t=>Object.getPrototypeOf(t)===Pu;function ym(t,e,n,s=!1){const i={},r=Eu();t.propsDefaults=Object.create(null),Vu(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:zd(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function xm(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,l=_e(i),[a]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const p=t.vnode.dynamicProps;for(let d=0;d<p.length;d++){let L=p[d];if(pr(t.emitsOptions,L))continue;const H=e[L];if(a)if(ge(r,L))H!==r[L]&&(r[L]=H,h=!0);else{const F=gn(L);i[F]=fo(a,l,F,H,t,!1)}else H!==r[L]&&(r[L]=H,h=!0)}}}else{Vu(t,e,i,r)&&(h=!0);let p;for(const d in l)(!e||!ge(e,d)&&((p=zn(d))===d||!ge(e,p)))&&(a?n&&(n[d]!==void 0||n[p]!==void 0)&&(i[d]=fo(a,l,d,void 0,t,!0)):delete i[d]);if(r!==l)for(const d in r)(!e||!ge(e,d))&&(delete r[d],h=!0)}h&&Ht(t.attrs,"set","")}function Vu(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(Bs(a))continue;const h=e[a];let p;i&&ge(i,p=gn(a))?!r||!r.includes(p)?n[p]=h:(l||(l={}))[p]=h:pr(t.emitsOptions,a)||(!(a in s)||h!==s[a])&&(s[a]=h,o=!0)}if(r){const a=_e(n),h=l||Ve;for(let p=0;p<r.length;p++){const d=r[p];n[d]=fo(i,a,d,h[d],t,!ge(h,d))}}return o}function fo(t,e,n,s,i,r){const o=t[n];if(o!=null){const l=ge(o,"default");if(l&&s===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&pe(a)){const{propsDefaults:h}=i;if(n in h)s=h[n];else{const p=pi(i);s=h[n]=a.call(null,e),p()}}else s=a;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===zn(n))&&(s=!0))}return s}const Pm=new WeakMap;function Su(t,e,n=!1){const s=n?Pm:e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},l=[];let a=!1;if(!pe(t)){const p=d=>{a=!0;const[L,H]=Su(d,e,!0);We(o,L),H&&l.push(...H)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!r&&!a)return De(t)&&s.set(t,ns),ns;if(he(r))for(let p=0;p<r.length;p++){const d=gn(r[p]);ga(d)&&(o[d]=Ve)}else if(r)for(const p in r){const d=gn(p);if(ga(d)){const L=r[p],H=o[d]=he(L)||pe(L)?{type:L}:We({},L),F=H.type;let j=!1,z=!0;if(he(F))for(let C=0;C<F.length;++C){const J=F[C],te=pe(J)&&J.name;if(te==="Boolean"){j=!0;break}else te==="String"&&(z=!1)}else j=pe(F)&&F.name==="Boolean";H[0]=j,H[1]=z,(j||ge(H,"default"))&&l.push(d)}}const h=[o,l];return De(t)&&s.set(t,h),h}function ga(t){return t[0]!=="$"&&!Bs(t)}const Xo=t=>t[0]==="_"||t==="$stable",Zo=t=>he(t)?t.map(At):[At(t)],Em=(t,e,n)=>{if(e._n)return e;const s=Jd((...i)=>Zo(e(...i)),n);return s._c=!1,s},Mu=(t,e,n)=>{const s=t._ctx;for(const i in t){if(Xo(i))continue;const r=t[i];if(pe(r))e[i]=Em(i,r,s);else if(r!=null){const o=Zo(r);e[i]=()=>o}}},Tu=(t,e)=>{const n=Zo(e);t.slots.default=()=>n},$u=(t,e,n)=>{for(const s in e)(n||!Xo(s))&&(t[s]=e[s])},km=(t,e,n)=>{const s=t.slots=Eu();if(t.vnode.shapeFlag&32){const i=e.__;i&&io(s,"__",i,!0);const r=e._;r?($u(s,e,n),n&&io(s,"_",r,!0)):Mu(e,s)}else e&&Tu(t,e)},Vm=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=Ve;if(s.shapeFlag&32){const l=e._;l?n&&l===1?r=!1:$u(i,e,n):(r=!e.$stable,Mu(e,i)),o=e}else e&&(Tu(t,e),o={default:1});if(r)for(const l in i)!Xo(l)&&o[l]==null&&delete i[l]},at=zm;function Sm(t){return Mm(t)}function Mm(t,e){const n=rr();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:h,setElementText:p,parentNode:d,nextSibling:L,setScopeId:H=Dt,insertStaticContent:F}=t,j=(c,u,w,V=null,E=null,O=null,q=void 0,Y=null,G=!!u.dynamicChildren)=>{if(c===u)return;c&&!Es(c,u)&&(V=N(c),g(c,E,O,!0),c=null),u.patchFlag===-2&&(G=!1,u.dynamicChildren=null);const{type:K,ref:ie,shapeFlag:ee}=u;switch(K){case hr:z(c,u,w,V);break;case us:C(c,u,w,V);break;case Rr:c==null&&J(u,w,V,q);break;case Lt:$(c,u,w,V,E,O,q,Y,G);break;default:ee&1?ae(c,u,w,V,E,O,q,Y,G):ee&6?x(c,u,w,V,E,O,q,Y,G):(ee&64||ee&128)&&K.process(c,u,w,V,E,O,q,Y,G,W)}ie!=null&&E?Is(ie,c&&c.ref,O,u||c,!u):ie==null&&c&&c.ref!=null&&Is(c.ref,null,O,c,!0)},z=(c,u,w,V)=>{if(c==null)s(u.el=l(u.children),w,V);else{const E=u.el=c.el;u.children!==c.children&&h(E,u.children)}},C=(c,u,w,V)=>{c==null?s(u.el=a(u.children||""),w,V):u.el=c.el},J=(c,u,w,V)=>{[c.el,c.anchor]=F(c.children,u,w,V,c.el,c.anchor)},te=({el:c,anchor:u},w,V)=>{let E;for(;c&&c!==u;)E=L(c),s(c,w,V),c=E;s(u,w,V)},X=({el:c,anchor:u})=>{let w;for(;c&&c!==u;)w=L(c),i(c),c=w;i(u)},ae=(c,u,w,V,E,O,q,Y,G)=>{u.type==="svg"?q="svg":u.type==="math"&&(q="mathml"),c==null?ve(u,w,V,E,O,q,Y,G):le(c,u,E,O,q,Y,G)},ve=(c,u,w,V,E,O,q,Y)=>{let G,K;const{props:ie,shapeFlag:ee,transition:Q,dirs:ne}=c;if(G=c.el=o(c.type,O,ie&&ie.is,ie),ee&8?p(G,c.children):ee&16&&re(c.children,G,null,V,E,Ar(c,O),q,Y),ne&&En(c,null,V,"created"),xe(G,c,c.scopeId,q,V),ie){for(const Ee in ie)Ee!=="value"&&!Bs(Ee)&&r(G,Ee,null,ie[Ee],O,V);"value"in ie&&r(G,"value",null,ie.value,O),(K=ie.onVnodeBeforeMount)&&$t(K,V,c)}ne&&En(c,null,V,"beforeMount");const fe=Tm(E,Q);fe&&Q.beforeEnter(G),s(G,u,w),((K=ie&&ie.onVnodeMounted)||fe||ne)&&at(()=>{K&&$t(K,V,c),fe&&Q.enter(G),ne&&En(c,null,V,"mounted")},E)},xe=(c,u,w,V,E)=>{if(w&&H(c,w),V)for(let O=0;O<V.length;O++)H(c,V[O]);if(E){let O=E.subTree;if(u===O||Fu(O.type)&&(O.ssContent===u||O.ssFallback===u)){const q=E.vnode;xe(c,q,q.scopeId,q.slotScopeIds,E.parent)}}},re=(c,u,w,V,E,O,q,Y,G=0)=>{for(let K=G;K<c.length;K++){const ie=c[K]=Y?dn(c[K]):At(c[K]);j(null,ie,u,w,V,E,O,q,Y)}},le=(c,u,w,V,E,O,q)=>{const Y=u.el=c.el;let{patchFlag:G,dynamicChildren:K,dirs:ie}=u;G|=c.patchFlag&16;const ee=c.props||Ve,Q=u.props||Ve;let ne;if(w&&kn(w,!1),(ne=Q.onVnodeBeforeUpdate)&&$t(ne,w,u,c),ie&&En(u,c,w,"beforeUpdate"),w&&kn(w,!0),(ee.innerHTML&&Q.innerHTML==null||ee.textContent&&Q.textContent==null)&&p(Y,""),K?oe(c.dynamicChildren,K,Y,w,V,Ar(u,E),O):q||_(c,u,Y,null,w,V,Ar(u,E),O,!1),G>0){if(G&16)S(Y,ee,Q,w,E);else if(G&2&&ee.class!==Q.class&&r(Y,"class",null,Q.class,E),G&4&&r(Y,"style",ee.style,Q.style,E),G&8){const fe=u.dynamicProps;for(let Ee=0;Ee<fe.length;Ee++){const Pe=fe[Ee],st=ee[Pe],it=Q[Pe];(it!==st||Pe==="value")&&r(Y,Pe,st,it,E,w)}}G&1&&c.children!==u.children&&p(Y,u.children)}else!q&&K==null&&S(Y,ee,Q,w,E);((ne=Q.onVnodeUpdated)||ie)&&at(()=>{ne&&$t(ne,w,u,c),ie&&En(u,c,w,"updated")},V)},oe=(c,u,w,V,E,O,q)=>{for(let Y=0;Y<u.length;Y++){const G=c[Y],K=u[Y],ie=G.el&&(G.type===Lt||!Es(G,K)||G.shapeFlag&198)?d(G.el):w;j(G,K,ie,null,V,E,O,q,!0)}},S=(c,u,w,V,E)=>{if(u!==w){if(u!==Ve)for(const O in u)!Bs(O)&&!(O in w)&&r(c,O,u[O],null,E,V);for(const O in w){if(Bs(O))continue;const q=w[O],Y=u[O];q!==Y&&O!=="value"&&r(c,O,Y,q,E,V)}"value"in w&&r(c,"value",u.value,w.value,E)}},$=(c,u,w,V,E,O,q,Y,G)=>{const K=u.el=c?c.el:l(""),ie=u.anchor=c?c.anchor:l("");let{patchFlag:ee,dynamicChildren:Q,slotScopeIds:ne}=u;ne&&(Y=Y?Y.concat(ne):ne),c==null?(s(K,w,V),s(ie,w,V),re(u.children||[],w,ie,E,O,q,Y,G)):ee>0&&ee&64&&Q&&c.dynamicChildren?(oe(c.dynamicChildren,Q,w,E,O,q,Y),(u.key!=null||E&&u===E.subTree)&&Ou(c,u,!0)):_(c,u,w,ie,E,O,q,Y,G)},x=(c,u,w,V,E,O,q,Y,G)=>{u.slotScopeIds=Y,c==null?u.shapeFlag&512?E.ctx.activate(u,w,V,q,G):y(u,w,V,E,O,q,G):v(c,u,G)},y=(c,u,w,V,E,O,q)=>{const Y=c.component=Xm(c,V,E);if(_u(c)&&(Y.ctx.renderer=W),Jm(Y,!1,q),Y.asyncDep){if(E&&E.registerDep(Y,b,q),!c.el){const G=Y.subTree=Ft(us);C(null,G,u,w)}}else b(Y,c,u,w,E,O,q)},v=(c,u,w)=>{const V=u.component=c.component;if(jm(c,u,w))if(V.asyncDep&&!V.asyncResolved){m(V,u,w);return}else V.next=u,V.update();else u.el=c.el,V.vnode=u},b=(c,u,w,V,E,O,q)=>{const Y=()=>{if(c.isMounted){let{next:ee,bu:Q,u:ne,parent:fe,vnode:Ee}=c;{const Mt=Lu(c);if(Mt){ee&&(ee.el=Ee.el,m(c,ee,q)),Mt.asyncDep.then(()=>{c.isUnmounted||Y()});return}}let Pe=ee,st;kn(c,!1),ee?(ee.el=Ee.el,m(c,ee,q)):ee=Ee,Q&&Mr(Q),(st=ee.props&&ee.props.onVnodeBeforeUpdate)&&$t(st,fe,ee,Ee),kn(c,!0);const it=ya(c),St=c.subTree;c.subTree=it,j(St,it,d(St.el),N(St),c,E,O),ee.el=it.el,Pe===null&&Nm(c,it.el),ne&&at(ne,E),(st=ee.props&&ee.props.onVnodeUpdated)&&at(()=>$t(st,fe,ee,Ee),E)}else{let ee;const{el:Q,props:ne}=u,{bm:fe,m:Ee,parent:Pe,root:st,type:it}=c,St=Ks(u);kn(c,!1),fe&&Mr(fe),!St&&(ee=ne&&ne.onVnodeBeforeMount)&&$t(ee,Pe,u),kn(c,!0);{st.ce&&st.ce._def.shadowRoot!==!1&&st.ce._injectChildStyle(it);const Mt=c.subTree=ya(c);j(null,Mt,w,V,c,E,O),u.el=Mt.el}if(Ee&&at(Ee,E),!St&&(ee=ne&&ne.onVnodeMounted)){const Mt=u;at(()=>$t(ee,Pe,Mt),E)}(u.shapeFlag&256||Pe&&Ks(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&c.a&&at(c.a,E),c.isMounted=!0,u=w=V=null}};c.scope.on();const G=c.effect=new Wc(Y);c.scope.off();const K=c.update=G.run.bind(G),ie=c.job=G.runIfDirty.bind(G);ie.i=c,ie.id=c.uid,G.scheduler=()=>Ho(ie),kn(c,!0),K()},m=(c,u,w)=>{u.component=c;const V=c.vnode.props;c.vnode=u,c.next=null,xm(c,u.props,V,w),Vm(c,u.children,w),Xt(),fa(c),Zt()},_=(c,u,w,V,E,O,q,Y,G=!1)=>{const K=c&&c.children,ie=c?c.shapeFlag:0,ee=u.children,{patchFlag:Q,shapeFlag:ne}=u;if(Q>0){if(Q&128){M(K,ee,w,V,E,O,q,Y,G);return}else if(Q&256){P(K,ee,w,V,E,O,q,Y,G);return}}ne&8?(ie&16&&U(K,E,O),ee!==K&&p(w,ee)):ie&16?ne&16?M(K,ee,w,V,E,O,q,Y,G):U(K,E,O,!0):(ie&8&&p(w,""),ne&16&&re(ee,w,V,E,O,q,Y,G))},P=(c,u,w,V,E,O,q,Y,G)=>{c=c||ns,u=u||ns;const K=c.length,ie=u.length,ee=Math.min(K,ie);let Q;for(Q=0;Q<ee;Q++){const ne=u[Q]=G?dn(u[Q]):At(u[Q]);j(c[Q],ne,w,null,E,O,q,Y,G)}K>ie?U(c,E,O,!0,!1,ee):re(u,w,V,E,O,q,Y,G,ee)},M=(c,u,w,V,E,O,q,Y,G)=>{let K=0;const ie=u.length;let ee=c.length-1,Q=ie-1;for(;K<=ee&&K<=Q;){const ne=c[K],fe=u[K]=G?dn(u[K]):At(u[K]);if(Es(ne,fe))j(ne,fe,w,null,E,O,q,Y,G);else break;K++}for(;K<=ee&&K<=Q;){const ne=c[ee],fe=u[Q]=G?dn(u[Q]):At(u[Q]);if(Es(ne,fe))j(ne,fe,w,null,E,O,q,Y,G);else break;ee--,Q--}if(K>ee){if(K<=Q){const ne=Q+1,fe=ne<ie?u[ne].el:V;for(;K<=Q;)j(null,u[K]=G?dn(u[K]):At(u[K]),w,fe,E,O,q,Y,G),K++}}else if(K>Q)for(;K<=ee;)g(c[K],E,O,!0),K++;else{const ne=K,fe=K,Ee=new Map;for(K=fe;K<=Q;K++){const lt=u[K]=G?dn(u[K]):At(u[K]);lt.key!=null&&Ee.set(lt.key,K)}let Pe,st=0;const it=Q-fe+1;let St=!1,Mt=0;const xs=new Array(it);for(K=0;K<it;K++)xs[K]=0;for(K=ne;K<=ee;K++){const lt=c[K];if(st>=it){g(lt,E,O,!0);continue}let Tt;if(lt.key!=null)Tt=Ee.get(lt.key);else for(Pe=fe;Pe<=Q;Pe++)if(xs[Pe-fe]===0&&Es(lt,u[Pe])){Tt=Pe;break}Tt===void 0?g(lt,E,O,!0):(xs[Tt-fe]=K+1,Tt>=Mt?Mt=Tt:St=!0,j(lt,u[Tt],w,null,E,O,q,Y,G),st++)}const ua=St?$m(xs):ns;for(Pe=ua.length-1,K=it-1;K>=0;K--){const lt=fe+K,Tt=u[lt],pa=lt+1<ie?u[lt+1].el:V;xs[K]===0?j(null,Tt,w,pa,E,O,q,Y,G):St&&(Pe<0||K!==ua[Pe]?T(Tt,w,pa,2):Pe--)}}},T=(c,u,w,V,E=null)=>{const{el:O,type:q,transition:Y,children:G,shapeFlag:K}=c;if(K&6){T(c.component.subTree,u,w,V);return}if(K&128){c.suspense.move(u,w,V);return}if(K&64){q.move(c,u,w,W);return}if(q===Lt){s(O,u,w);for(let ee=0;ee<G.length;ee++)T(G[ee],u,w,V);s(c.anchor,u,w);return}if(q===Rr){te(c,u,w);return}if(V!==2&&K&1&&Y)if(V===0)Y.beforeEnter(O),s(O,u,w),at(()=>Y.enter(O),E);else{const{leave:ee,delayLeave:Q,afterLeave:ne}=Y,fe=()=>{c.ctx.isUnmounted?i(O):s(O,u,w)},Ee=()=>{ee(O,()=>{fe(),ne&&ne()})};Q?Q(O,fe,Ee):Ee()}else s(O,u,w)},g=(c,u,w,V=!1,E=!1)=>{const{type:O,props:q,ref:Y,children:G,dynamicChildren:K,shapeFlag:ie,patchFlag:ee,dirs:Q,cacheIndex:ne}=c;if(ee===-2&&(E=!1),Y!=null&&(Xt(),Is(Y,null,w,c,!0),Zt()),ne!=null&&(u.renderCache[ne]=void 0),ie&256){u.ctx.deactivate(c);return}const fe=ie&1&&Q,Ee=!Ks(c);let Pe;if(Ee&&(Pe=q&&q.onVnodeBeforeUnmount)&&$t(Pe,u,c),ie&6)A(c.component,w,V);else{if(ie&128){c.suspense.unmount(w,V);return}fe&&En(c,null,u,"beforeUnmount"),ie&64?c.type.remove(c,u,w,W,V):K&&!K.hasOnce&&(O!==Lt||ee>0&&ee&64)?U(K,u,w,!1,!0):(O===Lt&&ee&384||!E&&ie&16)&&U(G,u,w),V&&B(c)}(Ee&&(Pe=q&&q.onVnodeUnmounted)||fe)&&at(()=>{Pe&&$t(Pe,u,c),fe&&En(c,null,u,"unmounted")},w)},B=c=>{const{type:u,el:w,anchor:V,transition:E}=c;if(u===Lt){R(w,V);return}if(u===Rr){X(c);return}const O=()=>{i(w),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(c.shapeFlag&1&&E&&!E.persisted){const{leave:q,delayLeave:Y}=E,G=()=>q(w,O);Y?Y(c.el,O,G):G()}else O()},R=(c,u)=>{let w;for(;c!==u;)w=L(c),i(c),c=w;i(u)},A=(c,u,w)=>{const{bum:V,scope:E,job:O,subTree:q,um:Y,m:G,a:K,parent:ie,slots:{__:ee}}=c;Ca(G),Ca(K),V&&Mr(V),ie&&he(ee)&&ee.forEach(Q=>{ie.renderCache[Q]=void 0}),E.stop(),O&&(O.flags|=8,g(q,c,u,w)),Y&&at(Y,u),at(()=>{c.isUnmounted=!0},u),u&&u.pendingBranch&&!u.isUnmounted&&c.asyncDep&&!c.asyncResolved&&c.suspenseId===u.pendingId&&(u.deps--,u.deps===0&&u.resolve())},U=(c,u,w,V=!1,E=!1,O=0)=>{for(let q=O;q<c.length;q++)g(c[q],u,w,V,E)},N=c=>{if(c.shapeFlag&6)return N(c.component.subTree);if(c.shapeFlag&128)return c.suspense.next();const u=L(c.anchor||c.el),w=u&&u[Qd];return w?L(w):u};let I=!1;const Z=(c,u,w)=>{c==null?u._vnode&&g(u._vnode,null,null,!0):j(u._vnode||null,c,u,null,null,null,w),u._vnode=c,I||(I=!0,fa(),fu(),I=!1)},W={p:j,um:g,m:T,r:B,mt:y,mc:re,pc:_,pbc:oe,n:N,o:t};return{render:Z,hydrate:void 0,createApp:gm(Z)}}function Ar({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function kn({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Tm(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ou(t,e,n=!1){const s=t.children,i=e.children;if(he(s)&&he(i))for(let r=0;r<s.length;r++){const o=s[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=dn(i[r]),l.el=o.el),!n&&l.patchFlag!==-2&&Ou(o,l)),l.type===hr&&(l.el=o.el),l.type===us&&!l.el&&(l.el=o.el)}}function $m(t){const e=t.slice(),n=[0];let s,i,r,o,l;const a=t.length;for(s=0;s<a;s++){const h=t[s];if(h!==0){if(i=n[n.length-1],t[i]<h){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,t[n[l]]<h?r=l+1:o=l;h<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function Lu(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Lu(e)}function Ca(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Om=Symbol.for("v-scx"),Lm=()=>Oi(Om);function qs(t,e,n){return Au(t,e,n)}function Au(t,e,n=Ve){const{immediate:s,deep:i,flush:r,once:o}=n,l=We({},n),a=e&&s||!e&&r!=="post";let h;if(Qs){if(r==="sync"){const H=Lm();h=H.__watcherHandles||(H.__watcherHandles=[])}else if(!a){const H=()=>{};return H.stop=Dt,H.resume=Dt,H.pause=Dt,H}}const p=He;l.call=(H,F,j)=>Bt(H,p,F,j);let d=!1;r==="post"?l.scheduler=H=>{at(H,p&&p.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(H,F)=>{F?H():Ho(H)}),l.augmentJob=H=>{e&&(H.flags|=4),d&&(H.flags|=2,p&&(H.id=p.uid,H.i=p))};const L=Wd(t,e,l);return Qs&&(h?h.push(L):a&&L()),L}function Am(t,e,n){const s=this.proxy,i=ze(t)?t.includes(".")?Ru(s,t):()=>s[t]:t.bind(s,s);let r;pe(e)?r=e:(r=e.handler,n=e);const o=pi(this),l=Au(i,r.bind(s),n);return o(),l}function Ru(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Rm=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${gn(e)}Modifiers`]||t[`${zn(e)}Modifiers`];function Dm(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ve;let i=n;const r=e.startsWith("update:"),o=r&&Rm(s,e.slice(7));o&&(o.trim&&(i=n.map(p=>ze(p)?p.trim():p)),o.number&&(i=n.map(md)));let l,a=s[l=Sr(e)]||s[l=Sr(gn(e))];!a&&r&&(a=s[l=Sr(zn(e))]),a&&Bt(a,t,6,i);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Bt(h,t,6,i)}}function Du(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},l=!1;if(!pe(t)){const a=h=>{const p=Du(h,e,!0);p&&(l=!0,We(o,p))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(De(t)&&s.set(t,null),null):(he(r)?r.forEach(a=>o[a]=null):We(o,r),De(t)&&s.set(t,o),o)}function pr(t,e){return!t||!nr(e)?!1:(e=e.slice(2).replace(/Once$/,""),ge(t,e[0].toLowerCase()+e.slice(1))||ge(t,zn(e))||ge(t,e))}function ya(t){const{type:e,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:a,render:h,renderCache:p,props:d,data:L,setupState:H,ctx:F,inheritAttrs:j}=t,z=Ii(t);let C,J;try{if(n.shapeFlag&4){const X=i||s,ae=X;C=At(h.call(ae,X,p,d,H,L,F)),J=l}else{const X=e;C=At(X.length>1?X(d,{attrs:l,slots:o,emit:a}):X(d,null)),J=e.props?l:Fm(l)}}catch(X){Hs.length=0,ar(X,t,1),C=Ft(us)}let te=C;if(J&&j!==!1){const X=Object.keys(J),{shapeFlag:ae}=te;X.length&&ae&7&&(r&&X.some(Ao)&&(J=Bm(J,r)),te=ps(te,J,!1,!0))}return n.dirs&&(te=ps(te,null,!1,!0),te.dirs=te.dirs?te.dirs.concat(n.dirs):n.dirs),n.transition&&Go(te,n.transition),C=te,Ii(z),C}const Fm=t=>{let e;for(const n in t)(n==="class"||n==="style"||nr(n))&&((e||(e={}))[n]=t[n]);return e},Bm=(t,e)=>{const n={};for(const s in t)(!Ao(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function jm(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:l,patchFlag:a}=e,h=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?xa(s,o,h):!!o;if(a&8){const p=e.dynamicProps;for(let d=0;d<p.length;d++){const L=p[d];if(o[L]!==s[L]&&!pr(h,L))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?xa(s,o,h):!0:!!o;return!1}function xa(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!pr(n,r))return!0}return!1}function Nm({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Fu=t=>t.__isSuspense;function zm(t,e){e&&e.pendingBranch?he(t)?e.effects.push(...t):e.effects.push(t):Zd(t)}const Lt=Symbol.for("v-fgt"),hr=Symbol.for("v-txt"),us=Symbol.for("v-cmt"),Rr=Symbol.for("v-stc"),Hs=[];let ct=null;function Gs(t=!1){Hs.push(ct=t?null:[])}function Im(){Hs.pop(),ct=Hs[Hs.length-1]||null}let Js=1;function Pa(t,e=!1){Js+=t,t<0&&ct&&e&&(ct.hasOnce=!0)}function Bu(t){return t.dynamicChildren=Js>0?ct||ns:null,Im(),Js>0&&ct&&ct.push(t),t}function Ui(t,e,n,s,i,r){return Bu(Jo(t,e,n,s,i,r,!0))}function Km(t,e,n,s,i){return Bu(Ft(t,e,n,s,i,!0))}function ju(t){return t?t.__v_isVNode===!0:!1}function Es(t,e){return t.type===e.type&&t.key===e.key}const Nu=({key:t})=>t??null,Li=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ze(t)||Ge(t)||pe(t)?{i:Ct,r:t,k:e,f:!!n}:t:null);function Jo(t,e=null,n=null,s=0,i=null,r=t===Lt?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Nu(e),ref:e&&Li(e),scopeId:bu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ct};return l?(Qo(a,n),r&128&&t.normalize(a)):n&&(a.shapeFlag|=ze(n)?8:16),Js>0&&!o&&ct&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&ct.push(a),a}const Ft=Um;function Um(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===hm)&&(t=us),ju(t)){const l=ps(t,e,!0);return n&&Qo(l,n),Js>0&&!r&&ct&&(l.shapeFlag&6?ct[ct.indexOf(t)]=l:ct.push(l)),l.patchFlag=-2,l}if(nf(t)&&(t=t.__vccOpts),e){e=qm(e);let{class:l,style:a}=e;l&&!ze(l)&&(e.class=lr(l)),De(a)&&(Uo(a)&&!he(a)&&(a=We({},a)),e.style=or(a))}const o=ze(t)?1:Fu(t)?128:em(t)?64:De(t)?4:pe(t)?2:0;return Jo(t,e,n,s,i,o,r,!0)}function qm(t){return t?Uo(t)||ku(t)?We({},t):t:null}function ps(t,e,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:a}=t,h=e?Gm(i||{},e):i,p={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Nu(h),ref:e&&e.ref?n&&r?he(r)?r.concat(Li(e)):[r,Li(e)]:Li(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Lt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ps(t.ssContent),ssFallback:t.ssFallback&&ps(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&s&&Go(p,a.clone(p)),p}function Hm(t=" ",e=0){return Ft(hr,null,t,e)}function At(t){return t==null||typeof t=="boolean"?Ft(us):he(t)?Ft(Lt,null,t.slice()):ju(t)?dn(t):Ft(hr,null,String(t))}function dn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ps(t)}function Qo(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(he(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Qo(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!ku(e)?e._ctx=Ct:i===3&&Ct&&(Ct.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else pe(e)?(e={default:e,_ctx:Ct},n=32):(e=String(e),s&64?(n=16,e=[Hm(e)]):n=8);t.children=e,t.shapeFlag|=n}function Gm(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=lr([e.class,s.class]));else if(i==="style")e.style=or([e.style,s.style]);else if(nr(i)){const r=e[i],o=s[i];o&&r!==o&&!(he(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function $t(t,e,n,s=null){Bt(t,e,7,[n,s])}const Wm=xu();let Ym=0;function Xm(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||Wm,r={uid:Ym++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Cd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Su(s,i),emitsOptions:Du(s,i),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:s.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Dm.bind(null,r),t.ce&&t.ce(r),r}let He=null;const Zm=()=>He||Ct;let qi,vo;{const t=rr(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};qi=e("__VUE_INSTANCE_SETTERS__",n=>He=n),vo=e("__VUE_SSR_SETTERS__",n=>Qs=n)}const pi=t=>{const e=He;return qi(t),t.scope.on(),()=>{t.scope.off(),qi(e)}},Ea=()=>{He&&He.scope.off(),qi(null)};function zu(t){return t.vnode.shapeFlag&4}let Qs=!1;function Jm(t,e=!1,n=!1){e&&vo(e);const{props:s,children:i}=t.vnode,r=zu(t);ym(t,s,r,e),km(t,i,n||e);const o=r?Qm(t,e):void 0;return e&&vo(!1),o}function Qm(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,dm);const{setup:s}=n;if(s){Xt();const i=t.setupContext=s.length>1?tf(t):null,r=pi(t),o=ui(s,t,0,[t.props,i]),l=Uc(o);if(Zt(),r(),(l||t.sp)&&!Ks(t)&&wu(t),l){if(o.then(Ea,Ea),e)return o.then(a=>{ka(t,a)}).catch(a=>{ar(a,t,0)});t.asyncDep=o}else ka(t,o)}else Iu(t)}function ka(t,e,n){pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:De(e)&&(t.setupState=pu(e)),Iu(t)}function Iu(t,e,n){const s=t.type;t.render||(t.render=s.render||Dt);{const i=pi(t);Xt();try{mm(t)}finally{Zt(),i()}}}const ef={get(t,e){return Ue(t,"get",""),t[e]}};function tf(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,ef),slots:t.slots,emit:t.emit,expose:e}}function el(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(pu(Id(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Us)return Us[n](t)},has(e,n){return n in e||n in Us}})):t.proxy}function nf(t){return pe(t)&&"__vccOpts"in t}const dr=(t,e)=>Hd(t,e,Qs),sf="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bo;const Va=typeof window<"u"&&window.trustedTypes;if(Va)try{bo=Va.createPolicy("vue",{createHTML:t=>t})}catch{}const Ku=bo?t=>bo.createHTML(t):t=>t,rf="http://www.w3.org/2000/svg",of="http://www.w3.org/1998/Math/MathML",qt=typeof document<"u"?document:null,Sa=qt&&qt.createElement("template"),lf={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?qt.createElementNS(rf,t):e==="mathml"?qt.createElementNS(of,t):n?qt.createElement(t,{is:n}):qt.createElement(t);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>qt.createTextNode(t),createComment:t=>qt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>qt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Sa.innerHTML=Ku(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=Sa.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},af=Symbol("_vtc");function cf(t,e,n){const s=t[af];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ma=Symbol("_vod"),uf=Symbol("_vsh"),pf=Symbol(""),hf=/(^|;)\s*display\s*:/;function df(t,e,n){const s=t.style,i=ze(n);let r=!1;if(n&&!i){if(e)if(ze(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Ai(s,l,"")}else for(const o in e)n[o]==null&&Ai(s,o,"");for(const o in n)o==="display"&&(r=!0),Ai(s,o,n[o])}else if(i){if(e!==n){const o=s[pf];o&&(n+=";"+o),s.cssText=n,r=hf.test(n)}}else e&&t.removeAttribute("style");Ma in t&&(t[Ma]=r?s.display:"",t[uf]&&(s.display="none"))}const Ta=/\s*!important$/;function Ai(t,e,n){if(he(n))n.forEach(s=>Ai(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=mf(t,e);Ta.test(n)?t.setProperty(zn(s),n.replace(Ta,""),"important"):t[s]=n}}const $a=["Webkit","Moz","ms"],Dr={};function mf(t,e){const n=Dr[e];if(n)return n;let s=gn(e);if(s!=="filter"&&s in t)return Dr[e]=s;s=qc(s);for(let i=0;i<$a.length;i++){const r=$a[i]+s;if(r in t)return Dr[e]=r}return e}const Oa="http://www.w3.org/1999/xlink";function La(t,e,n,s,i,r=gd(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Oa,e.slice(6,e.length)):t.setAttributeNS(Oa,e,n):n==null||r&&!Hc(n)?t.removeAttribute(e):t.setAttribute(e,r?"":fs(n)?String(n):n)}function Aa(t,e,n,s,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Ku(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Hc(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function ff(t,e,n,s){t.addEventListener(e,n,s)}function vf(t,e,n,s){t.removeEventListener(e,n,s)}const Ra=Symbol("_vei");function bf(t,e,n,s,i=null){const r=t[Ra]||(t[Ra]={}),o=r[e];if(s&&o)o.value=s;else{const[l,a]=wf(e);if(s){const h=r[e]=Cf(s,i);ff(t,l,h,a)}else o&&(vf(t,l,o,a),r[e]=void 0)}}const Da=/(?:Once|Passive|Capture)$/;function wf(t){let e;if(Da.test(t)){e={};let s;for(;s=t.match(Da);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):zn(t.slice(2)),e]}let Fr=0;const _f=Promise.resolve(),gf=()=>Fr||(_f.then(()=>Fr=0),Fr=Date.now());function Cf(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Bt(yf(s,n.value),e,5,[s])};return n.value=t,n.attached=gf(),n}function yf(t,e){if(he(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Fa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xf=(t,e,n,s,i,r)=>{const o=i==="svg";e==="class"?cf(t,s,o):e==="style"?df(t,n,s):nr(e)?Ao(e)||bf(t,e,n,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Pf(t,e,s,o))?(Aa(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&La(t,e,s,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ze(s))?Aa(t,gn(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),La(t,e,s,o))};function Pf(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Fa(e)&&pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Fa(e)&&ze(n)?!1:e in t}const Ef=We({patchProp:xf},lf);let Ba;function kf(){return Ba||(Ba=Sm(Ef))}const Vf=(...t)=>{const e=kf().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=Mf(s);if(!i)return;const r=e._component;!pe(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Sf(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Sf(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Mf(t){return ze(t)?document.querySelector(t):t}/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function Se(t){return t==null}function tl(t){return t!==null&&typeof t=="object"}function wo(t){return t!==null&&typeof t=="object"}function Tf(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Rn(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((s,i)=>{const r=t[i],o=e[i];return wo(r)&&wo(o)?Object.assign(Object.assign({},s),{[i]:Rn(r,o)}):Object.assign(Object.assign({},s),{[i]:i in e?o:r})},{})}function nl(t){return tl(t)?"target"in t:!1}const $f={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let qe=class ts{static alreadyDisposed(){return new ts({type:"alreadydisposed"})}static notBindable(){return new ts({type:"notbindable"})}static notCompatible(e,n){return new ts({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new ts({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new ts({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=$f[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},ja=class Uu{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const s=this.read();if(!Uu.isBindable(s))throw qe.notBindable();if(!(e in s))throw qe.propertyNotFound(e);s[e]=n}},Fe=class{constructor(){this.observers_={}}on(e,n,s){var i;let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n,key:(i=s?.key)!==null&&i!==void 0?i:n}),this}off(e,n){const s=this.observers_[e];return s&&(this.observers_[e]=s.filter(i=>i.key!==n)),this}emit(e,n){const s=this.observers_[e];s&&s.forEach(i=>{i.handler(n)})}},Of=class{constructor(e,n){var s;this.constraint_=n?.constraint,this.equals_=(s=n?.equals)!==null&&s!==void 0?s:(i,r)=>i===r,this.emitter=new Fe,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const s=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,i)&&!s.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:s,previousRawValue:r,rawValue:i,sender:this}))}},Lf=class{constructor(e){this.emitter=new Fe,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const s=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!s.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:s,previousRawValue:i,rawValue:this.value_,sender:this}))}},Af=class{constructor(e){this.emitter=new Fe,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function Te(t,e){const n=e?.constraint,s=e?.equals;return!n&&!s?new Lf(t):new Of(t,e)}function Rf(t){return[new Af(t),(e,n)=>{t.setRawValue(e,n)}]}let me=class qu{constructor(e){this.emitter=new Fe,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((s,i)=>Object.assign(s,{[i]:Te(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new qu(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},hi=class{constructor(e){this.values=me.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),s=this.values.get("min");return Math.min(Math.max(e,s),n)}},Df=class{constructor(e){this.values=me.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),s=this.values.get("min");let i=e;return Se(s)||(i=Math.max(i,s)),Se(n)||(i=Math.min(i,n)),i}},Ff=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,s=Math.round((e-n)/this.step);return n+s*this.step}},Bf=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const jf={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let Nf=class{constructor(e,n,s){this.left=n,this.operator=e,this.right=s}evaluate(){const e=jf[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const zf={"+":t=>t,"-":t=>-t,"~":t=>~t};let If=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=zf[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function sl(t){return(e,n)=>{for(let s=0;s<t.length;s++){const i=t[s](e,n);if(i!=="")return i}return""}}function ei(t,e){var n;const s=t.substr(e).match(/^\s+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Kf(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function ti(t,e){var n;const s=t.substr(e).match(/^[0-9]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Uf(t,e){const n=ti(t,e);if(n!=="")return n;const s=t.substr(e,1);if(e+=1,s!=="-"&&s!=="+")return"";const i=ti(t,e);return i===""?"":s+i}function il(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const s=Uf(t,e);return s===""?"":n+s}function Hu(t,e){const n=t.substr(e,1);if(n==="0")return n;const s=Kf(t,e);return e+=s.length,s===""?"":s+ti(t,e)}function qf(t,e){const n=Hu(t,e);if(e+=n.length,n==="")return"";const s=t.substr(e,1);if(e+=s.length,s!==".")return"";const i=ti(t,e);return e+=i.length,n+s+i+il(t,e)}function Hf(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const s=ti(t,e);return e+=s.length,s===""?"":n+s+il(t,e)}function Gf(t,e){const n=Hu(t,e);return e+=n.length,n===""?"":n+il(t,e)}const Wf=sl([qf,Hf,Gf]);function Yf(t,e){var n;const s=t.substr(e).match(/^[01]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Xf(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const s=Yf(t,e);return s===""?"":n+s}function Zf(t,e){var n;const s=t.substr(e).match(/^[0-7]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Jf(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const s=Zf(t,e);return s===""?"":n+s}function Qf(t,e){var n;const s=t.substr(e).match(/^[0-9a-f]+/i);return(n=s&&s[0])!==null&&n!==void 0?n:""}function ev(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const s=Qf(t,e);return s===""?"":n+s}const tv=sl([Xf,Jf,ev]),nv=sl([tv,Wf]);function sv(t,e){const n=nv(t,e);return e+=n.length,n===""?null:{evaluable:new Bf(n),cursor:e}}function iv(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const s=Wu(t,e);if(!s)return null;e=s.cursor,e+=ei(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:s.evaluable,cursor:e}}function rv(t,e){var n;return(n=sv(t,e))!==null&&n!==void 0?n:iv(t,e)}function Gu(t,e){const n=rv(t,e);if(n)return n;const s=t.substr(e,1);if(e+=s.length,s!=="+"&&s!=="-"&&s!=="~")return null;const i=Gu(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new If(s,i.evaluable)}):null}function ov(t,e,n){n+=ei(e,n).length;const s=t.filter(i=>e.startsWith(i,n))[0];return s?(n+=s.length,n+=ei(e,n).length,{cursor:n,operator:s}):null}function lv(t,e){return(n,s)=>{const i=t(n,s);if(!i)return null;s=i.cursor;let r=i.evaluable;for(;;){const o=ov(e,n,s);if(!o)break;s=o.cursor;const l=t(n,s);if(!l)return null;s=l.cursor,r=new Nf(o.operator,r,l.evaluable)}return r?{cursor:s,evaluable:r}:null}}const av=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>lv(t,e),Gu);function Wu(t,e){return e+=ei(t,e).length,av(t,e)}function cv(t){const e=Wu(t,0);return!e||e.cursor+ei(t,e.cursor).length!==t.length?null:e.evaluable}function Jt(t){var e;const n=cv(t);return(e=n?.evaluate())!==null&&e!==void 0?e:null}function Yu(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Jt(t);if(!Se(e))return e}return 0}function uv(t){return String(t)}function ot(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Ce(t,e,n,s,i){const r=(t-e)/(n-e);return s+r*(i-s)}function Na(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Be(t,e,n){return Math.min(Math.max(t,e),n)}function Xu(t,e){return(t%e+e)%e}function pv(t,e){return Se(t.step)?Math.max(Na(e),2):Na(t.step)}function Zu(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function Ju(t,e){var n;const s=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return s===0?.1:Math.pow(10,Math.floor(Math.log10(s))-1)}function Qu(t,e){return Se(t.step)?null:new Ff(t.step,e)}function ep(t){return!Se(t.max)&&!Se(t.min)?new hi({max:t.max,min:t.min}):!Se(t.max)||!Se(t.min)?new Df({max:t.max,min:t.min}):null}function tp(t,e){var n,s,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:ot(pv(t,e)),keyScale:(s=t.keyScale)!==null&&s!==void 0?s:Zu(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:Ju(t,e)}}function np(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function rl(t){return{constraint:t.constraint,textProps:me.fromObject(tp(t.params,t.initialValue))}}let In=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},mr=class{constructor(e){this.target=e}},di=class extends mr{constructor(e,n,s){super(e),this.value=n,this.last=s??!0}},hv=class extends mr{constructor(e,n){super(e),this.expanded=n}},dv=class extends mr{constructor(e,n){super(e),this.index=n}};class mv extends mr{constructor(e,n){super(e),this.native=n}}let ni=class extends In{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Fe,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new di(this,n.binding.target.read(),e.options.last))}};class fv{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Fe}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function vv(t){if(!("binding"in t))return!1;const e=t.binding;return nl(e)&&"read"in e&&"write"in e}function bv(t,e){const s=Object.keys(e).reduce((i,r)=>{if(i===void 0)return;const o=e[r],l=o(t[r]);return l.succeeded?Object.assign(Object.assign({},i),{[r]:l.value}):void 0},{});return s}function wv(t,e){return t.reduce((n,s)=>{if(n===void 0)return;const i=e(s);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function _v(t){return t===null?!1:typeof t=="object"}function Kt(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const s=t(n);return s!==void 0?{succeeded:!0,value:s}:{succeeded:!1,value:void 0}}}function za(t){return{custom:e=>Kt(e)(t),boolean:Kt(e=>typeof e=="boolean"?e:void 0)(t),number:Kt(e=>typeof e=="number"?e:void 0)(t),string:Kt(e=>typeof e=="string"?e:void 0)(t),function:Kt(e=>typeof e=="function"?e:void 0)(t),constant:e=>Kt(n=>n===e?e:void 0)(t),raw:Kt(e=>e)(t),object:e=>Kt(n=>{if(_v(n))return bv(n,e)})(t),array:e=>Kt(n=>{if(Array.isArray(n))return wv(n,e)})(t)}}const _o={optional:za(!0),required:za(!1)};function Oe(t,e){const n=e(_o),s=_o.required.object(n)(t);return s.succeeded?s.value:void 0}function pt(t,e,n,s){if(e&&!e(t))return!1;const i=Oe(t,n);return i?s(i):!1}function ht(t,e){var n;return Rn((n=t?.())!==null&&n!==void 0?n:{},e)}function Ln(t){return"value"in t}function sp(t){if(!tl(t)||!("binding"in t))return!1;const e=t.binding;return nl(e)}const Rt="http://www.w3.org/2000/svg";function Hi(t){t.offsetHeight}function gv(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function ol(t){return t.ontouchstart!==void 0}function Cv(){return globalThis}function yv(){return Cv().document}function xv(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const Pv={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function fr(t,e){const n=t.createElementNS(Rt,"svg");return n.innerHTML=Pv[e],n}function ip(t,e,n){t.insertBefore(e,t.children[n])}function ll(t){t.parentElement&&t.parentElement.removeChild(t)}function rp(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function Ev(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function op(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Yt(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function jt(t,e,n){Yt(t.value(e),n)}const kv="tp";function be(t){return(n,s)=>[kv,"-",t,"v",n?`_${n}`:"",s?`-${s}`:""].join("")}const ks=be("lbl");function Vv(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}let lp=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ks()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(ks("l")),jt(n.props,"label",r=>{Se(r)?this.element.classList.add(ks(void 0,"nol")):(this.element.classList.remove(ks(void 0,"nol")),Ev(s),s.appendChild(Vv(e,r)))}),this.element.appendChild(s),this.labelElement=s;const i=e.createElement("div");i.classList.add(ks("v")),this.element.appendChild(i),this.valueElement=i}},ap=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new lp(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return pt(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return ht(null,{label:this.props.get("label")})}};function Sv(){return["veryfirst","first","last","verylast"]}const Ia=be(""),Ka={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let vr=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Sv().forEach(s=>{n.classList.remove(Ia(void 0,Ka[s]))}),this.blade.get("positions").forEach(s=>{n.classList.add(Ia(void 0,Ka[s]))})}),this.viewProps.handleDispose(()=>{ll(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return pt(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return ht(null,Object.assign({},this.viewProps.exportState()))}},Dn=class extends vr{constructor(e,n){if(n.value!==n.valueController.value)throw qe.shouldNeverHappen();const s=n.valueController.viewProps,i=new ap(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new lp(e,{props:n.props,viewProps:s}),viewProps:s})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return pt(e,n=>{var s,i,r;return super.importState(n)&&this.labelController.importProps(n)&&((r=(i=(s=this.valueController).importProps)===null||i===void 0?void 0:i.call(s,e))!==null&&r!==void 0?r:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,s;return ht(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(s=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&s!==void 0?s:{}))}};function Ua(t){const e=Object.assign({},t);return delete e.value,e}class cp extends Dn{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return pt(e,n=>super.importState(Ua(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return ht(()=>Ua(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Mv(t){return Ln(t)&&sp(t.value)}class Tv extends cp{importState(e){return pt(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function $v(t){return Ln(t)&&vv(t.value)}function up(t,e){for(;t.length<e;)t.push(void 0)}function Ov(t){const e=[];return up(e,t),e}function Lv(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function Av(t,e){const n=[...Lv(t),e];return n.length>t.length?n.splice(0,n.length-t.length):up(n,t.length),n}class Rv{constructor(e){this.emitter=new Fe,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Te(Ov(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=Av(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Dv(t){if(!("binding"in t))return!1;const e=t.binding;return nl(e)&&"read"in e&&!("write"in e)}class Fv extends cp{exportState(){return ht(()=>super.exportState(),{binding:{readonly:!0}})}}function Bv(t){return Ln(t)&&Dv(t.value)}let jv=class extends In{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const s=n.bind(this);return this.controller.buttonController.emitter.on(e,r=>{s(new mv(this,r.nativeEvent))}),this}off(e,n){return this.controller.buttonController.emitter.off(e,n),this}};function Nv(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function vs(t,e){return n=>{Nv(t,e,n)}}function al(t,e){Yt(t,n=>{e.textContent=n??""})}const Br=be("btn");let zv=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Br()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("button");s.classList.add(Br("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const i=e.createElement("div");i.classList.add(Br("t")),al(n.props.value("title"),i),this.buttonElement.appendChild(i)}},Iv=class{constructor(e,n){this.emitter=new Fe,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new zv(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return pt(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return ht(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}},qa=class extends vr{constructor(e,n){const s=new Iv(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new ap(e,{blade:n.blade,props:n.labelProps,valueController:s});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=s,this.labelController=i}importState(e){return pt(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return ht(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},pp=class{constructor(e){const[n,s]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=s??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const bs=new pp("2.0.5");function nt(t){return Object.assign({core:bs},t)}const Kv=nt({id:"button",type:"blade",accept(t){const e=Oe(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new qa(t.document,{blade:t.blade,buttonProps:me.fromObject({title:t.params.title}),labelProps:me.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof qa?new jv(t.controller):null}});function Uv(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function qv(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Hv(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Gv(t){return tl(t)?"refresh"in t&&typeof t.refresh=="function":!1}function Wv(t,e){if(!ja.isBindable(t))throw qe.notBindable();return new ja(t,e)}let Yv=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Fe,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,s){const i=s??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,Wv(e,n),i),l=this.pool_.createBindingApi(o);return this.add(l,i.index)}addFolder(e){return qv(this,e)}addButton(e){return Uv(this,e)}addTab(e){return Hv(this,e)}add(e,n){const s=e.controller;return this.controller_.rack.add(s,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,s=this.pool_.createBlade(n,e),i=this.pool_.createApi(s);return this.add(i,e.index)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.children.forEach(e=>{Gv(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,s=this.pool_.createApi(n),i=sp(n.value)?n.value.binding:null;this.emitter_.emit("change",new di(s,i?i.target.read():n.value.rawValue,e.options.last))}},cl=class extends In{constructor(e,n){super(e),this.rackApi_=new Yv(e.rackController,n)}refresh(){this.rackApi_.refresh()}},ul=class extends vr{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return pt(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((s,i)=>s.importState(n.children[i])))}exportState(){return ht(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function go(t){return"rackController"in t}let Xv=class{constructor(e){this.emitter=new Fe,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw qe.shouldNeverHappen();const s=n!==void 0?n:this.items_.length;this.items_.splice(s,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:s,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const s=this.extract_(e);s&&(s.allItems().forEach(i=>{this.cache_.delete(i)}),s.emitter.off("add",this.onSubListAdd_),s.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function Zv(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(Ln(s)&&s.value===e)return s}return null}function Jv(t){return go(t)?t.rackController.rack.bcSet_:null}let Qv=class{constructor(e){var n,s;this.emitter=new Fe,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(s=this.blade_)===null||s===void 0||s.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Xv(Jv),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var s;(s=e.parent)===null||s===void 0||s.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const s=e.item;if(s.viewProps.emitter.on("change",this.onChildViewPropsChange_),s.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),s.viewProps.handleDispose(this.onChildDispose_),Ln(s))s.value.emitter.on("change",this.onChildValueChange_);else if(go(s)){const i=s.rackController.rack;if(i){const r=i.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const s=e.item;if(Ln(s))s.value.emitter.off("change",this.onChildValueChange_);else if(go(s)){const i=s.rackController.rack;if(i){const r=i.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],s=e[e.length-1];this.bcSet_.items.forEach(i=>{const r=[];i===n&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),i===s&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),i.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=Zv(this.find(Ln),e.sender);if(!n)throw qe.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},pl=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new Qv({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let s=this.rack.children.length-1;s>=0;s--)this.rack.children[s].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&ip(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&ll(e.bladeController.view.element)}};function ws(){return new me({positions:Te([],{equals:Tf})})}let hl=class hp extends me{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},s=me.createCore(n);return new hp(s)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Se(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const s=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};jt(this,"expanded",s),jt(this,"temporaryExpanded",s)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function e0(t,e){let n=0;return gv(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),Hi(e),n=e.clientHeight,t.set("temporaryExpanded",null),Hi(e)}),n}function Ha(t,e){e.style.height=t.styleHeight}function dl(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),Se(t.get("expandedHeight"))){const n=e0(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),Hi(e)}),t.emitter.on("change",()=>{Ha(t,e)}),Ha(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let dp=class extends cl{constructor(e,n){super(e,n),this.emitter_=new Fe,this.controller.foldable.value("expanded").emitter.on("change",s=>{this.emitter_.emit("fold",new hv(this,s.sender.rawValue))}),this.rackApi_.on("change",s=>{this.emitter_.emit("change",s)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,s){return this.rackApi_.addBinding(e,n,s)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}};const mp=be("cnt");let t0=class{constructor(e,n){var s;this.className_=be((s=n.viewName)!==null&&s!==void 0?s:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),mp()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),jt(this.foldable_,"completed",vs(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),jt(n.props,"title",h=>{Se(h)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(this.className_("t")),al(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const a=e.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}},Co=class extends ul{constructor(e,n){var s;const i=hl.create((s=n.expanded)!==null&&s!==void 0?s:!0),r=new t0(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new pl({blade:n.blade,element:r.containerElement,root:n.root,viewProps:n.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,dl(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return pt(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return ht(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const n0=nt({id:"folder",type:"blade",accept(t){const e=Oe(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new Co(t.document,{blade:t.blade,expanded:t.params.expanded,props:me.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof Co?new dp(t.controller,t.pool):null}}),s0=be("");function Ga(t,e){return vs(t,s0(void 0,e))}let Kn=class fp extends me{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Rf(Te(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,s,i;const r=e??{};return new fp(me.createCore({disabled:(n=r.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(s=r.hidden)!==null&&s!==void 0?s:!1,parent:(i=r.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Yt(this.globalDisabled_,Ga(e,"disabled")),jt(this,"hidden",Ga(e,"hidden"))}bindDisabled(e){Yt(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){Yt(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const s=e.previousRawValue;s?.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const Wa=be("tbp");let i0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Wa()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Wa("c")),this.element.appendChild(s),this.containerElement=s}};const Vs=be("tbi");let r0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Vs()),n.viewProps.bindClassModifiers(this.element),jt(n.props,"selected",r=>{r?this.element.classList.add(Vs(void 0,"sel")):this.element.classList.remove(Vs(void 0,"sel"))});const s=e.createElement("button");s.classList.add(Vs("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const i=e.createElement("div");i.classList.add(Vs("t")),al(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}},o0=class{constructor(e,n){this.emitter=new Fe,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new r0(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},yo=class extends ul{constructor(e,n){const s=new i0(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new pl({blade:n.blade,element:s.containerElement,viewProps:n.viewProps}),view:s})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new o0(e,{props:n.itemProps,viewProps:Kn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,jt(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return pt(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return ht(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},l0=class extends cl{constructor(e,n){super(e,n),this.emitter_=new Fe,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",s=>{this.emitter_.emit("change",s)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,s=new yo(n,{blade:ws(),itemProps:me.fromObject({selected:!1,title:e.title}),props:me.fromObject({selected:!1}),viewProps:Kn.create()}),i=this.pool_.createApi(s);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}onSelect_(e){this.emitter_.emit("select",new dv(this,e.rawValue))}},a0=class extends cl{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,s){return this.rackApi_.addBinding(e,n,s)}addBlade(e){return this.rackApi_.addBlade(e)}};const Ya=-1;let c0=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Te(!0),this.selectedIndex=Te(Ya),this.items_=[]}add(e,n){const s=n??this.items_.length;this.items_.splice(s,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ya,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,s)=>{n.rawValue=s===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,s)=>{n.rawValue=s===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(s=>s===e.sender);this.items_.forEach((s,i)=>{s.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const Ss=be("tab");let u0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ss(),mp()),n.viewProps.bindClassModifiers(this.element),Yt(n.empty,vs(this.element,Ss(void 0,"nop")));const s=e.createElement("div");s.classList.add(Ss("t")),this.element.appendChild(s),this.itemsElement=s;const i=e.createElement("div");i.classList.add(Ss("i")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Ss("c")),this.element.appendChild(r),this.contentsElement=r}},Xa=class extends ul{constructor(e,n){const s=new c0,i=new u0(e,{empty:s.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new pl({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=s}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;ip(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;ll(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const vp=nt({id:"tab",type:"blade",accept(t){const e=Oe(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new Xa(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const s=new yo(t.document,{blade:ws(),itemProps:me.fromObject({selected:!1,title:n.title}),props:me.fromObject({selected:!1}),viewProps:Kn.create()});e.add(s)}),e},api(t){return t.controller instanceof Xa?new l0(t.controller,t.pool):t.controller instanceof yo?new a0(t.controller,t.pool):null}});function p0(t,e){const n=t.accept(e.params);if(!n)return null;const s=Oe(e.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return t.controller({blade:ws(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:s?.disabled,hidden:s?.hidden}),viewProps:Kn.create({disabled:s?.disabled,hidden:s?.hidden})})}let ml=class extends ni{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},h0=class{constructor(){this.disabled=!1,this.emitter=new Fe}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},d0=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Fe,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},mi=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,s)=>s.constrain(n),e)}};function Gi(t,e){if(t instanceof e)return t;if(t instanceof mi){const n=t.constraints.reduce((s,i)=>s||(i instanceof e?i:null),null);if(n)return n}return null}let fi=class{constructor(e){this.values=me.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}};function vi(t){var e;const n=_o;if(Array.isArray(t))return(e=Oe({items:t},s=>({items:s.required.array(s.required.object({text:s.required.string,value:s.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function fl(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function vl(t){return Se(t)?null:new fi(fl(t))}const jr=be("lst");let m0=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(jr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("select");s.classList.add(jr("s")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.selectElement=s;const i=e.createElement("div");i.classList.add(jr("m")),i.appendChild(fr(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,jt(this.props_,"options",r=>{rp(this.selectElement),r.forEach(o=>{const l=e.createElement("option");l.textContent=o.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},Cn=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new m0(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return pt(e,null,n=>({options:n.required.custom(vi)}),n=>(this.props.set("options",fl(n.options)),!0))}exportProps(){return ht(null,{options:this.props.get("options")})}};const Za=be("pop");let f0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Za()),n.viewProps.bindClassModifiers(this.element),Yt(n.shows,vs(this.element,Za(void 0,"v")))}},bp=class{constructor(e,n){this.shows=Te(!1),this.viewProps=n.viewProps,this.view=new f0(e,{shows:this.shows,viewProps:this.viewProps})}};const Ja=be("txt");let v0=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ja()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const s=e.createElement("input");s.classList.add(Ja("i")),s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},si=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new v0(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const s=e.currentTarget.value,i=this.parser_(s);Se(i)||(this.value.rawValue=i),this.view.refresh()}};function b0(t){return String(t)}function wp(t){return t==="false"?!1:!!t}function Qa(t){return b0(t)}function w0(t){return e=>t.reduce((n,s)=>n!==null?n:s(e),null)}const _0=ot(0);function Wi(t){return _0(t)+"%"}function _p(t){return String(t)}function xo(t){return t}function _s({primary:t,secondary:e,forward:n,backward:s}){let i=!1;function r(o){i||(i=!0,o(),i=!1)}t.emitter.on("change",o=>{r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{r(()=>{t.setRawValue(s(t.rawValue,e.rawValue),o.options)}),r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function rt(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function ii(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Qt(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function g0(t){return t==="ArrowUp"||t==="ArrowDown"}function gp(t){return g0(t)||t==="ArrowLeft"||t==="ArrowRight"}function Nr(t,e){var n,s;const i=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+r.left),y:t.pageY-(((s=i&&i.scrollY)!==null&&s!==void 0?s:0)+r.top)}}let Un=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Fe,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const s=this.elem_.ownerDocument;s.addEventListener("mousemove",this.onDocumentMouseMove_),s.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Nr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Nr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Nr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),s=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),s=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const s=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(s?{x:s.clientX-i.left,y:s.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const dt=be("txt");let C0=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(dt(),dt(void 0,"num")),n.arrayPosition&&this.element.classList.add(dt(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("input");s.classList.add(dt("i")),s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(dt()),this.inputElement.classList.add(dt("i"));const i=e.createElement("div");i.classList.add(dt("k")),this.element.appendChild(i),this.knobElement=i;const r=e.createElementNS(Rt,"svg");r.classList.add(dt("g")),this.knobElement.appendChild(r);const o=e.createElementNS(Rt,"path");o.classList.add(dt("gb")),r.appendChild(o),this.guideBodyElem_=o;const l=e.createElementNS(Rt,"path");l.classList.add(dt("gh")),r.appendChild(l),this.guideHeadElem_=l;const a=e.createElement("div");a.classList.add(be("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(dt(void 0,"drg"));return}this.element.classList.add(dt(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),s=n+(n>0?-1:n<0?1:0),i=Be(-s,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${s+i},0 L${s},4 L${s+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},bi=class{constructor(e,n){var s;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(s=n.sliderProps)!==null&&s!==void 0?s:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Te(null),this.view=new C0(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Un(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,s;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),r=(s=this.sliderProps_)===null||s===void 0?void 0:s.get("max");let o=e;return i!==void 0&&(o=Math.max(o,i)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(e){const s=e.currentTarget.value,i=this.parser_(s);Se(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=rt(this.props.get("keyScale"),ii(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){rt(this.props.get("keyScale"),ii(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const zr=be("sld");let y0=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(zr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(zr("t")),n.viewProps.bindTabIndex(s),this.element.appendChild(s),this.trackElement=s;const i=e.createElement("div");i.classList.add(zr("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Be(Ce(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},x0=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new y0(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Un(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Ce(Be(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=rt(this.props.get("keyScale"),Qt(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){rt(this.props.get("keyScale"),Qt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Ir=be("sldtxt");let P0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ir());const s=e.createElement("div");s.classList.add(Ir("s")),this.sliderView_=n.sliderView,s.appendChild(this.sliderView_.element),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Ir("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}},Yi=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new x0(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new bi(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new P0(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return pt(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const s=this.sliderC_.props;return s.set("max",n.max),s.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return ht(null,{max:e.get("max"),min:e.get("min")})}};function Cp(t){return{sliderProps:new me({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new me({formatter:Te(t.formatter),keyScale:t.keyScale,pointerScale:Te(t.pointerScale)})}}const E0={containerUnitSize:"cnt-usz"};function yp(t){return`--${E0[t]}`}function ri(t){return np(t)}function fn(t){if(wo(t))return Oe(t,ri)}function Gt(t,e){if(!t)return;const n=[],s=Qu(t,e);s&&n.push(s);const i=ep(t);return i&&n.push(i),new mi(n)}function k0(t){return t?t.major===bs.major:!1}function xp(t){if(t==="inline"||t==="popup")return t}function wi(t,e){t.write(e)}const Mi=be("ckb");let V0=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Mi()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("label");s.classList.add(Mi("l")),this.element.appendChild(s),this.labelElement=s;const i=e.createElement("input");i.classList.add(Mi("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(Mi("w")),this.labelElement.appendChild(r);const o=fr(e,"check");r.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},S0=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new V0(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}};function M0(t){const e=[],n=vl(t.options);return n&&e.push(n),new mi(e)}const T0=nt({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Oe(e,s=>({options:s.optional.custom(vi),readonly:s.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>wp,constraint:t=>M0(t.params),writer:t=>wi},controller:t=>{const e=t.document,n=t.value,s=t.constraint,i=s&&Gi(s,fi);return i?new Cn(e,{props:new me({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new S0(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof Cn?new ml(t.controller):null}}),Vn=be("col");let $0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Vn()),n.foldable.bindExpandedClass(this.element,Vn(void 0,"expanded")),jt(n.foldable,"completed",vs(this.element,Vn(void 0,"cpl")));const s=e.createElement("div");s.classList.add(Vn("h")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Vn("s")),s.appendChild(i),this.swatchElement=i;const r=e.createElement("div");if(r.classList.add(Vn("t")),s.appendChild(r),this.textElement=r,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Vn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};function O0(t,e,n){const s=Be(t/255,0,1),i=Be(e/255,0,1),r=Be(n/255,0,1),o=Math.max(s,i,r),l=Math.min(s,i,r),a=o-l;let h=0,p=0;const d=(l+o)/2;return a!==0&&(p=a/(1-Math.abs(o+l-1)),s===o?h=(i-r)/a:i===o?h=2+(r-s)/a:h=4+(s-i)/a,h=h/6+(h<0?1:0)),[h*360,p*100,d*100]}function L0(t,e,n){const s=(t%360+360)%360,i=Be(e/100,0,1),r=Be(n/100,0,1),o=(1-Math.abs(2*r-1))*i,l=o*(1-Math.abs(s/60%2-1)),a=r-o/2;let h,p,d;return s>=0&&s<60?[h,p,d]=[o,l,0]:s>=60&&s<120?[h,p,d]=[l,o,0]:s>=120&&s<180?[h,p,d]=[0,o,l]:s>=180&&s<240?[h,p,d]=[0,l,o]:s>=240&&s<300?[h,p,d]=[l,0,o]:[h,p,d]=[o,0,l],[(h+a)*255,(p+a)*255,(d+a)*255]}function A0(t,e,n){const s=Be(t/255,0,1),i=Be(e/255,0,1),r=Be(n/255,0,1),o=Math.max(s,i,r),l=Math.min(s,i,r),a=o-l;let h;a===0?h=0:o===s?h=60*(((i-r)/a%6+6)%6):o===i?h=60*((r-s)/a+2):h=60*((s-i)/a+4);const p=o===0?0:a/o,d=o;return[h,p*100,d*100]}function Pp(t,e,n){const s=Xu(t,360),i=Be(e/100,0,1),r=Be(n/100,0,1),o=r*i,l=o*(1-Math.abs(s/60%2-1)),a=r-o;let h,p,d;return s>=0&&s<60?[h,p,d]=[o,l,0]:s>=60&&s<120?[h,p,d]=[l,o,0]:s>=120&&s<180?[h,p,d]=[0,o,l]:s>=180&&s<240?[h,p,d]=[0,l,o]:s>=240&&s<300?[h,p,d]=[l,0,o]:[h,p,d]=[o,0,l],[(h+a)*255,(p+a)*255,(d+a)*255]}function R0(t,e,n){const s=n+e*(100-Math.abs(2*n-100))/200;return[t,s!==0?e*(100-Math.abs(2*n-100))/s:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function D0(t,e,n){const s=100-Math.abs(n*(200-e)/100-100);return[t,s!==0?e*n/s:0,n*(200-e)/(2*100)]}function Nt(t){return[t[0],t[1],t[2]]}function br(t,e){return[t[0],t[1],t[2],e]}const F0={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:R0,rgb:L0},hsv:{hsl:D0,hsv:(t,e,n)=>[t,e,n],rgb:Pp},rgb:{hsl:O0,hsv:A0,rgb:(t,e,n)=>[t,e,n]}};function hs(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function B0(t,e){return t===e?e:Xu(t,e)}function Ep(t,e,n){var s;const i=hs(e,n);return[e==="rgb"?Be(t[0],0,i[0]):B0(t[0],i[0]),Be(t[1],0,i[1]),Be(t[2],0,i[2]),Be((s=t[3])!==null&&s!==void 0?s:1,0,1)]}function ec(t,e,n,s){const i=hs(e,n),r=hs(e,s);return t.map((o,l)=>o/i[l]*r[l])}function kp(t,e,n){const s=ec(t,e.mode,e.type,"int"),i=F0[e.mode][n.mode](...s);return ec(i,n.mode,"int",n.type)}let ye=class Vp{static black(){return new Vp([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=Ep(e,n,this.type)}getComponents(e){return br(kp(Nt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const sn=be("colp");let j0=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(sn()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(sn("hsv"));const i=e.createElement("div");i.classList.add(sn("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),s.appendChild(i);const r=e.createElement("div");r.classList.add(sn("h")),this.hPaletteView_=n.hPaletteView,r.appendChild(this.hPaletteView_.element),s.appendChild(r),this.element.appendChild(s);const o=e.createElement("div");if(o.classList.add(sn("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const l=e.createElement("div");l.classList.add(sn("a"));const a=e.createElement("div");a.classList.add(sn("ap")),a.appendChild(this.alphaViews_.palette.element),l.appendChild(a);const h=e.createElement("div");h.classList.add(sn("at")),h.appendChild(this.alphaViews_.text.element),l.appendChild(h),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function N0(t){return t==="int"?"int":t==="float"?"float":void 0}function bl(t){return Oe(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(N0)}),expanded:e.optional.boolean,picker:e.optional.custom(xp),readonly:e.optional.constant(!1)}))}function Fn(t){return t?.1:1}function Sp(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let wl=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=Ep(e,n,this.type)}getComponents(e){return br(kp(Nt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const z0={int:(t,e)=>new ye(t,e),float:(t,e)=>new wl(t,e)};function _l(t,e,n){return z0[n](t,e)}function I0(t){return t.type==="float"}function K0(t){return t.type==="int"}function U0(t){const e=t.getComponents(),n=hs(t.mode,"int");return new ye([Math.round(Ce(e[0],0,1,0,n[0])),Math.round(Ce(e[1],0,1,0,n[1])),Math.round(Ce(e[2],0,1,0,n[2])),e[3]],t.mode)}function q0(t){const e=t.getComponents(),n=hs(t.mode,"int");return new wl([Ce(e[0],0,n[0],0,1),Ce(e[1],0,n[1],0,1),Ce(e[2],0,n[2],0,1),e[3]],t.mode)}function et(t,e){if(t.type===e)return t;if(K0(t)&&e==="float")return q0(t);if(I0(t)&&e==="int")return U0(t);throw qe.shouldNeverHappen()}function H0(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function bt(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const G0={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function Mp(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),s=e[2];return G0[s](n)}function Tp(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[bt(e[1],255),bt(e[2],255),bt(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function W0(t){const e=Tp(t);return e?new ye(e,"rgb"):null}function $p(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[bt(e[1],255),bt(e[2],255),bt(e[3],255),bt(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Y0(t){const e=$p(t);return e?new ye(e,"rgb"):null}function Op(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Mp(e[1]),bt(e[2],100),bt(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function X0(t){const e=Op(t);return e?new ye(e,"hsl"):null}function Lp(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Mp(e[1]),bt(e[2],100),bt(e[3],100),bt(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Z0(t){const e=Lp(t);return e?new ye(e,"hsl"):null}function Ap(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function J0(t){const e=Ap(t);return e?new ye(e,"rgb"):null}function Rp(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Ce(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Ce(parseInt(n[4],16),0,255,0,1)]:null}function Q0(t){const e=Rp(t);return e?new ye(e,"rgb"):null}function Dp(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function eb(t){return e=>{const n=Dp(e);return n?_l(n,"rgb",t):null}}function Fp(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function tb(t){return e=>{const n=Fp(e);return n?_l(n,"rgb",t):null}}const nb=[{parser:Ap,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Rp,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Tp,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:$p,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Op,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Lp,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Dp,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Fp,result:{alpha:!0,mode:"rgb",notation:"object"}}];function sb(t){return nb.reduce((e,{parser:n,result:s})=>e||(n(t)?s:null),null)}function ib(t,e="int"){const n=sb(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function _i(t){const e=[J0,Q0,W0,Y0,X0,Z0];e.push(eb("int"),tb("int"));const n=w0(e);return s=>{const i=n(s);return i?et(i,t):null}}function rb(t){const e=_i("int");if(typeof t!="string")return ye.black();const n=e(t);return n??ye.black()}function Bp(t){const e=Be(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function gl(t,e="#"){const n=Nt(t.getComponents("rgb")).map(Bp).join("");return`${e}${n}`}function Cl(t,e="#"){const n=t.getComponents("rgb"),s=[n[0],n[1],n[2],n[3]*255].map(Bp).join("");return`${e}${s}`}function jp(t){const e=ot(0),n=et(t,"int");return`rgb(${Nt(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function Ri(t){const e=ot(2),n=ot(0);return`rgba(${et(t,"int").getComponents("rgb").map((r,o)=>(o===3?e:n)(r)).join(", ")})`}function ob(t){const e=[ot(0),Wi,Wi],n=et(t,"int");return`hsl(${Nt(n.getComponents("hsl")).map((i,r)=>e[r](i)).join(", ")})`}function lb(t){const e=[ot(0),Wi,Wi,ot(2)];return`hsla(${et(t,"int").getComponents("hsl").map((i,r)=>e[r](i)).join(", ")})`}function Np(t,e){const n=ot(e==="float"?2:0),s=["r","g","b"],i=et(t,e);return`{${Nt(i.getComponents("rgb")).map((o,l)=>`${s[l]}: ${n(o)}`).join(", ")}}`}function ab(t){return e=>Np(e,t)}function zp(t,e){const n=ot(2),s=ot(e==="float"?2:0),i=["r","g","b","a"];return`{${et(t,e).getComponents("rgb").map((l,a)=>{const h=a===3?n:s;return`${i[a]}: ${h(l)}`}).join(", ")}}`}function cb(t){return e=>zp(e,t)}const ub=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:gl},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Cl},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:jp},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Ri},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:ob},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:lb},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:ab(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:cb(e)}],[])];function Ip(t){return ub.reduce((e,n)=>e||(H0(n.format,t)?n.stringifier:null),null)}const Ms=be("apl");let pb=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Ms()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(Ms("b")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Ms("c")),s.appendChild(i),this.colorElem_=i;const r=e.createElement("div");r.classList.add(Ms("m")),this.element.appendChild(r),this.markerElem_=r;const o=e.createElement("div");o.classList.add(Ms("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),s=new ye([n[0],n[1],n[2],0],"rgb"),i=new ye([n[0],n[1],n[2],255],"rgb"),r=["to right",Ri(s),Ri(i)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Ri(e);const o=Ce(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}},hb=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new pb(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Un(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=e.point.x/e.bounds.width,i=this.value.rawValue,[r,o,l]=i.getComponents("hsv");this.value.setRawValue(new ye([r,o,l,s],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=rt(Fn(!0),Qt(e));if(n===0)return;const s=this.value.rawValue,[i,r,o,l]=s.getComponents("hsv");this.value.setRawValue(new ye([i,r,o,l+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){rt(Fn(!0),Qt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Yn=be("coltxt");function db(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((s,i)=>{const r=t.createElement("option");return r.textContent=i.text,r.value=i.value,s.appendChild(r),s},t.createDocumentFragment())),e}let mb=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Yn()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Yn("m")),this.modeElem_=db(e),this.modeElem_.classList.add(Yn("ms")),s.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(Yn("mm")),i.appendChild(fr(e,"dropdown")),s.appendChild(i),this.element.appendChild(s);const r=e.createElement("div");r.classList.add(Yn("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=n.inputViews,this.applyInputViews_(),Yt(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){rp(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const s=e.createElement("div");s.classList.add(Yn("c")),s.appendChild(n.element),this.inputsElem_.appendChild(s)})}};function fb(t){return ot(t==="float"?2:0)}function vb(t,e,n){const s=hs(t,e)[n];return new hi({min:0,max:s})}function bb(t,e,n){return new bi(t,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:e.parser,props:me.fromObject({formatter:fb(e.colorType),keyScale:Fn(!1),pointerScale:e.colorType==="float"?.01:1}),value:Te(0,{constraint:vb(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function wb(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Jt,viewProps:e.viewProps};return[0,1,2].map(s=>{const i=bb(t,n,s);return _s({primary:e.value,secondary:i.value,forward(r){return et(r,e.colorType).getComponents(e.colorMode)[s]},backward(r,o){const l=e.colorMode,h=et(r,e.colorType).getComponents(l);h[s]=o;const p=_l(br(Nt(h),h[3]),l,e.colorType);return et(p,"int")}}),i})}function _b(t,e){const n=new si(t,{parser:_i("int"),props:me.fromObject({formatter:gl}),value:Te(ye.black()),viewProps:e.viewProps});return _s({primary:e.value,secondary:n.value,forward:s=>new ye(Nt(s.getComponents()),s.mode),backward:(s,i)=>new ye(br(Nt(i.getComponents(s.mode)),s.getComponents()[3]),s.mode)}),[n]}function gb(t){return t!=="hex"}let Cb=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Te(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new mb(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return gb(n)?wb(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):_b(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(s=>s.view)}};const Kr=be("hpl");let yb=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Kr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(Kr("c")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Kr("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=jp(new ye([n,100,100],"hsv"));const s=Ce(n,0,360,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}},xb=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new yb(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Un(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=Ce(Be(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,r,o,l]=i.getComponents("hsv");this.value.setRawValue(new ye([s,r,o,l],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=rt(Fn(!1),Qt(e));if(n===0)return;const s=this.value.rawValue,[i,r,o,l]=s.getComponents("hsv");this.value.setRawValue(new ye([i+n,r,o,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){rt(Fn(!1),Qt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Ur=be("svp"),tc=64;let Pb=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Ur()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("canvas");s.height=tc,s.width=tc,s.classList.add(Ur("c")),this.element.appendChild(s),this.canvasElement=s;const i=e.createElement("div");i.classList.add(Ur("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=xv(this.canvasElement);if(!e)return;const s=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,r=this.canvasElement.height,o=e.getImageData(0,0,i,r),l=o.data;for(let p=0;p<r;p++)for(let d=0;d<i;d++){const L=Ce(d,0,i,0,100),H=Ce(p,0,r,100,0),F=Pp(s[0],L,H),j=(p*i+d)*4;l[j]=F[0],l[j+1]=F[1],l[j+2]=F[2],l[j+3]=255}e.putImageData(o,0,0);const a=Ce(s[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const h=Ce(s[2],0,100,100,0);this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}},Eb=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Pb(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Un(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=Ce(e.point.x,0,e.bounds.width,0,100),i=Ce(e.point.y,0,e.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new ye([r,s,i,o],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){gp(e.key)&&e.preventDefault();const[n,s,i,r]=this.value.rawValue.getComponents("hsv"),o=Fn(!1),l=rt(o,Qt(e)),a=rt(o,ii(e));l===0&&a===0||this.value.setRawValue(new ye([n,s+l,i+a,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Fn(!1),s=rt(n,Qt(e)),i=rt(n,ii(e));s===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},kb=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new xb(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Eb(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new hb(e,{value:this.value,viewProps:this.viewProps}),text:new bi(e,{parser:Jt,props:me.fromObject({pointerScale:.01,keyScale:.1,formatter:ot(2)}),value:Te(0,{constraint:new hi({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&_s({primary:this.value,secondary:this.alphaIcs_.text.value,forward:s=>s.getComponents()[3],backward:(s,i)=>{const r=s.getComponents();return r[3]=i,new ye(r,s.mode)}}),this.textsC_=new Cb(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new j0(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const qr=be("colsw");let Vb=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(qr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(qr("sw")),this.element.appendChild(s),this.swatchElem_=s;const i=e.createElement("button");i.classList.add(qr("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=Cl(e)}onValueChange_(){this.update_()}},Sb=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Vb(e,{value:this.value,viewProps:this.viewProps})}},yl=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=hl.create(n.expanded),this.swatchC_=new Sb(e,{value:this.value,viewProps:this.viewProps});const s=this.swatchC_.view.buttonElement;s.addEventListener("blur",this.onButtonBlur_),s.addEventListener("click",this.onButtonClick_),this.textC_=new si(e,{parser:n.parser,props:me.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new $0(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new bp(e,{viewProps:this.viewProps}):null;const i=new kb(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),_s({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dl(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,s=e.relatedTarget;(!s||!n.contains(s))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=op(e);s&&n.contains(s)||s&&s===this.swatchC_.view.buttonElement&&!ol(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function Mb(t){return Nt(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function Tb(t){return t.getComponents("rgb").reduce((e,n,s)=>{const i=Math.floor(s===3?n*255:n)&255;return e<<8|i},0)>>>0}function $b(t){return new ye([t>>16&255,t>>8&255,t&255],"rgb")}function Ob(t){return new ye([t>>24&255,t>>16&255,t>>8&255,Ce(t&255,0,255,0,1)],"rgb")}function Lb(t){return typeof t!="number"?ye.black():$b(t)}function Ab(t){return typeof t!="number"?ye.black():Ob(t)}function Di(t,e){return typeof t!="object"||Se(t)?!1:e in t&&typeof t[e]=="number"}function Kp(t){return Di(t,"r")&&Di(t,"g")&&Di(t,"b")}function Up(t){return Kp(t)&&Di(t,"a")}function qp(t){return Kp(t)}function xl(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),s=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==s[i])return!1;return!0}function nc(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function Rb(t){const e=Ip(t);return e?(n,s)=>{wi(n,e(s))}:null}function Db(t){const e=t?Tb:Mb;return(n,s)=>{wi(n,e(s))}}function Fb(t,e,n){const i=et(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function Bb(t,e,n){const i=et(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function jb(t,e){return(n,s)=>{t?Fb(n,s,e):Bb(n,s,e)}}function Nb(t){var e;return!!(!((e=t?.color)===null||e===void 0)&&e.alpha)}function zb(t){return t?e=>Cl(e,"0x"):e=>gl(e,"0x")}function Ib(t){return"color"in t||t.view==="color"}const Kb=nt({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!Ib(e))return null;const n=bl(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:Nb(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?Ab:Lb,equals:xl,writer:t=>Db(t.params.supportsAlpha)},controller:t=>{var e,n;return new yl(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:zb(t.params.supportsAlpha),parser:_i("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Ub(t,e){if(!qp(t))return et(ye.black(),e);if(e==="int"){const n=nc(t);return new ye(n,"rgb")}if(e==="float"){const n=nc(t);return new wl(n,"rgb")}return et(ye.black(),"int")}function qb(t){return Up(t)}function Hb(t){return e=>{const n=Ub(e,t);return et(n,"int")}}function Gb(t,e){return n=>t?zp(n,e):Np(n,e)}const Wb=nt({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!qp(t))return null;const s=bl(e);return s?{initialValue:t,params:Object.assign(Object.assign({},s),{colorType:(n=Sp(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>Hb(t.params.colorType),equals:xl,writer:t=>jb(qb(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const s=Up(t.initialValue);return new yl(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:Gb(s,t.params.colorType),parser:_i("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s,value:t.value,viewProps:t.viewProps})}}),Yb=nt({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=ib(t,Sp(e));if(!n)return null;const s=Ip(n);if(!s)return null;const i=bl(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:s})}:null},binding:{reader:()=>rb,equals:xl,writer:t=>{const e=Rb(t.params.format);if(!e)throw qe.notBindable();return e}},controller:t=>{var e,n;return new yl(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:_i("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let Pl=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((s,i)=>{var r,o;return(o=(r=this.components[i])===null||r===void 0?void 0:r.constrain(s))!==null&&o!==void 0?o:s});return this.asm_.fromComponents(n)}};const sc=be("pndtxt");let Xb=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(sc()),this.textViews.forEach(s=>{const i=e.createElement("div");i.classList.add(sc("a")),i.appendChild(s.element),this.element.appendChild(i)})}};function Zb(t,e,n){return new bi(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Te(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let El=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((s,i)=>Zb(e,n,i)),this.acs_.forEach((s,i)=>{_s({primary:this.value,secondary:s.value,forward:r=>n.assembly.toComponents(r)[i],backward:(r,o)=>{const l=n.assembly.toComponents(r);return l[i]=o,n.assembly.fromComponents(l)}})}),this.view=new Xb(e,{textViews:this.acs_.map(s=>s.view)})}get textControllers(){return this.acs_}},Jb=class extends ni{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function Qb(t,e){const n=[],s=Qu(t,e);s&&n.push(s);const i=ep(t);i&&n.push(i);const r=vl(t.options);return r&&n.push(r),new mi(n)}const ew=nt({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Oe(e,s=>Object.assign(Object.assign({},np(s)),{options:s.optional.custom(vi),readonly:s.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Yu,constraint:t=>Qb(t.params,t.initialValue),writer:t=>wi},controller:t=>{const e=t.value,n=t.constraint,s=n&&Gi(n,fi);if(s)return new Cn(t.document,{props:new me({options:s.values.value("options")}),value:e,viewProps:t.viewProps});const i=tp(t.params,e.rawValue),r=n&&Gi(n,hi);return r?new Yi(t.document,Object.assign(Object.assign({},Cp(Object.assign(Object.assign({},i),{keyScale:Te(i.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:Jt,value:e,viewProps:t.viewProps})):new bi(t.document,{parser:Jt,props:me.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof Yi?new Jb(t.controller):t.controller.valueController instanceof Cn?new ml(t.controller):null}});let wn=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Se(e))return!1;const n=e.x,s=e.y;return!(typeof n!="number"||typeof s!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const Hp={toComponents:t=>t.getComponents(),fromComponents:t=>new wn(...t)},Xn=be("p2d");let tw=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Xn()),n.viewProps.bindClassModifiers(this.element),Yt(n.expanded,vs(this.element,Xn(void 0,"expanded")));const s=e.createElement("div");s.classList.add(Xn("h")),this.element.appendChild(s);const i=e.createElement("button");i.classList.add(Xn("b")),i.appendChild(fr(e,"p2dpad")),n.viewProps.bindDisabled(i),s.appendChild(i),this.buttonElement=i;const r=e.createElement("div");if(r.classList.add(Xn("t")),s.appendChild(r),this.textElement=r,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Xn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};const rn=be("p2dp");let nw=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(rn()),n.layout==="popup"&&this.element.classList.add(rn(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(rn("p")),n.viewProps.bindTabIndex(s),this.element.appendChild(s),this.padElement=s;const i=e.createElementNS(Rt,"svg");i.classList.add(rn("g")),this.padElement.appendChild(i),this.svgElem_=i;const r=e.createElementNS(Rt,"line");r.classList.add(rn("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=e.createElementNS(Rt,"line");o.classList.add(rn("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const l=e.createElementNS(Rt,"line");l.classList.add(rn("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const a=e.createElement("div");a.classList.add(rn("m")),this.padElement.appendChild(a),this.markerElem_=a,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),s=this.props_.get("max"),i=Ce(e,-s,+s,0,100),r=Ce(n,-s,+s,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function ic(t,e,n){return[rt(e[0],Qt(t)),rt(e[1],ii(t))*(n?1:-1)]}let sw=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new nw(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Un(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=this.props.get("max"),i=Ce(e.point.x,0,e.bounds.width,-s,+s),r=Ce(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-s,+s);this.value.setRawValue(new wn(i,r),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){gp(e.key)&&e.preventDefault();const[n,s]=ic(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&s===0||this.value.setRawValue(new wn(this.value.rawValue.x+n,this.value.rawValue.y+s),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,s]=ic(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},iw=class{constructor(e,n){var s,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=hl.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new bp(e,{viewProps:this.viewProps}):null;const r=new sw(e,{layout:n.pickerLayout,props:new me({invertsY:Te(n.invertsY),max:Te(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new El(e,{assembly:Hp,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new tw(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),_s({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dl(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,s=e.relatedTarget;(!s||!n.contains(s))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=op(e);s&&n.contains(s)||s&&s===this.view.buttonElement&&!ol(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function rw(t){return wn.isObject(t)?new wn(t.x,t.y):new wn}function ow(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function lw(t,e){return new Pl({assembly:Hp,components:[Gt(Object.assign(Object.assign({},t),t.x),e.x),Gt(Object.assign(Object.assign({},t),t.y),e.y)]})}function rc(t,e){var n,s;if(!Se(t.min)||!Se(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((s=t.max)!==null&&s!==void 0?s:0));const i=Zu(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function aw(t,e){var n,s;const i=rc(Rn(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),r=rc(Rn(t,(s=t.y)!==null&&s!==void 0?s:{}),e.y);return Math.max(i,r)}function cw(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const uw=nt({id:"input-point2d",type:"input",accept:(t,e)=>{if(!wn.isObject(t))return null;const n=Oe(e,s=>Object.assign(Object.assign({},ri(s)),{expanded:s.optional.boolean,picker:s.optional.custom(xp),readonly:s.optional.constant(!1),x:s.optional.custom(fn),y:s.optional.object(Object.assign(Object.assign({},ri(s)),{inverted:s.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>rw,constraint:t=>lw(t.params,t.initialValue),equals:wn.equals,writer:()=>ow},controller:t=>{var e,n;const s=t.document,i=t.value,r=t.constraint,o=[t.params.x,t.params.y];return new iw(s,{axes:i.rawValue.getComponents().map((l,a)=>{var h;return rl({constraint:r.components[a],initialValue:l,params:Rn(t.params,(h=o[a])!==null&&h!==void 0?h:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:cw(t.params),max:aw(t.params,i.rawValue),parser:Jt,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});let os=class{constructor(e=0,n=0,s=0){this.x=e,this.y=n,this.z=s}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Se(e))return!1;const n=e.x,s=e.y,i=e.z;return!(typeof n!="number"||typeof s!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const Gp={toComponents:t=>t.getComponents(),fromComponents:t=>new os(...t)};function pw(t){return os.isObject(t)?new os(t.x,t.y,t.z):new os}function hw(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function dw(t,e){return new Pl({assembly:Gp,components:[Gt(Object.assign(Object.assign({},t),t.x),e.x),Gt(Object.assign(Object.assign({},t),t.y),e.y),Gt(Object.assign(Object.assign({},t),t.z),e.z)]})}const mw=nt({id:"input-point3d",type:"input",accept:(t,e)=>{if(!os.isObject(t))return null;const n=Oe(e,s=>Object.assign(Object.assign({},ri(s)),{readonly:s.optional.constant(!1),x:s.optional.custom(fn),y:s.optional.custom(fn),z:s.optional.custom(fn)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>pw,constraint:t=>dw(t.params,t.initialValue),equals:os.equals,writer:t=>hw},controller:t=>{const e=t.value,n=t.constraint,s=[t.params.x,t.params.y,t.params.z];return new El(t.document,{assembly:Gp,axes:e.rawValue.getComponents().map((i,r)=>{var o;return rl({constraint:n.components[r],initialValue:i,params:Rn(t.params,(o=s[r])!==null&&o!==void 0?o:{})})}),parser:Jt,value:e,viewProps:t.viewProps})}});let ls=class{constructor(e=0,n=0,s=0,i=0){this.x=e,this.y=n,this.z=s,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Se(e))return!1;const n=e.x,s=e.y,i=e.z,r=e.w;return!(typeof n!="number"||typeof s!="number"||typeof i!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const Wp={toComponents:t=>t.getComponents(),fromComponents:t=>new ls(...t)};function fw(t){return ls.isObject(t)?new ls(t.x,t.y,t.z,t.w):new ls}function vw(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function bw(t,e){return new Pl({assembly:Wp,components:[Gt(Object.assign(Object.assign({},t),t.x),e.x),Gt(Object.assign(Object.assign({},t),t.y),e.y),Gt(Object.assign(Object.assign({},t),t.z),e.z),Gt(Object.assign(Object.assign({},t),t.w),e.w)]})}const ww=nt({id:"input-point4d",type:"input",accept:(t,e)=>{if(!ls.isObject(t))return null;const n=Oe(e,s=>Object.assign(Object.assign({},ri(s)),{readonly:s.optional.constant(!1),w:s.optional.custom(fn),x:s.optional.custom(fn),y:s.optional.custom(fn),z:s.optional.custom(fn)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>fw,constraint:t=>bw(t.params,t.initialValue),equals:ls.equals,writer:t=>vw},controller:t=>{const e=t.value,n=t.constraint,s=[t.params.x,t.params.y,t.params.z,t.params.w];return new El(t.document,{assembly:Wp,axes:e.rawValue.getComponents().map((i,r)=>{var o;return rl({constraint:n.components[r],initialValue:i,params:Rn(t.params,(o=s[r])!==null&&o!==void 0?o:{})})}),parser:Jt,value:e,viewProps:t.viewProps})}});function _w(t){const e=[],n=vl(t.options);return n&&e.push(n),new mi(e)}const gw=nt({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Oe(e,s=>({readonly:s.optional.constant(!1),options:s.optional.custom(vi)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>_p,constraint:t=>_w(t.params),writer:t=>wi},controller:t=>{const e=t.document,n=t.value,s=t.constraint,i=s&&Gi(s,fi);return i?new Cn(e,{props:new me({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new si(e,{parser:r=>r,props:me.fromObject({formatter:xo}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof Cn?new ml(t.controller):null}}),gi={monitor:{defaultInterval:200,defaultRows:3}},oc=be("mll");let Cw=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(oc()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("textarea");s.classList.add(oc("i")),s.style.height=`calc(var(${yp("containerUnitSize")}) * ${n.rows})`,s.readOnly=!0,n.viewProps.bindDisabled(s),this.element.appendChild(s),this.textareaElem_=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,s=[];this.value.rawValue.forEach(i=>{i!==void 0&&s.push(this.formatter_(i))}),e.textContent=s.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},kl=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Cw(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const lc=be("sgl");let yw=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(lc()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("input");s.classList.add(lc("i")),s.readOnly=!0,s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},Vl=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new yw(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const xw=nt({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Oe(e,s=>({readonly:s.required.constant(!0),rows:s.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>wp},controller:t=>{var e;return t.value.rawValue.length===1?new Vl(t.document,{formatter:Qa,value:t.value,viewProps:t.viewProps}):new kl(t.document,{formatter:Qa,rows:(e=t.params.rows)!==null&&e!==void 0?e:gi.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let Pw=class extends ni{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const on=be("grl");let Ew=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(on()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const s=e.createElementNS(Rt,"svg");s.classList.add(on("g")),s.style.height=`calc(var(${yp("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(s),this.svgElem_=s;const i=e.createElementNS(Rt,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const r=e.createElement("div");r.classList.add(on("t"),be("tt")()),this.element.appendChild(r),this.tooltipElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:n}=this.element,s=this.value.rawValue.length-1,i=this.props_.get("min"),r=this.props_.get("max"),o=[];this.value.rawValue.forEach((d,L)=>{if(d===void 0)return;const H=Ce(L,0,s,0,e),F=Ce(d,i,r,n,0);o.push([H,F].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const l=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){l.classList.remove(on("t","a"));return}const h=Ce(this.cursor_.rawValue,0,s,0,e),p=Ce(a,i,r,n,0);l.style.left=`${h}px`,l.style.top=`${p}px`,l.textContent=`${this.formatter_(a)}`,l.classList.contains(on("t","a"))||(l.classList.add(on("t","a"),on("t","in")),Hi(l),l.classList.remove(on("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},Yp=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Te(-1),this.view=new Ew(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!ol(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const s=new Un(this.view.element);s.emitter.on("down",this.onGraphPointerDown_),s.emitter.on("move",this.onGraphPointerMove_),s.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return pt(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return ht(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(Ce(e.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Ce(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function Po(t){return Se(t.format)?ot(2):t.format}function kw(t){var e;return t.value.rawValue.length===1?new Vl(t.document,{formatter:Po(t.params),value:t.value,viewProps:t.viewProps}):new kl(t.document,{formatter:Po(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:gi.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function Vw(t){var e,n,s;return new Yp(t.document,{formatter:Po(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:gi.monitor.defaultRows,props:me.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(s=t.params.min)!==null&&s!==void 0?s:0}),value:t.value,viewProps:t.viewProps})}function ac(t){return t.view==="graph"}const Sw=nt({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Oe(e,s=>({format:s.optional.function,max:s.optional.number,min:s.optional.number,readonly:s.required.constant(!0),rows:s.optional.number,view:s.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>ac(t)?64:1,reader:t=>Yu},controller:t=>ac(t.params)?Vw(t):kw(t),api:t=>t.controller.valueController instanceof Yp?new Pw(t.controller):null}),Mw=nt({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Oe(e,s=>({multiline:s.optional.boolean,readonly:s.required.constant(!0),rows:s.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>_p},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new kl(t.document,{formatter:xo,rows:(e=t.params.rows)!==null&&e!==void 0?e:gi.monitor.defaultRows,value:n,viewProps:t.viewProps}):new Vl(t.document,{formatter:xo,value:n,viewProps:t.viewProps})}});class Tw{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class $w{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function Ow(t,e){var n;const s=t.accept(e.target.read(),e.params);if(Se(s))return null;const i={target:e.target,initialValue:s.initialValue,params:s.params},r=Oe(e.params,d=>({disabled:d.optional.boolean,hidden:d.optional.boolean,label:d.optional.string,tag:d.optional.string})),o=t.binding.reader(i),l=t.binding.constraint?t.binding.constraint(i):void 0,a=new $w({reader:o,target:e.target,writer:t.binding.writer(i)}),h=new fv(Te(o(s.initialValue),{constraint:l,equals:t.binding.equals}),a),p=t.controller({constraint:l,document:e.document,initialValue:s.initialValue,params:s.params,value:h,viewProps:Kn.create({disabled:r?.disabled,hidden:r?.hidden})});return new Tv(e.document,{blade:ws(),props:me.fromObject({label:"label"in e.params?(n=r?.label)!==null&&n!==void 0?n:null:e.target.key}),tag:r?.tag,value:h,valueController:p})}class Lw{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function Aw(t,e){return e===0?new h0:new d0(t,e??gi.monitor.defaultInterval)}function Rw(t,e){var n,s,i;const r=t.accept(e.target.read(),e.params);if(Se(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},l=Oe(e.params,L=>({bufferSize:L.optional.number,disabled:L.optional.boolean,hidden:L.optional.boolean,interval:L.optional.number,label:L.optional.string})),a=t.binding.reader(o),h=(s=(n=l?.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(r.params))!==null&&s!==void 0?s:1,p=new Rv({binding:new Lw({reader:a,target:e.target}),bufferSize:h,ticker:Aw(e.document,l?.interval)}),d=t.controller({document:e.document,params:r.params,value:p,viewProps:Kn.create({disabled:l?.disabled,hidden:l?.hidden})});return d.viewProps.bindDisabled(p.ticker),d.viewProps.handleDispose(()=>{p.ticker.dispose()}),new Fv(e.document,{blade:ws(),props:me.fromObject({label:"label"in e.params?(i=l?.label)!==null&&i!==void 0?i:null:e.target.key}),value:p,valueController:d})}class Dw{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!k0(n.core))throw qe.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,s){return this.pluginsMap_.inputs.reduce((i,r)=>i??Ow(r,{document:e,target:n,params:s}),null)}createMonitor_(e,n,s){return this.pluginsMap_.monitors.reduce((i,r)=>i??Rw(r,{document:e,params:s,target:n}),null)}createBinding(e,n,s){const i=n.read();if(Se(i))throw new qe({context:{key:n.key},type:"nomatchingcontroller"});const r=this.createInput_(e,n,s);if(r)return r;const o=this.createMonitor_(e,n,s);if(o)return o;throw new qe({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const s=this.pluginsMap_.blades.reduce((i,r)=>i??p0(r,{document:e,params:n}),null);if(!s)throw new qe({type:"nomatchingview",context:{params:n}});return s}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((s,i)=>{var r,o;return s||((o=(r=i.api)===null||r===void 0?void 0:r.call(i,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,n??new ni(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((s,i)=>{var r,o;return s||((o=(r=i.api)===null||r===void 0?void 0:r.call(i,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,n??new ni(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if($v(e))return this.createInputBindingApi_(e);if(Bv(e))return this.createMonitorBindingApi_(e);throw qe.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Mv(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((s,i)=>s??i.api({controller:e,pool:this}),null);if(!n)throw qe.shouldNeverHappen();return this.apiCache_.add(e,n)}}const Fw=new Tw;function Bw(){const t=new Dw(Fw);return[uw,mw,ww,gw,ew,Yb,Wb,Kb,T0,xw,Mw,Sw,Kv,n0,vp].forEach(e=>{t.register("core",e)}),t}class jw extends In{constructor(e){super(e),this.emitter_=new Fe,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new di(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}class Nw extends In{}class zw extends In{constructor(e){super(e),this.emitter_=new Fe,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new di(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}class Iw extends In{constructor(e){super(e),this.emitter_=new Fe,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new di(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}const Kw=function(){return{id:"list",type:"blade",core:bs,accept(t){const e=Oe(t,n=>({options:n.required.custom(vi),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new fi(fl(t.params.options)),n=Te(t.params.value,{constraint:e}),s=new Cn(t.document,{props:new me({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Dn(t.document,{blade:t.blade,props:me.fromObject({label:t.params.label}),value:n,valueController:s})},api(t){return!(t.controller instanceof Dn)||!(t.controller.valueController instanceof Cn)?null:new jw(t.controller)}}}();class Uw extends dp{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class qw extends Co{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const cc=be("spr");class Hw{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(cc()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("hr");s.classList.add(cc("r")),this.element.appendChild(s)}}class uc extends vr{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new Hw(e,{viewProps:n.viewProps})}))}}const Gw={id:"separator",type:"blade",core:bs,accept(t){const e=Oe(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new uc(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof uc?new Nw(t.controller):null}},Ww={id:"slider",type:"blade",core:bs,accept(t){const e=Oe(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const s=(e=t.params.value)!==null&&e!==void 0?e:0,i=new hi({max:t.params.max,min:t.params.min}),r=Te(s,{constraint:i}),o=new Yi(t.document,Object.assign(Object.assign({},Cp({formatter:(n=t.params.format)!==null&&n!==void 0?n:uv,keyScale:Te(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:Ju(t.params,s)})),{parser:Jt,value:r,viewProps:t.viewProps}));return new Dn(t.document,{blade:t.blade,props:me.fromObject({label:t.params.label}),value:r,valueController:o})},api(t){return!(t.controller instanceof Dn)||!(t.controller.valueController instanceof Yi)?null:new zw(t.controller)}},Yw=function(){return{id:"text",type:"blade",core:bs,accept(t){const e=Oe(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=Te(t.params.value),s=new si(t.document,{parser:t.params.parse,props:me.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:i=>String(i)}),value:n,viewProps:t.viewProps});return new Dn(t.document,{blade:t.blade,props:me.fromObject({label:t.params.label}),value:n,valueController:s})},api(t){return!(t.controller instanceof Dn)||!(t.controller.valueController instanceof si)?null:new Iw(t.controller)}}}();function Xw(t){const e=t.createElement("div");return e.classList.add(be("dfw")()),t.body&&t.body.appendChild(e),e}function Zw(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const s=t.createElement("style");s.dataset.tpStyle=e,s.textContent=n,t.head.appendChild(s)}class Jw extends Uw{constructor(e){var n,s;const i=e??{},r=(n=i.document)!==null&&n!==void 0?n:yv(),o=Bw(),l=new qw(r,{expanded:i.expanded,blade:ws(),props:me.fromObject({title:i.title}),viewProps:Kn.create()});super(l,o),this.pool_=o,this.containerElem_=(s=i.container)!==null&&s!==void 0?s:Xw(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw qe.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw qe.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&Zw(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(s=>{this.pool_.register(e.id,s)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Kw,Gw,Ww,vp,Yw]})}}new pp("4.0.5");function Me(t){return t==null}function Sl(t){return t!==null&&typeof t=="object"}function Eo(t){return t!==null&&typeof t=="object"}function Qw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Bn(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((s,i)=>{const r=t[i],o=e[i];return Eo(r)&&Eo(o)?Object.assign(Object.assign({},s),{[i]:Bn(r,o)}):Object.assign(Object.assign({},s),{[i]:i in e?o:r})},{})}function e_(t){return Sl(t)?"target"in t:!1}const t_={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Qe{static alreadyDisposed(){return new Qe({type:"alreadydisposed"})}static notBindable(){return new Qe({type:"notbindable"})}static notCompatible(e,n){return new Qe({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new Qe({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Qe({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=t_[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class Xi{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const s=this.read();if(!Xi.isBindable(s))throw Qe.notBindable();if(!(e in s))throw Qe.propertyNotFound(e);s[e]=n}}class Ye{constructor(){this.observers_={}}on(e,n){let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:n}),this}off(e,n){const s=this.observers_[e];return s&&(this.observers_[e]=s.filter(i=>i.handler!==n)),this}emit(e,n){const s=this.observers_[e];s&&s.forEach(i=>{i.handler(n)})}}class n_{constructor(e,n){var s;this.constraint_=n?.constraint,this.equals_=(s=n?.equals)!==null&&s!==void 0?s:(i,r)=>i===r,this.emitter=new Ye,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const s=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,i)&&!s.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:s,previousRawValue:r,rawValue:i,sender:this}))}}class s_{constructor(e){this.emitter=new Ye,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const s=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!s.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:s,previousRawValue:i,rawValue:this.value_,sender:this}))}}class i_{constructor(e){this.emitter=new Ye,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Le(t,e){const n=e?.constraint,s=e?.equals;return!n&&!s?new s_(t):new n_(t,e)}function r_(t){return[new i_(t),(e,n)=>{t.setRawValue(e,n)}]}class ue{constructor(e){this.emitter=new Ye,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((s,i)=>Object.assign(s,{[i]:Le(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new ue(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class Ci{constructor(e){this.values=ue.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),s=this.values.get("min");return Math.min(Math.max(e,s),n)}}class Ml{constructor(e){this.values=ue.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),s=this.values.get("min");let i=e;return Me(s)||(i=Math.max(i,s)),Me(n)||(i=Math.min(i,n)),i}}class o_{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,s=Math.round((e-n)/this.step);return n+s*this.step}}class l_{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const a_={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class c_{constructor(e,n,s){this.left=n,this.operator=e,this.right=s}evaluate(){const e=a_[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const u_={"+":t=>t,"-":t=>-t,"~":t=>~t};class p_{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=u_[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Tl(t){return(e,n)=>{for(let s=0;s<t.length;s++){const i=t[s](e,n);if(i!=="")return i}return""}}function oi(t,e){var n;const s=t.substr(e).match(/^\s+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function h_(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function li(t,e){var n;const s=t.substr(e).match(/^[0-9]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function d_(t,e){const n=li(t,e);if(n!=="")return n;const s=t.substr(e,1);if(e+=1,s!=="-"&&s!=="+")return"";const i=li(t,e);return i===""?"":s+i}function $l(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const s=d_(t,e);return s===""?"":n+s}function Xp(t,e){const n=t.substr(e,1);if(n==="0")return n;const s=h_(t,e);return e+=s.length,s===""?"":s+li(t,e)}function m_(t,e){const n=Xp(t,e);if(e+=n.length,n==="")return"";const s=t.substr(e,1);if(e+=s.length,s!==".")return"";const i=li(t,e);return e+=i.length,n+s+i+$l(t,e)}function f_(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const s=li(t,e);return e+=s.length,s===""?"":n+s+$l(t,e)}function v_(t,e){const n=Xp(t,e);return e+=n.length,n===""?"":n+$l(t,e)}const b_=Tl([m_,f_,v_]);function w_(t,e){var n;const s=t.substr(e).match(/^[01]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function __(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const s=w_(t,e);return s===""?"":n+s}function g_(t,e){var n;const s=t.substr(e).match(/^[0-7]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function C_(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const s=g_(t,e);return s===""?"":n+s}function y_(t,e){var n;const s=t.substr(e).match(/^[0-9a-f]+/i);return(n=s&&s[0])!==null&&n!==void 0?n:""}function x_(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const s=y_(t,e);return s===""?"":n+s}const P_=Tl([__,C_,x_]),E_=Tl([P_,b_]);function k_(t,e){const n=E_(t,e);return e+=n.length,n===""?null:{evaluable:new l_(n),cursor:e}}function V_(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const s=Jp(t,e);if(!s)return null;e=s.cursor,e+=oi(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:s.evaluable,cursor:e}}function S_(t,e){var n;return(n=k_(t,e))!==null&&n!==void 0?n:V_(t,e)}function Zp(t,e){const n=S_(t,e);if(n)return n;const s=t.substr(e,1);if(e+=s.length,s!=="+"&&s!=="-"&&s!=="~")return null;const i=Zp(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new p_(s,i.evaluable)}):null}function M_(t,e,n){n+=oi(e,n).length;const s=t.filter(i=>e.startsWith(i,n))[0];return s?(n+=s.length,n+=oi(e,n).length,{cursor:n,operator:s}):null}function T_(t,e){return(n,s)=>{const i=t(n,s);if(!i)return null;s=i.cursor;let r=i.evaluable;for(;;){const o=M_(e,n,s);if(!o)break;s=o.cursor;const l=t(n,s);if(!l)return null;s=l.cursor,r=new c_(o.operator,r,l.evaluable)}return r?{cursor:s,evaluable:r}:null}}const $_=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>T_(t,e),Zp);function Jp(t,e){return e+=oi(t,e).length,$_(t,e)}function O_(t){const e=Jp(t,0);return!e||e.cursor+oi(t,e.cursor).length!==t.length?null:e.evaluable}function Pt(t){var e;const n=O_(t);return(e=n?.evaluate())!==null&&e!==void 0?e:null}function Ol(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Pt(t);if(!Me(e))return e}return 0}function Ie(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function ce(t,e,n,s,i){const r=(t-e)/(n-e);return s+r*(i-s)}function pc(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function $e(t,e,n){return Math.min(Math.max(t,e),n)}function Qp(t,e){return(t%e+e)%e}function L_(t,e){return Me(t.step)?Math.max(pc(e),2):pc(t.step)}function eh(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function A_(t,e){var n;const s=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return s===0?.1:Math.pow(10,Math.floor(Math.log10(s))-1)}function Ll(t,e){return Me(t.step)?null:new o_(t.step,e)}function Al(t){return!Me(t.max)&&!Me(t.min)?new Ci({max:t.max,min:t.min}):!Me(t.max)||!Me(t.min)?new Ml({max:t.max,min:t.min}):null}function Rl(t,e){var n,s,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:Ie(L_(t,e)),keyScale:(s=t.keyScale)!==null&&s!==void 0?s:eh(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:A_(t,e)}}function Dl(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function Fl(t){return{constraint:t.constraint,textProps:ue.fromObject(Rl(t.params,t.initialValue))}}class qn{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class Hn{constructor(e){this.target=e}}class wr extends Hn{constructor(e,n,s){super(e),this.value=n,this.last=s??!0}}class R_ extends Hn{constructor(e,n){super(e),this.expanded=n}}class D_ extends Hn{constructor(e,n){super(e),this.index=n}}class Bl extends qn{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ye,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new wr(this,n.binding.target.read(),e.options.last))}}function F_(t,e){const s=Object.keys(e).reduce((i,r)=>{if(i===void 0)return;const o=e[r],l=o(t[r]);return l.succeeded?Object.assign(Object.assign({},i),{[r]:l.value}):void 0},{});return s}function B_(t,e){return t.reduce((n,s)=>{if(n===void 0)return;const i=e(s);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function j_(t){return t===null?!1:typeof t=="object"}function Ut(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const s=t(n);return s!==void 0?{succeeded:!0,value:s}:{succeeded:!1,value:void 0}}}function hc(t){return{custom:e=>Ut(e)(t),boolean:Ut(e=>typeof e=="boolean"?e:void 0)(t),number:Ut(e=>typeof e=="number"?e:void 0)(t),string:Ut(e=>typeof e=="string"?e:void 0)(t),function:Ut(e=>typeof e=="function"?e:void 0)(t),constant:e=>Ut(n=>n===e?e:void 0)(t),raw:Ut(e=>e)(t),object:e=>Ut(n=>{if(j_(n))return F_(n,e)})(t),array:e=>Ut(n=>{if(Array.isArray(n))return B_(n,e)})(t)}}const ko={optional:hc(!0),required:hc(!1)};function Ae(t,e){const n=e(ko),s=ko.required.object(n)(t);return s.succeeded?s.value:void 0}function kt(t,e,n,s){if(e&&!e(t))return!1;const i=Ae(t,n);return i?s(i):!1}function Vt(t,e){var n;return Bn((n=t?.())!==null&&n!==void 0?n:{},e)}function Fi(t){return"value"in t}function N_(t){if(!Sl(t)||!("binding"in t))return!1;const e=t.binding;return e_(e)}const je="http://www.w3.org/2000/svg";function Zi(t){t.offsetHeight}function z_(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function _r(t){return t.ontouchstart!==void 0}function I_(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const K_={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function gr(t,e){const n=t.createElementNS(je,"svg");return n.innerHTML=K_[e],n}function th(t,e,n){t.insertBefore(e,t.children[n])}function jl(t){t.parentElement&&t.parentElement.removeChild(t)}function nh(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function U_(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function Nl(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function _t(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function gt(t,e,n){_t(t.value(e),n)}const q_="tp";function de(t){return(n,s)=>[q_,"-",t,"v",n?`_${n}`:"",s?`-${s}`:""].join("")}const Ts=de("lbl");function H_(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}class sh{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ts()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Ts("l")),gt(n.props,"label",r=>{Me(r)?this.element.classList.add(Ts(void 0,"nol")):(this.element.classList.remove(Ts(void 0,"nol")),U_(s),s.appendChild(H_(e,r)))}),this.element.appendChild(s),this.labelElement=s;const i=e.createElement("div");i.classList.add(Ts("v")),this.element.appendChild(i),this.valueElement=i}}class Cr{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new sh(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return kt(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Vt(null,{label:this.props.get("label")})}}function G_(){return["veryfirst","first","last","verylast"]}const dc=de(""),mc={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class yi{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{G_().forEach(s=>{n.classList.remove(dc(void 0,mc[s]))}),this.blade.get("positions").forEach(s=>{n.classList.add(dc(void 0,mc[s]))})}),this.viewProps.handleDispose(()=>{jl(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return kt(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Vt(null,Object.assign({},this.viewProps.exportState()))}}class Ji extends yi{constructor(e,n){if(n.value!==n.valueController.value)throw Qe.shouldNeverHappen();const s=n.valueController.viewProps,i=new Cr(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new sh(e,{props:n.props,viewProps:s}),viewProps:s})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return kt(e,n=>{var s,i,r;return super.importState(n)&&this.labelController.importProps(n)&&((r=(i=(s=this.valueController).importProps)===null||i===void 0?void 0:i.call(s,e))!==null&&r!==void 0?r:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,s;return Vt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(s=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&s!==void 0?s:{}))}}function ih(t,e){for(;t.length<e;)t.push(void 0)}function W_(t){const e=[];return ih(e,t),e}function Y_(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function X_(t,e){const n=[...Y_(t),e];return n.length>t.length?n.splice(0,n.length-t.length):ih(n,t.length),n}class Z_ extends qn{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const s=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{s(new Hn(this))}),this}}function J_(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function xn(t,e){return n=>{J_(t,e,n)}}function zl(t,e){_t(t,n=>{e.textContent=n??""})}const Hr=de("btn");class Q_{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Hr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("button");s.classList.add(Hr("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const i=e.createElement("div");i.classList.add(Hr("t")),zl(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class rh{constructor(e,n){this.emitter=new Ye,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Q_(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return kt(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Vt(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class fc extends yi{constructor(e,n){const s=new rh(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new Cr(e,{blade:n.blade,props:n.labelProps,valueController:s});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=s,this.labelController=i}importState(e){return kt(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Vt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class eg{constructor(e){const[n,s]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=s??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const tg=new eg("2.0.0-beta.2");function Re(t){return Object.assign({core:tg},t)}Re({id:"button",type:"blade",accept(t){const e=Ae(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new fc(t.document,{blade:t.blade,buttonProps:ue.fromObject({title:t.params.title}),labelProps:ue.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof fc?new Z_(t.controller):null}});function ng(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function sg(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function ig(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function rg(t){return Sl(t)?"refresh"in t&&typeof t.refresh=="function":!1}function og(t,e){if(!Xi.isBindable(t))throw Qe.notBindable();return new Xi(t,e)}class lg{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Ye,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,s){const i=s??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,og(e,n),i),l=this.pool_.createBindingApi(o);return this.add(l,i.index)}addFolder(e){return sg(this,e)}addButton(e){return ng(this,e)}addTab(e){return ig(this,e)}add(e,n){const s=e.controller;return this.controller_.rack.add(s,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,s=this.pool_.createBlade(n,e),i=this.pool_.createApi(s);return this.add(i,e.index)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)}),this}refresh(){this.children.forEach(e=>{rg(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,s=this.pool_.createApi(n),i=N_(n.value)?n.value.binding:null;this.emitter_.emit("change",new wr(s,i?i.target.read():n.value.rawValue,e.options.last))}}class Il extends qn{constructor(e,n){super(e),this.rackApi_=new lg(e.rackController,n)}}class Kl extends yi{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return kt(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((s,i)=>s.importState(n.children[i])))}exportState(){return Vt(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function Vo(t){return"rackController"in t}class ag{constructor(e){this.emitter=new Ye,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Qe.shouldNeverHappen();const s=n!==void 0?n:this.items_.length;this.items_.splice(s,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:s,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const s=this.extract_(e);s&&(s.allItems().forEach(i=>{this.cache_.delete(i)}),s.emitter.off("add",this.onSubListAdd_),s.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function cg(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(Fi(s)&&s.value===e)return s}return null}function ug(t){return Vo(t)?t.rackController.rack.bcSet_:null}class pg{constructor(e){var n,s;this.emitter=new Ye,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(s=this.blade_)===null||s===void 0||s.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new ag(ug),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var s;(s=e.parent)===null||s===void 0||s.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const s=e.item;if(s.viewProps.emitter.on("change",this.onChildViewPropsChange_),s.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),s.viewProps.handleDispose(this.onChildDispose_),Fi(s))s.value.emitter.on("change",this.onChildValueChange_);else if(Vo(s)){const i=s.rackController.rack;if(i){const r=i.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const s=e.item;if(Fi(s))s.value.emitter.off("change",this.onChildValueChange_);else if(Vo(s)){const i=s.rackController.rack;if(i){const r=i.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],s=e[e.length-1];this.bcSet_.items.forEach(i=>{const r=[];i===n&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),i===s&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),i.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=cg(this.find(Fi),e.sender);if(!n)throw Qe.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Ul{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new pg({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let s=this.rack.children.length-1;s>=0;s--)this.rack.children[s].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&th(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&jl(e.bladeController.view.element)}}function oh(){return new ue({positions:Le([],{equals:Qw})})}class gs extends ue{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},s=ue.createCore(n);return new gs(s)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Me(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const s=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};gt(this,"expanded",s),gt(this,"temporaryExpanded",s)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function hg(t,e){let n=0;return z_(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),Zi(e),n=e.clientHeight,t.set("temporaryExpanded",null),Zi(e)}),n}function vc(t,e){e.style.height=t.styleHeight}function yr(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),Me(t.get("expandedHeight"))){const n=hg(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),Zi(e)}),t.emitter.on("change",()=>{vc(t,e)}),vc(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class dg extends Il{constructor(e,n){super(e,n),this.emitter_=new Ye,this.controller.foldable.value("expanded").emitter.on("change",s=>{this.emitter_.emit("fold",new R_(this,s.sender.rawValue))}),this.rackApi_.on("change",s=>{this.emitter_.emit("change",s)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,s){return this.rackApi_.addBinding(e,n,s)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)}),this}refresh(){this.rackApi_.refresh()}}const lh=de("cnt");class mg{constructor(e,n){var s;this.className_=de((s=n.viewName)!==null&&s!==void 0?s:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),lh()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),gt(this.foldable_,"completed",xn(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),gt(n.props,"title",h=>{Me(h)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(this.className_("t")),zl(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const a=e.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}}class bc extends Kl{constructor(e,n){var s;const i=gs.create((s=n.expanded)!==null&&s!==void 0?s:!0),r=new mg(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Ul({blade:n.blade,element:r.containerElement,root:n.root,viewProps:n.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,yr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return kt(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Vt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Re({id:"folder",type:"blade",accept(t){const e=Ae(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new bc(t.document,{blade:t.blade,expanded:t.params.expanded,props:ue.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof bc?new dg(t.controller,t.pool):null}});const fg=de("");function wc(t,e){return xn(t,fg(void 0,e))}class en extends ue{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=r_(Le(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,s,i;const r=e??{};return new en(ue.createCore({disabled:(n=r.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(s=r.hidden)!==null&&s!==void 0?s:!1,parent:(i=r.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){_t(this.globalDisabled_,wc(e,"disabled")),gt(this,"hidden",wc(e,"hidden"))}bindDisabled(e){_t(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){_t(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const s=e.previousRawValue;s?.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const _c=de("tbp");class vg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(_c()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(_c("c")),this.element.appendChild(s),this.containerElement=s}}const $s=de("tbi");class bg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add($s()),n.viewProps.bindClassModifiers(this.element),gt(n.props,"selected",r=>{r?this.element.classList.add($s(void 0,"sel")):this.element.classList.remove($s(void 0,"sel"))});const s=e.createElement("button");s.classList.add($s("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const i=e.createElement("div");i.classList.add($s("t")),zl(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class wg{constructor(e,n){this.emitter=new Ye,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new bg(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class So extends Kl{constructor(e,n){const s=new vg(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Ul({blade:n.blade,element:s.containerElement,viewProps:n.viewProps}),view:s})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new wg(e,{props:n.itemProps,viewProps:en.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,gt(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return kt(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Vt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class _g extends Il{constructor(e,n){super(e,n),this.emitter_=new Ye,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",s=>{this.emitter_.emit("change",s)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,s=new So(n,{blade:oh(),itemProps:ue.fromObject({selected:!1,title:e.title}),props:ue.fromObject({selected:!1}),viewProps:en.create()}),i=this.pool_.createApi(s);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)}),this}onSelect_(e){this.emitter_.emit("select",new D_(this,e.rawValue))}}class gg extends Il{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,s){return this.rackApi_.addBinding(e,n,s)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const gc=-1;class Cg{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Le(!0),this.selectedIndex=Le(gc),this.items_=[]}add(e,n){const s=n??this.items_.length;this.items_.splice(s,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=gc,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,s)=>{n.rawValue=s===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,s)=>{n.rawValue=s===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(s=>s===e.sender);this.items_.forEach((s,i)=>{s.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const Os=de("tab");class yg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Os(),lh()),n.viewProps.bindClassModifiers(this.element),_t(n.empty,xn(this.element,Os(void 0,"nop")));const s=e.createElement("div");s.classList.add(Os("t")),this.element.appendChild(s),this.itemsElement=s;const i=e.createElement("div");i.classList.add(Os("i")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Os("c")),this.element.appendChild(r),this.contentsElement=r}}class Cc extends Kl{constructor(e,n){const s=new Cg,i=new yg(e,{empty:s.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Ul({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=s}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;th(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;jl(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}Re({id:"tab",type:"blade",accept(t){const e=Ae(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new Cc(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const s=new So(t.document,{blade:oh(),itemProps:ue.fromObject({selected:!1,title:n.title}),props:ue.fromObject({selected:!1}),viewProps:en.create()});e.add(s)}),e},api(t){return t.controller instanceof Cc?new _g(t.controller,t.pool):t.controller instanceof So?new gg(t.controller,t.pool):null}});class ql extends Bl{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class xg{constructor(){this.disabled=!1,this.emitter=new Ye}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Pg{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Ye,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Cs{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,s)=>s.constrain(n),e)}}function ai(t,e){if(t instanceof e)return t;if(t instanceof Cs){const n=t.constraints.reduce((s,i)=>s||(i instanceof e?i:null),null);if(n)return n}return null}class xr{constructor(e){this.values=ue.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}}function Pr(t){var e;const n=ko;if(Array.isArray(t))return(e=Ae({items:t},s=>({items:s.required.array(s.required.object({text:s.required.string,value:s.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function ah(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function Hl(t){return Me(t)?null:new xr(ah(t))}const Gr=de("lst");class Eg{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(Gr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("select");s.classList.add(Gr("s")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.selectElement=s;const i=e.createElement("div");i.classList.add(Gr("m")),i.appendChild(gr(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,gt(this.props_,"options",r=>{nh(this.selectElement),r.forEach(o=>{const l=e.createElement("option");l.textContent=o.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class ds{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Eg(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return kt(e,null,n=>({options:n.required.custom(Pr)}),n=>(this.props.set("options",ah(n.options)),!0))}exportProps(){return Vt(null,{options:this.props.get("options")})}}const yc=de("pop");class kg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(yc()),n.viewProps.bindClassModifiers(this.element),_t(n.shows,xn(this.element,yc(void 0,"v")))}}class Gl{constructor(e,n){this.shows=Le(!1),this.viewProps=n.viewProps,this.view=new kg(e,{shows:this.shows,viewProps:this.viewProps})}}const xc=de("txt");class Vg{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(xc()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const s=e.createElement("input");s.classList.add(xc("i")),s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class Er{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Vg(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const s=e.currentTarget.value,i=this.parser_(s);Me(i)||(this.value.rawValue=i),this.view.refresh()}}function Sg(t){return String(t)}function Wl(t){return t==="false"?!1:!!t}function Pc(t){return Sg(t)}function Mg(t){return e=>t.reduce((n,s)=>n!==null?n:s(e),null)}const Tg=Ie(0);function Qi(t){return Tg(t)+"%"}function Yl(t){return String(t)}function Mo(t){return t}function Gn({primary:t,secondary:e,forward:n,backward:s}){let i=!1;function r(o){i||(i=!0,o(),i=!1)}t.emitter.on("change",o=>{r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{r(()=>{t.setRawValue(s(t.rawValue,e.rawValue),o.options)}),r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ne(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function jn(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Et(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function $g(t){return t==="ArrowUp"||t==="ArrowDown"}function er(t){return $g(t)||t==="ArrowLeft"||t==="ArrowRight"}function Wr(t,e){var n,s;const i=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+r.left),y:t.pageY-(((s=i&&i.scrollY)!==null&&s!==void 0?s:0)+r.top)}}class nn{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ye,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const s=this.elem_.ownerDocument;s.addEventListener("mousemove",this.onDocumentMouseMove_),s.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Wr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Wr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Wr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),s=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),s=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const s=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(s?{x:s.clientX-i.left,y:s.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const mt=de("txt");class Og{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(mt(),mt(void 0,"num")),n.arrayPosition&&this.element.classList.add(mt(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("input");s.classList.add(mt("i")),s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(mt()),this.inputElement.classList.add(mt("i"));const i=e.createElement("div");i.classList.add(mt("k")),this.element.appendChild(i),this.knobElement=i;const r=e.createElementNS(je,"svg");r.classList.add(mt("g")),this.knobElement.appendChild(r);const o=e.createElementNS(je,"path");o.classList.add(mt("gb")),r.appendChild(o),this.guideBodyElem_=o;const l=e.createElementNS(je,"path");l.classList.add(mt("gh")),r.appendChild(l),this.guideHeadElem_=l;const a=e.createElement("div");a.classList.add(de("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(mt(void 0,"drg"));return}this.element.classList.add(mt(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),s=n+(n>0?-1:n<0?1:0),i=$e(-s,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${s+i},0 L${s},4 L${s+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class xi{constructor(e,n){var s;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(s=n.sliderProps)!==null&&s!==void 0?s:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Le(null),this.view=new Og(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new nn(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,s;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),r=(s=this.sliderProps_)===null||s===void 0?void 0:s.get("max");let o=e;return i!==void 0&&(o=Math.max(o,i)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(e){const s=e.currentTarget.value,i=this.parser_(s);Me(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=Ne(this.props.get("keyScale"),jn(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ne(this.props.get("keyScale"),jn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Yr=de("sld");class Lg{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Yr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Yr("t")),n.viewProps.bindTabIndex(s),this.element.appendChild(s),this.trackElement=s;const i=e.createElement("div");i.classList.add(Yr("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=$e(ce(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class Ag{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Lg(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new nn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(ce($e(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ne(this.props.get("keyScale"),Et(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Ne(this.props.get("keyScale"),Et(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Xr=de("sldtxt");class Rg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Xr());const s=e.createElement("div");s.classList.add(Xr("s")),this.sliderView_=n.sliderView,s.appendChild(this.sliderView_.element),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Xr("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Ec{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new Ag(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new xi(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new Rg(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return kt(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const s=this.sliderC_.props;return s.set("max",n.max),s.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Vt(null,{max:e.get("max"),min:e.get("min")})}}function Dg(t){return{sliderProps:new ue({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new ue({formatter:Le(t.formatter),keyScale:t.keyScale,pointerScale:Le(t.pointerScale)})}}const Fg={containerUnitSize:"cnt-usz"};function ch(t){return`--${Fg[t]}`}class uh{constructor(e,n){const s=de(n.viewName);this.element=e.createElement("div"),this.element.classList.add(s()),n.viewProps.bindClassModifiers(this.element)}}function ci(t){return Dl(t)}function vn(t){if(Eo(t))return Ae(t,ci)}function Wt(t,e){if(!t)return;const n=[],s=Ll(t,e);s&&n.push(s);const i=Al(t);return i&&n.push(i),new Cs(n)}function ph(t){if(t==="inline"||t==="popup")return t}function Pn(t,e){t.write(e)}const Ti=de("ckb");class Bg{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ti()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("label");s.classList.add(Ti("l")),this.element.appendChild(s);const i=e.createElement("input");i.classList.add(Ti("i")),i.type="checkbox",s.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(Ti("w")),s.appendChild(r);const o=gr(e,"check");r.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class jg{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Bg(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function Ng(t){const e=[],n=Hl(t.options);return n&&e.push(n),new Cs(e)}Re({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Ae(e,s=>({options:s.optional.custom(Pr),readonly:s.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Wl,constraint:t=>Ng(t.params),writer:t=>Pn},controller:t=>{const e=t.document,n=t.value,s=t.constraint,i=s&&ai(s,xr);return i?new ds(e,{props:new ue({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new jg(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof ds?new ql(t.controller):null}});const Sn=de("col");class zg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Sn()),n.foldable.bindExpandedClass(this.element,Sn(void 0,"expanded")),gt(n.foldable,"completed",xn(this.element,Sn(void 0,"cpl")));const s=e.createElement("div");s.classList.add(Sn("h")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Sn("s")),s.appendChild(i),this.swatchElement=i;const r=e.createElement("div");if(r.classList.add(Sn("t")),s.appendChild(r),this.textElement=r,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Sn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function Ig(t,e,n){const s=$e(t/255,0,1),i=$e(e/255,0,1),r=$e(n/255,0,1),o=Math.max(s,i,r),l=Math.min(s,i,r),a=o-l;let h=0,p=0;const d=(l+o)/2;return a!==0&&(p=a/(1-Math.abs(o+l-1)),s===o?h=(i-r)/a:i===o?h=2+(r-s)/a:h=4+(s-i)/a,h=h/6+(h<0?1:0)),[h*360,p*100,d*100]}function Kg(t,e,n){const s=(t%360+360)%360,i=$e(e/100,0,1),r=$e(n/100,0,1),o=(1-Math.abs(2*r-1))*i,l=o*(1-Math.abs(s/60%2-1)),a=r-o/2;let h,p,d;return s>=0&&s<60?[h,p,d]=[o,l,0]:s>=60&&s<120?[h,p,d]=[l,o,0]:s>=120&&s<180?[h,p,d]=[0,o,l]:s>=180&&s<240?[h,p,d]=[0,l,o]:s>=240&&s<300?[h,p,d]=[l,0,o]:[h,p,d]=[o,0,l],[(h+a)*255,(p+a)*255,(d+a)*255]}function Ug(t,e,n){const s=$e(t/255,0,1),i=$e(e/255,0,1),r=$e(n/255,0,1),o=Math.max(s,i,r),l=Math.min(s,i,r),a=o-l;let h;a===0?h=0:o===s?h=60*(((i-r)/a%6+6)%6):o===i?h=60*((r-s)/a+2):h=60*((s-i)/a+4);const p=o===0?0:a/o,d=o;return[h,p*100,d*100]}function hh(t,e,n){const s=Qp(t,360),i=$e(e/100,0,1),r=$e(n/100,0,1),o=r*i,l=o*(1-Math.abs(s/60%2-1)),a=r-o;let h,p,d;return s>=0&&s<60?[h,p,d]=[o,l,0]:s>=60&&s<120?[h,p,d]=[l,o,0]:s>=120&&s<180?[h,p,d]=[0,o,l]:s>=180&&s<240?[h,p,d]=[0,l,o]:s>=240&&s<300?[h,p,d]=[l,0,o]:[h,p,d]=[o,0,l],[(h+a)*255,(p+a)*255,(d+a)*255]}function qg(t,e,n){const s=n+e*(100-Math.abs(2*n-100))/200;return[t,s!==0?e*(100-Math.abs(2*n-100))/s:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function Hg(t,e,n){const s=100-Math.abs(n*(200-e)/100-100);return[t,s!==0?e*n/s:0,n*(200-e)/(2*100)]}function zt(t){return[t[0],t[1],t[2]]}function kr(t,e){return[t[0],t[1],t[2],e]}const Gg={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:qg,rgb:Kg},hsv:{hsl:Hg,hsv:(t,e,n)=>[t,e,n],rgb:hh},rgb:{hsl:Ig,hsv:Ug,rgb:(t,e,n)=>[t,e,n]}};function ms(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function Wg(t,e){return t===e?e:Qp(t,e)}function dh(t,e,n){var s;const i=ms(e,n);return[e==="rgb"?$e(t[0],0,i[0]):Wg(t[0],i[0]),$e(t[1],0,i[1]),$e(t[2],0,i[2]),$e((s=t[3])!==null&&s!==void 0?s:1,0,1)]}function kc(t,e,n,s){const i=ms(e,n),r=ms(e,s);return t.map((o,l)=>o/i[l]*r[l])}function mh(t,e,n){const s=kc(t,e.mode,e.type,"int"),i=Gg[e.mode][n.mode](...s);return kc(i,n.mode,"int",n.type)}class we{static black(){return new we([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=dh(e,n,this.type)}getComponents(e){return kr(mh(zt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const ln=de("colp");class Yg{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(ln()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(ln("hsv"));const i=e.createElement("div");i.classList.add(ln("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),s.appendChild(i);const r=e.createElement("div");r.classList.add(ln("h")),this.hPaletteView_=n.hPaletteView,r.appendChild(this.hPaletteView_.element),s.appendChild(r),this.element.appendChild(s);const o=e.createElement("div");if(o.classList.add(ln("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const l=e.createElement("div");l.classList.add(ln("a"));const a=e.createElement("div");a.classList.add(ln("ap")),a.appendChild(this.alphaViews_.palette.element),l.appendChild(a);const h=e.createElement("div");h.classList.add(ln("at")),h.appendChild(this.alphaViews_.text.element),l.appendChild(h),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function Xg(t){return t==="int"?"int":t==="float"?"float":void 0}function Xl(t){return Ae(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Xg)}),expanded:e.optional.boolean,picker:e.optional.custom(ph),readonly:e.optional.constant(!1)}))}function Nn(t){return t?.1:1}function fh(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class Zl{constructor(e,n){this.type="float",this.mode=n,this.comps_=dh(e,n,this.type)}getComponents(e){return kr(mh(zt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Zg={int:(t,e)=>new we(t,e),float:(t,e)=>new Zl(t,e)};function Jl(t,e,n){return Zg[n](t,e)}function Jg(t){return t.type==="float"}function Qg(t){return t.type==="int"}function e1(t){const e=t.getComponents(),n=ms(t.mode,"int");return new we([Math.round(ce(e[0],0,1,0,n[0])),Math.round(ce(e[1],0,1,0,n[1])),Math.round(ce(e[2],0,1,0,n[2])),e[3]],t.mode)}function t1(t){const e=t.getComponents(),n=ms(t.mode,"int");return new Zl([ce(e[0],0,n[0],0,1),ce(e[1],0,n[1],0,1),ce(e[2],0,n[2],0,1),e[3]],t.mode)}function tt(t,e){if(t.type===e)return t;if(Qg(t)&&e==="float")return t1(t);if(Jg(t)&&e==="int")return e1(t);throw Qe.shouldNeverHappen()}function n1(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function wt(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const s1={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function vh(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),s=e[2];return s1[s](n)}function bh(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[wt(e[1],255),wt(e[2],255),wt(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function i1(t){const e=bh(t);return e?new we(e,"rgb"):null}function wh(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[wt(e[1],255),wt(e[2],255),wt(e[3],255),wt(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function r1(t){const e=wh(t);return e?new we(e,"rgb"):null}function _h(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[vh(e[1]),wt(e[2],100),wt(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function o1(t){const e=_h(t);return e?new we(e,"hsl"):null}function gh(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[vh(e[1]),wt(e[2],100),wt(e[3],100),wt(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function l1(t){const e=gh(t);return e?new we(e,"hsl"):null}function Ch(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function a1(t){const e=Ch(t);return e?new we(e,"rgb"):null}function yh(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ce(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),ce(parseInt(n[4],16),0,255,0,1)]:null}function c1(t){const e=yh(t);return e?new we(e,"rgb"):null}function xh(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function u1(t){return e=>{const n=xh(e);return n?Jl(n,"rgb",t):null}}function Ph(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function p1(t){return e=>{const n=Ph(e);return n?Jl(n,"rgb",t):null}}const h1=[{parser:Ch,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:yh,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:bh,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:wh,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:_h,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:gh,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:xh,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Ph,result:{alpha:!0,mode:"rgb",notation:"object"}}];function d1(t){return h1.reduce((e,{parser:n,result:s})=>e||(n(t)?s:null),null)}function m1(t,e="int"){const n=d1(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function Pi(t){const e=[a1,c1,i1,r1,o1,l1];e.push(u1("int"),p1("int"));const n=Mg(e);return s=>{const i=n(s);return i?tt(i,t):null}}function f1(t){const e=Pi("int");if(typeof t!="string")return we.black();const n=e(t);return n??we.black()}function Eh(t){const e=$e(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function Ql(t,e="#"){const n=zt(t.getComponents("rgb")).map(Eh).join("");return`${e}${n}`}function ea(t,e="#"){const n=t.getComponents("rgb"),s=[n[0],n[1],n[2],n[3]*255].map(Eh).join("");return`${e}${s}`}function kh(t){const e=Ie(0),n=tt(t,"int");return`rgb(${zt(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function Bi(t){const e=Ie(2),n=Ie(0);return`rgba(${tt(t,"int").getComponents("rgb").map((r,o)=>(o===3?e:n)(r)).join(", ")})`}function v1(t){const e=[Ie(0),Qi,Qi],n=tt(t,"int");return`hsl(${zt(n.getComponents("hsl")).map((i,r)=>e[r](i)).join(", ")})`}function b1(t){const e=[Ie(0),Qi,Qi,Ie(2)];return`hsla(${tt(t,"int").getComponents("hsl").map((i,r)=>e[r](i)).join(", ")})`}function Vh(t,e){const n=Ie(e==="float"?2:0),s=["r","g","b"],i=tt(t,e);return`{${zt(i.getComponents("rgb")).map((o,l)=>`${s[l]}: ${n(o)}`).join(", ")}}`}function w1(t){return e=>Vh(e,t)}function Sh(t,e){const n=Ie(2),s=Ie(e==="float"?2:0),i=["r","g","b","a"];return`{${tt(t,e).getComponents("rgb").map((l,a)=>{const h=a===3?n:s;return`${i[a]}: ${h(l)}`}).join(", ")}}`}function _1(t){return e=>Sh(e,t)}const g1=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Ql},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:ea},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:kh},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Bi},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:v1},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:b1},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:w1(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:_1(e)}],[])];function Mh(t){return g1.reduce((e,n)=>e||(n1(n.format,t)?n.stringifier:null),null)}const Ls=de("apl");class C1{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Ls()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(Ls("b")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Ls("c")),s.appendChild(i),this.colorElem_=i;const r=e.createElement("div");r.classList.add(Ls("m")),this.element.appendChild(r),this.markerElem_=r;const o=e.createElement("div");o.classList.add(Ls("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),s=new we([n[0],n[1],n[2],0],"rgb"),i=new we([n[0],n[1],n[2],255],"rgb"),r=["to right",Bi(s),Bi(i)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Bi(e);const o=ce(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class y1{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new C1(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new nn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=e.point.x/e.bounds.width,i=this.value.rawValue,[r,o,l]=i.getComponents("hsv");this.value.setRawValue(new we([r,o,l,s],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ne(Nn(!0),Et(e));if(n===0)return;const s=this.value.rawValue,[i,r,o,l]=s.getComponents("hsv");this.value.setRawValue(new we([i,r,o,l+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ne(Nn(!0),Et(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Zn=de("coltxt");function x1(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((s,i)=>{const r=t.createElement("option");return r.textContent=i.text,r.value=i.value,s.appendChild(r),s},t.createDocumentFragment())),e}class P1{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Zn()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Zn("m")),this.modeElem_=x1(e),this.modeElem_.classList.add(Zn("ms")),s.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(Zn("mm")),i.appendChild(gr(e,"dropdown")),s.appendChild(i),this.element.appendChild(s);const r=e.createElement("div");r.classList.add(Zn("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=n.inputViews,this.applyInputViews_(),_t(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){nh(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const s=e.createElement("div");s.classList.add(Zn("c")),s.appendChild(n.element),this.inputsElem_.appendChild(s)})}}function E1(t){return Ie(t==="float"?2:0)}function k1(t,e,n){const s=ms(t,e)[n];return new Ci({min:0,max:s})}function V1(t,e,n){return new xi(t,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:e.parser,props:ue.fromObject({formatter:E1(e.colorType),keyScale:Nn(!1),pointerScale:e.colorType==="float"?.01:1}),value:Le(0,{constraint:k1(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function S1(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Pt,viewProps:e.viewProps};return[0,1,2].map(s=>{const i=V1(t,n,s);return Gn({primary:e.value,secondary:i.value,forward(r){return tt(r,e.colorType).getComponents(e.colorMode)[s]},backward(r,o){const l=e.colorMode,h=tt(r,e.colorType).getComponents(l);h[s]=o;const p=Jl(kr(zt(h),h[3]),l,e.colorType);return tt(p,"int")}}),i})}function M1(t,e){const n=new Er(t,{parser:Pi("int"),props:ue.fromObject({formatter:Ql}),value:Le(we.black()),viewProps:e.viewProps});return Gn({primary:e.value,secondary:n.value,forward:s=>new we(zt(s.getComponents()),s.mode),backward:(s,i)=>new we(kr(zt(i.getComponents(s.mode)),s.getComponents()[3]),s.mode)}),[n]}function T1(t){return t!=="hex"}class $1{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Le(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new P1(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return T1(n)?S1(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):M1(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(s=>s.view)}}const Zr=de("hpl");class O1{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Zr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(Zr("c")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Zr("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=kh(new we([n,100,100],"hsv"));const s=ce(n,0,360,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}}class L1{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new O1(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new nn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=ce($e(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,r,o,l]=i.getComponents("hsv");this.value.setRawValue(new we([s,r,o,l],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ne(Nn(!1),Et(e));if(n===0)return;const s=this.value.rawValue,[i,r,o,l]=s.getComponents("hsv");this.value.setRawValue(new we([i+n,r,o,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ne(Nn(!1),Et(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Jr=de("svp"),Vc=64;class A1{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Jr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("canvas");s.height=Vc,s.width=Vc,s.classList.add(Jr("c")),this.element.appendChild(s),this.canvasElement=s;const i=e.createElement("div");i.classList.add(Jr("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=I_(this.canvasElement);if(!e)return;const s=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,r=this.canvasElement.height,o=e.getImageData(0,0,i,r),l=o.data;for(let p=0;p<r;p++)for(let d=0;d<i;d++){const L=ce(d,0,i,0,100),H=ce(p,0,r,100,0),F=hh(s[0],L,H),j=(p*i+d)*4;l[j]=F[0],l[j+1]=F[1],l[j+2]=F[2],l[j+3]=255}e.putImageData(o,0,0);const a=ce(s[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const h=ce(s[2],0,100,100,0);this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}}class R1{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new A1(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new nn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=ce(e.point.x,0,e.bounds.width,0,100),i=ce(e.point.y,0,e.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new we([r,s,i,o],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){er(e.key)&&e.preventDefault();const[n,s,i,r]=this.value.rawValue.getComponents("hsv"),o=Nn(!1),l=Ne(o,Et(e)),a=Ne(o,jn(e));l===0&&a===0||this.value.setRawValue(new we([n,s+l,i+a,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Nn(!1),s=Ne(n,Et(e)),i=Ne(n,jn(e));s===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class D1{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new L1(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new R1(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new y1(e,{value:this.value,viewProps:this.viewProps}),text:new xi(e,{parser:Pt,props:ue.fromObject({pointerScale:.01,keyScale:.1,formatter:Ie(2)}),value:Le(0,{constraint:new Ci({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Gn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:s=>s.getComponents()[3],backward:(s,i)=>{const r=s.getComponents();return r[3]=i,new we(r,s.mode)}}),this.textsC_=new $1(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Yg(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Qr=de("colsw");class F1{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(Qr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Qr("sw")),this.element.appendChild(s),this.swatchElem_=s;const i=e.createElement("button");i.classList.add(Qr("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=ea(e)}onValueChange_(){this.update_()}}class B1{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new F1(e,{value:this.value,viewProps:this.viewProps})}}class ta{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=gs.create(n.expanded),this.swatchC_=new B1(e,{value:this.value,viewProps:this.viewProps});const s=this.swatchC_.view.buttonElement;s.addEventListener("blur",this.onButtonBlur_),s.addEventListener("click",this.onButtonClick_),this.textC_=new Er(e,{parser:n.parser,props:ue.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new zg(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Gl(e,{viewProps:this.viewProps}):null;const i=new D1(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Gn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),yr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,s=e.relatedTarget;(!s||!n.contains(s))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=Nl(e);s&&n.contains(s)||s&&s===this.swatchC_.view.buttonElement&&!_r(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function j1(t){return zt(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function N1(t){return t.getComponents("rgb").reduce((e,n,s)=>{const i=Math.floor(s===3?n*255:n)&255;return e<<8|i},0)>>>0}function z1(t){return new we([t>>16&255,t>>8&255,t&255],"rgb")}function I1(t){return new we([t>>24&255,t>>16&255,t>>8&255,ce(t&255,0,255,0,1)],"rgb")}function K1(t){return typeof t!="number"?we.black():z1(t)}function U1(t){return typeof t!="number"?we.black():I1(t)}function ji(t,e){return typeof t!="object"||Me(t)?!1:e in t&&typeof t[e]=="number"}function Th(t){return ji(t,"r")&&ji(t,"g")&&ji(t,"b")}function $h(t){return Th(t)&&ji(t,"a")}function Oh(t){return Th(t)}function na(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),s=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==s[i])return!1;return!0}function Sc(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function q1(t){const e=Mh(t);return e?(n,s)=>{Pn(n,e(s))}:null}function H1(t){const e=t?N1:j1;return(n,s)=>{Pn(n,e(s))}}function G1(t,e,n){const i=tt(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function W1(t,e,n){const i=tt(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function Y1(t,e){return(n,s)=>{t?G1(n,s,e):W1(n,s,e)}}function X1(t){var e;return!!(!((e=t?.color)===null||e===void 0)&&e.alpha)}function Z1(t){return t?e=>ea(e,"0x"):e=>Ql(e,"0x")}function J1(t){return"color"in t||t.view==="color"}Re({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!J1(e))return null;const n=Xl(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:X1(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?U1:K1,equals:na,writer:t=>H1(t.params.supportsAlpha)},controller:t=>{var e,n;return new ta(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:Z1(t.params.supportsAlpha),parser:Pi("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Q1(t,e){if(!Oh(t))return tt(we.black(),e);if(e==="int"){const n=Sc(t);return new we(n,"rgb")}if(e==="float"){const n=Sc(t);return new Zl(n,"rgb")}return tt(we.black(),"int")}function eC(t){return $h(t)}function tC(t){return e=>{const n=Q1(e,t);return tt(n,"int")}}function nC(t,e){return n=>t?Sh(n,e):Vh(n,e)}Re({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!Oh(t))return null;const s=Xl(e);return s?{initialValue:t,params:Object.assign(Object.assign({},s),{colorType:(n=fh(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>tC(t.params.colorType),equals:na,writer:t=>Y1(eC(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const s=$h(t.initialValue);return new ta(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:nC(s,t.params.colorType),parser:Pi("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s,value:t.value,viewProps:t.viewProps})}});Re({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=m1(t,fh(e));if(!n)return null;const s=Mh(n);if(!s)return null;const i=Xl(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:s})}:null},binding:{reader:()=>f1,equals:na,writer:t=>{const e=q1(t.params.format);if(!e)throw Qe.notBindable();return e}},controller:t=>{var e,n;return new ta(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:Pi("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class Vr{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((s,i)=>{var r,o;return(o=(r=this.components[i])===null||r===void 0?void 0:r.constrain(s))!==null&&o!==void 0?o:s});return this.asm_.fromComponents(n)}}const Mc=de("pndtxt");class sC{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(Mc()),this.textViews.forEach(s=>{const i=e.createElement("div");i.classList.add(Mc("a")),i.appendChild(s.element),this.element.appendChild(i)})}}function iC(t,e,n){return new xi(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Le(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class ys{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((s,i)=>iC(e,n,i)),this.acs_.forEach((s,i)=>{Gn({primary:this.value,secondary:s.value,forward:r=>n.assembly.toComponents(r)[i],backward:(r,o)=>{const l=n.assembly.toComponents(r);return l[i]=o,n.assembly.fromComponents(l)}})}),this.view=new sC(e,{textViews:this.acs_.map(s=>s.view)})}get textControllers(){return this.acs_}}class rC extends Bl{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function oC(t,e){const n=[],s=Ll(t,e);s&&n.push(s);const i=Al(t);i&&n.push(i);const r=Hl(t.options);return r&&n.push(r),new Cs(n)}Re({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Ae(e,s=>Object.assign(Object.assign({},Dl(s)),{options:s.optional.custom(Pr),readonly:s.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ol,constraint:t=>oC(t.params,t.initialValue),writer:t=>Pn},controller:t=>{const e=t.value,n=t.constraint,s=n&&ai(n,xr);if(s)return new ds(t.document,{props:new ue({options:s.values.value("options")}),value:e,viewProps:t.viewProps});const i=Rl(t.params,e.rawValue),r=n&&ai(n,Ci);return r?new Ec(t.document,Object.assign(Object.assign({},Dg(Object.assign(Object.assign({},i),{keyScale:Le(i.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:Pt,value:e,viewProps:t.viewProps})):new xi(t.document,{parser:Pt,props:ue.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof Ec?new rC(t.controller):t.controller.valueController instanceof ds?new ql(t.controller):null}});class _n{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Me(e))return!1;const n=e.x,s=e.y;return!(typeof n!="number"||typeof s!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const Lh={toComponents:t=>t.getComponents(),fromComponents:t=>new _n(...t)},Jn=de("p2d");class lC{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Jn()),n.viewProps.bindClassModifiers(this.element),_t(n.expanded,xn(this.element,Jn(void 0,"expanded")));const s=e.createElement("div");s.classList.add(Jn("h")),this.element.appendChild(s);const i=e.createElement("button");i.classList.add(Jn("b")),i.appendChild(gr(e,"p2dpad")),n.viewProps.bindDisabled(i),s.appendChild(i),this.buttonElement=i;const r=e.createElement("div");if(r.classList.add(Jn("t")),s.appendChild(r),this.textElement=r,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Jn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const an=de("p2dp");class aC{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(an()),n.layout==="popup"&&this.element.classList.add(an(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(an("p")),n.viewProps.bindTabIndex(s),this.element.appendChild(s),this.padElement=s;const i=e.createElementNS(je,"svg");i.classList.add(an("g")),this.padElement.appendChild(i),this.svgElem_=i;const r=e.createElementNS(je,"line");r.classList.add(an("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=e.createElementNS(je,"line");o.classList.add(an("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const l=e.createElementNS(je,"line");l.classList.add(an("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const a=e.createElement("div");a.classList.add(an("m")),this.padElement.appendChild(a),this.markerElem_=a,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),s=this.props_.get("max"),i=ce(e,-s,+s,0,100),r=ce(n,-s,+s,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Tc(t,e,n){return[Ne(e[0],Et(t)),Ne(e[1],jn(t))*(n?1:-1)]}class cC{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new aC(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new nn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=this.props.get("max"),i=ce(e.point.x,0,e.bounds.width,-s,+s),r=ce(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-s,+s);this.value.setRawValue(new _n(i,r),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){er(e.key)&&e.preventDefault();const[n,s]=Tc(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&s===0||this.value.setRawValue(new _n(this.value.rawValue.x+n,this.value.rawValue.y+s),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,s]=Tc(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class uC{constructor(e,n){var s,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=gs.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new Gl(e,{viewProps:this.viewProps}):null;const r=new cC(e,{layout:n.pickerLayout,props:new ue({invertsY:Le(n.invertsY),max:Le(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new ys(e,{assembly:Lh,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new lC(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Gn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),yr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,s=e.relatedTarget;(!s||!n.contains(s))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=Nl(e);s&&n.contains(s)||s&&s===this.view.buttonElement&&!_r(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function pC(t){return _n.isObject(t)?new _n(t.x,t.y):new _n}function hC(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function dC(t,e){return new Vr({assembly:Lh,components:[Wt(Object.assign(Object.assign({},t),t.x),e.x),Wt(Object.assign(Object.assign({},t),t.y),e.y)]})}function $c(t,e){var n,s;if(!Me(t.min)||!Me(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((s=t.max)!==null&&s!==void 0?s:0));const i=eh(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function mC(t,e){var n,s;const i=$c(Bn(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),r=$c(Bn(t,(s=t.y)!==null&&s!==void 0?s:{}),e.y);return Math.max(i,r)}function fC(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}Re({id:"input-point2d",type:"input",accept:(t,e)=>{if(!_n.isObject(t))return null;const n=Ae(e,s=>Object.assign(Object.assign({},ci(s)),{expanded:s.optional.boolean,picker:s.optional.custom(ph),readonly:s.optional.constant(!1),x:s.optional.custom(vn),y:s.optional.object(Object.assign(Object.assign({},ci(s)),{inverted:s.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>pC,constraint:t=>dC(t.params,t.initialValue),equals:_n.equals,writer:()=>hC},controller:t=>{var e,n;const s=t.document,i=t.value,r=t.constraint,o=[t.params.x,t.params.y];return new uC(s,{axes:i.rawValue.getComponents().map((l,a)=>{var h;return Fl({constraint:r.components[a],initialValue:l,params:Bn(t.params,(h=o[a])!==null&&h!==void 0?h:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:fC(t.params),max:mC(t.params,i.rawValue),parser:Pt,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});class as{constructor(e=0,n=0,s=0){this.x=e,this.y=n,this.z=s}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Me(e))return!1;const n=e.x,s=e.y,i=e.z;return!(typeof n!="number"||typeof s!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Ah={toComponents:t=>t.getComponents(),fromComponents:t=>new as(...t)};function vC(t){return as.isObject(t)?new as(t.x,t.y,t.z):new as}function bC(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function wC(t,e){return new Vr({assembly:Ah,components:[Wt(Object.assign(Object.assign({},t),t.x),e.x),Wt(Object.assign(Object.assign({},t),t.y),e.y),Wt(Object.assign(Object.assign({},t),t.z),e.z)]})}Re({id:"input-point3d",type:"input",accept:(t,e)=>{if(!as.isObject(t))return null;const n=Ae(e,s=>Object.assign(Object.assign({},ci(s)),{readonly:s.optional.constant(!1),x:s.optional.custom(vn),y:s.optional.custom(vn),z:s.optional.custom(vn)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>vC,constraint:t=>wC(t.params,t.initialValue),equals:as.equals,writer:t=>bC},controller:t=>{const e=t.value,n=t.constraint,s=[t.params.x,t.params.y,t.params.z];return new ys(t.document,{assembly:Ah,axes:e.rawValue.getComponents().map((i,r)=>{var o;return Fl({constraint:n.components[r],initialValue:i,params:Bn(t.params,(o=s[r])!==null&&o!==void 0?o:{})})}),parser:Pt,value:e,viewProps:t.viewProps})}});class cs{constructor(e=0,n=0,s=0,i=0){this.x=e,this.y=n,this.z=s,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Me(e))return!1;const n=e.x,s=e.y,i=e.z,r=e.w;return!(typeof n!="number"||typeof s!="number"||typeof i!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Rh={toComponents:t=>t.getComponents(),fromComponents:t=>new cs(...t)};function _C(t){return cs.isObject(t)?new cs(t.x,t.y,t.z,t.w):new cs}function gC(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function CC(t,e){return new Vr({assembly:Rh,components:[Wt(Object.assign(Object.assign({},t),t.x),e.x),Wt(Object.assign(Object.assign({},t),t.y),e.y),Wt(Object.assign(Object.assign({},t),t.z),e.z),Wt(Object.assign(Object.assign({},t),t.w),e.w)]})}Re({id:"input-point4d",type:"input",accept:(t,e)=>{if(!cs.isObject(t))return null;const n=Ae(e,s=>Object.assign(Object.assign({},ci(s)),{readonly:s.optional.constant(!1),w:s.optional.custom(vn),x:s.optional.custom(vn),y:s.optional.custom(vn),z:s.optional.custom(vn)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>_C,constraint:t=>CC(t.params,t.initialValue),equals:cs.equals,writer:t=>gC},controller:t=>{const e=t.value,n=t.constraint,s=[t.params.x,t.params.y,t.params.z,t.params.w];return new ys(t.document,{assembly:Rh,axes:e.rawValue.getComponents().map((i,r)=>{var o;return Fl({constraint:n.components[r],initialValue:i,params:Bn(t.params,(o=s[r])!==null&&o!==void 0?o:{})})}),parser:Pt,value:e,viewProps:t.viewProps})}});function yC(t){const e=[],n=Hl(t.options);return n&&e.push(n),new Cs(e)}Re({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Ae(e,s=>({readonly:s.optional.constant(!1),options:s.optional.custom(Pr)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Yl,constraint:t=>yC(t.params),writer:t=>Pn},controller:t=>{const e=t.document,n=t.value,s=t.constraint,i=s&&ai(s,xr);return i?new ds(e,{props:new ue({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new Er(e,{parser:r=>r,props:ue.fromObject({formatter:Mo}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof ds?new ql(t.controller):null}});const Ei={monitor:{defaultInterval:200,defaultRows:3}},Oc=de("mll");class xC{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Oc()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("textarea");s.classList.add(Oc("i")),s.style.height=`calc(var(${ch("containerUnitSize")}) * ${n.rows})`,s.readOnly=!0,n.viewProps.bindDisabled(s),this.element.appendChild(s),this.textareaElem_=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,s=[];this.value.rawValue.forEach(i=>{i!==void 0&&s.push(this.formatter_(i))}),e.textContent=s.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class sa{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new xC(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const Lc=de("sgl");class PC{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Lc()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("input");s.classList.add(Lc("i")),s.readOnly=!0,s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class ia{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new PC(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}Re({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Ae(e,s=>({readonly:s.required.constant(!0),rows:s.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Wl},controller:t=>{var e;return t.value.rawValue.length===1?new ia(t.document,{formatter:Pc,value:t.value,viewProps:t.viewProps}):new sa(t.document,{formatter:Pc,rows:(e=t.params.rows)!==null&&e!==void 0?e:Ei.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class EC extends Bl{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const cn=de("grl");class kC{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(cn()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const s=e.createElementNS(je,"svg");s.classList.add(cn("g")),s.style.height=`calc(var(${ch("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(s),this.svgElem_=s;const i=e.createElementNS(je,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const r=e.createElement("div");r.classList.add(cn("t"),de("tt")()),this.element.appendChild(r),this.tooltipElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,s=this.props_.get("min"),i=this.props_.get("max"),r=[];this.value.rawValue.forEach((p,d)=>{if(p===void 0)return;const L=ce(d,0,n,0,e.width),H=ce(p,s,i,e.height,0);r.push([L,H].join(","))}),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const o=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){o.classList.remove(cn("t","a"));return}const a=ce(this.cursor_.rawValue,0,n,0,e.width),h=ce(l,s,i,e.height,0);o.style.left=`${a}px`,o.style.top=`${h}px`,o.textContent=`${this.formatter_(l)}`,o.classList.contains(cn("t","a"))||(o.classList.add(cn("t","a"),cn("t","in")),Zi(o),o.classList.remove(cn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class ra{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Le(-1),this.view=new kC(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!_r(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const s=new nn(this.view.element);s.emitter.on("down",this.onGraphPointerDown_),s.emitter.on("move",this.onGraphPointerMove_),s.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return kt(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Vt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(ce(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(ce(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function To(t){return Me(t.format)?Ie(2):t.format}function VC(t){var e;return t.value.rawValue.length===1?new ia(t.document,{formatter:To(t.params),value:t.value,viewProps:t.viewProps}):new sa(t.document,{formatter:To(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:Ei.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function SC(t){var e,n,s;return new ra(t.document,{formatter:To(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:Ei.monitor.defaultRows,props:ue.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(s=t.params.min)!==null&&s!==void 0?s:0}),value:t.value,viewProps:t.viewProps})}function Ac(t){return t.view==="graph"}Re({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Ae(e,s=>({format:s.optional.function,max:s.optional.number,min:s.optional.number,readonly:s.required.constant(!0),rows:s.optional.number,view:s.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Ac(t)?64:1,reader:t=>Ol},controller:t=>Ac(t.params)?SC(t):VC(t),api:t=>t.controller.valueController instanceof ra?new EC(t.controller):null});Re({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Ae(e,s=>({multiline:s.optional.boolean,readonly:s.required.constant(!0),rows:s.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Yl},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new sa(t.document,{formatter:Mo,rows:(e=t.params.rows)!==null&&e!==void 0?e:Ei.monitor.defaultRows,value:n,viewProps:t.viewProps}):new ia(t.document,{formatter:Mo,value:n,viewProps:t.viewProps})}});class Dh{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const s=n.bind(this);return this.controller_.emitter.on(e,()=>{s(new Hn(this))}),this}}class MC extends Hn{constructor(e,n,s){super(e),this.cell=n,this.index=s}}class Fh extends qn{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new Ye;const n=this.controller.valueController;n.cellControllers.forEach((s,i)=>{const r=new Dh(s);this.cellToApiMap_.set(s,r),s.emitter.on("click",()=>{const o=i%n.size[0],l=Math.floor(i/n.size[0]);this.emitter_.emit("click",{event:new MC(this,r,[o,l])})})})}cell(e,n){const s=this.controller.valueController,i=s.cellControllers[n*s.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i.event)}),this}}class Bh{constructor(e,n){this.size=n.size;const[s,i]=this.size,r=[];for(let o=0;o<i;o++)for(let l=0;l<s;l++){const a=new rh(e,{props:ue.fromObject(Object.assign({},n.cellConfig(l,o))),viewProps:en.create()});r.push(a)}this.cellCs_=r,this.viewProps=en.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(o=>{o.viewProps.set("disposed",!0)})}),this.view=new uh(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${s}, 1fr)`,this.cellCs_.forEach(o=>{this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}}class Rc extends yi{constructor(e,n){const s=n.valueController,i=new Cr(e,{blade:n.blade,props:n.labelProps,valueController:s});super({blade:n.blade,view:i.view,viewProps:s.viewProps}),this.valueController=s,this.labelController=i}}const TC=Re({id:"buttongrid",type:"blade",accept(t){const e=Ae(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Rc(t.document,{blade:t.blade,labelProps:ue.fromObject({label:t.params.label}),valueController:new Bh(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof Rc?new Fh(t.controller):null}});class jh extends qn{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const s=n.bind(this);return this.controller.valueController.value.emitter.on(e,i=>{s(new wr(this,i.rawValue,i.options.last))}),this}}function ft(t,e,n){return t*(1-n)+e*n}const $C=20,OC=.001,eo=100;function LC(t,e){let n=.25,s=.5,i=-1;for(let r=0;r<$C;r++){const[o,l]=t.curve(s);if(s+=n*(o<e?1:-1),i=l,n*=.5,Math.abs(e-o)<OC)break}return i}class yn{constructor(e=0,n=0,s=1,i=1){this.cache_=[],this.comps_=[e,n,s,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return Me(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=ft(0,this.x1,e),s=ft(0,this.y1,e),i=ft(this.x1,this.x2,e),r=ft(this.y1,this.y2,e),o=ft(this.x2,1,e),l=ft(this.y2,1,e),a=ft(n,i,e),h=ft(s,r,e),p=ft(i,o,e),d=ft(r,l,e);return[ft(a,p,e),ft(h,d,e)]}y(e){if(this.cache_.length===0){const n=[];for(let s=0;s<eo;s++)n.push(LC(this,ce(s,0,eo-1,0,1)));this.cache_=n}return this.cache_[Math.round(ce($e(e,0,1),0,1,0,eo-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const oa={toComponents:t=>t.toObject(),fromComponents:t=>new yn(...t)};function AC(t){const e=Ie(2);return`cubic-bezier(${t.toObject().map(s=>e(s)).join(", ")})`}const Dc=[0,.5,.5,1];function RC(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new yn(...Dc);const n=[e[1],e[2],e[3],e[4]].reduce((s,i)=>{if(!s)return null;const r=Number(i);return isNaN(r)?null:[...s,r]},[]);return new yn(...n??Dc)}const Mn=de("cbz");class Nh{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Mn()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,Mn(void 0,"expanded")),gt(n.foldable,"completed",xn(this.element,Mn(void 0,"cpl")));const s=e.createElement("div");s.classList.add(Mn("h")),this.element.appendChild(s);const i=e.createElement("button");i.classList.add(Mn("b")),n.viewProps.bindDisabled(i);const r=e.createElementNS(je,"svg");r.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(r),s.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(Mn("t")),s.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const l=e.createElement("div");l.classList.add(Mn("p")),this.element.appendChild(l),this.pickerElement=l}else this.pickerElement=null}}const to=de("cbzp");class zh{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(to()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(to("g")),this.element.appendChild(s),this.graphElement=s;const i=e.createElement("div");i.classList.add(to("t")),this.element.appendChild(i),this.textElement=i}}function Ih(t,e){const n=new MutationObserver(i=>{for(const r of i)r.type==="childList"&&r.addedNodes.forEach(o=>{o.contains(o)&&(e(),n.disconnect())})}),s=t.ownerDocument;n.observe(s.body,{attributes:!0,childList:!0,subtree:!0})}const un=de("cbzg");function DC(t,e){return n=>e(t(n))}class Kh{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(un()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(un("p")),this.element.appendChild(s),this.previewElement=s;const i=e.createElementNS(je,"svg");i.classList.add(un("g")),this.element.appendChild(i),this.svgElem_=i;const r=e.createElementNS(je,"path");r.classList.add(un("u")),this.svgElem_.appendChild(r),this.guideElem_=r;const o=e.createElementNS(je,"polyline");o.classList.add(un("l")),this.svgElem_.appendChild(o),this.lineElem_=o,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(l=>{l.classList.add(un("h")),this.element.appendChild(l)}),this.vectorElems_=[e.createElementNS(je,"line"),e.createElementNS(je,"line")],this.vectorElems_.forEach(l=>{l.classList.add(un("v")),this.svgElem_.appendChild(l)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((l,a)=>{_t(this.sel_,DC(h=>h===a,xn(l,un("h","sel"))))}),Ih(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const{clientWidth:s,clientHeight:i}=this.element,r=this.getVertMargin_(i);return{x:ce(e,0,1,0,s),y:ce(n,0,1,i-r,r)}}positionToValue(e,n){const s=this.element.getBoundingClientRect(),i=s.width,r=s.height,o=this.getVertMargin_(r);return{x:$e(ce(e,0,i,0,1),0,1),y:ce(n,r-o,o,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(r=>{const o=this.valueToPosition(0,r),l=this.valueToPosition(1,r);return[`M ${o.x},${o.y}`,`L ${l.x},${l.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let s=0;for(;;){const r=this.valueToPosition(...e.curve(s));if(n.push([r.x,r.y].join(",")),s>=1)break;s=Math.min(s+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const i=e.toObject();[0,1].forEach(r=>{const o=this.valueToPosition(r,r),l=this.valueToPosition(i[r*2],i[r*2+1]),a=this.vectorElems_[r];a.setAttributeNS(null,"x1",String(o.x)),a.setAttributeNS(null,"y1",String(o.y)),a.setAttributeNS(null,"x2",String(l.x)),a.setAttributeNS(null,"y2",String(l.y));const h=this.handleElems_[r];h.style.left=`${l.x}px`,h.style.top=`${l.y}px`})}onValueChange_(){this.refresh()}}const Fc=24,Bc=400,jc=1e3,Qn=de("cbzprv");class Uh{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Qn()),n.viewProps.bindClassModifiers(this.element);const s=e.createElementNS(je,"svg");s.classList.add(Qn("g")),this.element.appendChild(s),this.svgElem_=s;const i=e.createElementNS(je,"path");i.classList.add(Qn("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const r=e.createElement("div");r.classList.add(Qn("m")),this.element.appendChild(r),this.markerElem_=r,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),Ih(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(Qn("m","a")),this.startTime_=new Date().getTime()+Bc,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(Qn("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y($e(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const{clientWidth:e,clientHeight:n}=this.svgElem_,s=[],i=this.value_.rawValue;for(let r=0;r<Fc;r++){const o=ce(r,0,Fc-1,0,1),l=ce(i.y(o),0,1,0,e);s.push(`M ${l},0 v${n}`)}this.ticksElem_.setAttributeNS(null,"d",s.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/jc;this.updateMarker_(n),e>jc+Bc&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function $o(t,e,n,s){const i=n-t,r=s-e;return Math.sqrt(i*i+r*r)}function FC(t,e,n,s){const i=$o(t,e,n,s),r=Math.atan2(s-e,n-t),o=Math.round(r/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(o)*i,y:e+Math.sin(o)*i}}class qh{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=Le(0),this.viewProps=n.viewProps,this.view=new Kh(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new Uh(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",i=>{i.stopImmediatePropagation(),i.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const s=new nn(this.view.element);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,s){const i=this.sel_.rawValue,r=this.value.rawValue.toObject(),o=this.view.positionToValue(e.x,e.y),l=n?FC(i,i,o.x,o.y):o;r[i*2]=l.x,r[i*2+1]=l.y,this.value.setRawValue(new yn(...r),s)}onPointerDown_(e){const n=e.data;if(!n.point)return;const s=this.value.rawValue,i=this.view.valueToPosition(s.x1,s.y1),r=$o(n.point.x,n.point.y,i.x,i.y),o=this.view.valueToPosition(s.x2,s.y2),l=$o(n.point.x,n.point.y,o.x,o.y);this.sel_.rawValue=r<=l?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){er(e.key)&&e.preventDefault();const n=this.sel_.rawValue,s=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;s[n*2]+=Ne(i,Et(e)),s[n*2+1]+=Ne(i,jn(e)),this.value.setRawValue(new yn(...s),{forceEmit:!1,last:!1})}onKeyUp_(e){er(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,s=Ne(n,Et(e)),i=Ne(n,jn(e));s===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Hh{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new zh(e,{viewProps:this.viewProps}),this.gc_=new qh(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const s=Object.assign(Object.assign({},n.axis),{constraint:new Ml({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new ys(e,{assembly:oa,axes:[s,i,s,i],parser:Pt,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class Oo{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=gs.create(n.expanded),this.view=new Nh(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new Er(e,{parser:RC,props:ue.fromObject({formatter:AC}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new Gl(e,{viewProps:this.viewProps}):null;const s=new Hh(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});s.allFocusableElements.forEach(i=>{i.addEventListener("blur",this.onPopupChildBlur_),i.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),_t(this.popC_.shows,i=>{i&&s.refresh()}),Gn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:i=>i,backward:(i,r)=>r})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),yr(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=Nl(e);s&&n.contains(s)||s&&s===this.view.buttonElement&&!_r(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function BC(){return new Vr({assembly:oa,components:[0,1,2,3].map(t=>t%2===0?new Ml({min:0,max:1}):void 0)})}const jC=Re({id:"cubicbezier",type:"blade",accept(t){const e=Ae(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(s=>s==="inline"||s==="popup"?s:void 0)}));return e?{params:e}:null},controller(t){var e,n;const s=new yn(...t.params.value),i=Le(s,{constraint:BC(),equals:yn.equals}),r=new Oo(t.document,{axis:{textProps:ue.fromObject({keyScale:.1,pointerScale:.01,formatter:Ie(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps});return new Ji(t.document,{blade:t.blade,props:ue.fromObject({label:t.params.label}),value:i,valueController:r})},api(t){return!(t.controller instanceof Ji)||!(t.controller.valueController instanceof Oo)?null:new jh(t.controller)}});class Gh extends qn{get fps(){return this.controller.valueController.fps}get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}on(e,n){const s=n.bind(this);return this.controller.valueController.ticker.emitter.on(e,()=>{s(new Hn(this))}),this}}const Nc=20;class Wh{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=Nc)return;const e=this.timestamps_.length-Nc;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(s=>{s.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const As=de("fps");class Yh{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(As()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(As("g")),this.element.appendChild(this.graphElement);const s=e.createElement("div");s.classList.add(As("l")),this.element.appendChild(s);const i=e.createElement("span");i.classList.add(As("v")),i.textContent="--",s.appendChild(i),this.valueElement=i;const r=e.createElement("span");r.classList.add(As("u")),r.textContent="FPS",s.appendChild(r)}}class Xh{constructor(e,n){this.stopwatch_=new Wh,this.onTick_=this.onTick_.bind(this),this.ticker=n.ticker,this.ticker.emitter.on("tick",this.onTick_),this.props=n.props,this.value_=n.value,this.viewProps=n.viewProps,this.view=new Yh(e,{viewProps:this.viewProps}),this.graphC_=new ra(e,{formatter:Ie(0),props:this.props,rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker.dispose()})}get fps(){return this.stopwatch_.fps}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=X_(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class zc extends yi{constructor(e,n){const s=n.valueController,i=new Cr(e,{blade:n.blade,props:n.labelProps,valueController:s});super({blade:n.blade,view:i.view,viewProps:s.viewProps}),this.valueController=s,this.labelController=i}}function NC(t,e){return e===0?new xg:new Pg(t,e??Ei.monitor.defaultInterval)}const zC=Re({id:"fpsgraph",type:"blade",accept(t){const e=Ae(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,s,i;const r=(e=t.params.interval)!==null&&e!==void 0?e:500;return new zc(t.document,{blade:t.blade,labelProps:ue.fromObject({label:t.params.label}),valueController:new Xh(t.document,{props:ue.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:90,min:(s=t.params.min)!==null&&s!==void 0?s:0}),rows:(i=t.params.rows)!==null&&i!==void 0?i:2,ticker:NC(t.document,r),value:Le(W_(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof zc?new Gh(t.controller):null}});class ut{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,s=e.max;return!(typeof n!="number"||typeof s!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const la={fromComponents:t=>new ut(t[0],t[1]),toComponents:t=>[t.min,t.max]};class aa{constructor(e){this.edge=e}constrain(e){var n,s,i,r,o,l,a,h;if(e.min<=e.max)return new ut((s=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&s!==void 0?s:e.min,(r=(i=this.edge)===null||i===void 0?void 0:i.constrain(e.max))!==null&&r!==void 0?r:e.max);const p=(e.min+e.max)/2;return new ut((l=(o=this.edge)===null||o===void 0?void 0:o.constrain(p))!==null&&l!==void 0?l:p,(h=(a=this.edge)===null||a===void 0?void 0:a.constrain(p))!==null&&h!==void 0?h:p)}}const no=de("rsltxt");class Zh{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(no());const s=e.createElement("div");s.classList.add(no("s")),s.appendChild(this.sliderView_.element),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(no("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const Tn=de("rsl");class Jh{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Tn()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const s=e.createElement("div");s.classList.add(Tn("t")),this.element.appendChild(s),this.trackElement=s;const i=e.createElement("div");i.classList.add(Tn("b")),s.appendChild(i),this.barElement=i;const r=["min","max"].map(o=>{const l=e.createElement("div");return l.classList.add(Tn("k"),Tn("k",o)),s.appendChild(l),l});this.knobElements=[r[0],r[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),s=this.sliderProps_.get("max");return $e(ce(e,n,s,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(Tn(void 0,"zero")):this.element.classList.remove(Tn(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((s,i)=>{s.style.left=`${n[i]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class Qh{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new Jh(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const s=new nn(this.view.trackElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,s=this.sliderProps.get("min"),i=this.sliderProps.get("max");return ce(n,0,1,s,i)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,s=this.value.rawValue,i=this.sliderProps.get("min"),r=this.sliderProps.get("max"),o=ce(s.min,i,r,0,1),l=ce(s.max,i,r,0,1);Math.abs(l-n)<=.025?this.grabbing_="max":Math.abs(o-n)<=.025?this.grabbing_="min":n>=o&&n<=l?(this.grabbing_="length",this.grabOffset_=ce(n-o,0,1,0,r-i)):n<o?(this.grabbing_="min",this.onPointerMove_(e)):n>l&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const s=this.valueFromData_(e);if(s===null)return;const i=this.sliderProps.get("min"),r=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new ut(s,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new ut(this.value.rawValue.min,s),n);else if(this.grabbing_==="length"){const o=this.value.rawValue.length;let l=s-this.grabOffset_,a=l+o;l<i?(l=i,a=i+o):a>r&&(l=r-o,a=r),this.value.setRawValue(new ut(l,a),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class ed{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new Qh(e,n);const s={constraint:n.constraint,textProps:n.textProps};this.tc_=new ys(e,{assembly:la,axes:[s,s],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new Zh(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function IC(t){return ut.isObject(t)?new ut(t.min,t.max):new ut(0,0)}function KC(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function UC(t){const e=[],n=Al(t);n&&e.push(n);const s=Ll(t);return s&&e.push(s),new aa(new Cs(e))}const qC=Re({id:"input-interval",type:"input",accept:(t,e)=>{if(!ut.isObject(t))return null;const n=Ae(e,s=>Object.assign(Object.assign({},Dl(s)),{readonly:s.optional.constant(!1)}));return n?{initialValue:new ut(t.min,t.max),params:n}:null},binding:{reader:t=>IC,constraint:t=>UC(t.params),equals:ut.equals,writer:t=>KC},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof aa))throw Qe.shouldNeverHappen();const s=(e.rawValue.min+e.rawValue.max)/2,i=ue.fromObject(Rl(t.params,s)),r=n.edge&&ai(n.edge,Ci);if(r)return new ed(t.document,{constraint:n.edge,parser:Pt,sliderProps:new ue({keyScale:i.value("keyScale"),max:r.values.value("max"),min:r.values.value("min")}),textProps:i,value:e,viewProps:t.viewProps});const o={constraint:n.edge,textProps:i};return new ys(t.document,{assembly:la,axes:[o,o],parser:Pt,value:e,viewProps:t.viewProps})}});class td{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class nd extends wr{constructor(e,n,s,i,r){super(e,i,r),this.cell=n,this.index=s}}class sd extends qn{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(s=>{const i=new td(s);this.cellToApiMap_.set(s,i)})}get value(){return this.controller.value}cell(e,n){const s=this.controller.valueController,i=s.cellControllers[n*s.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const s=n.bind(this);this.controller.value.emitter.on(e,i=>{const r=this.controller.valueController,o=r.findCellByValue(i.rawValue);if(!o)return;const l=this.cellToApiMap_.get(o);if(!l)return;const a=r.cellControllers.indexOf(o);s(new nd(this,l,[a%r.size[0],Math.floor(a/r.size[0])],i.rawValue))})}}const Rs=de("rad");class id{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Rs()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("label");s.classList.add(Rs("l")),this.element.appendChild(s);const i=e.createElement("input");i.classList.add(Rs("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),s.appendChild(i),this.inputElement=i;const r=e.createElement("div");r.classList.add(Rs("b")),s.appendChild(r);const o=e.createElement("div");o.classList.add(Rs("t")),r.appendChild(o),gt(n.props,"title",l=>{o.textContent=l})}}class rd{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new id(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class tr{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[s,i]=this.size;for(let r=0;r<i;r++)for(let o=0;o<s;o++){const l=new rd(e,{name:n.groupName,props:ue.fromObject(Object.assign({},n.cellConfig(o,r))),viewProps:en.create()});this.cellCs_.push(l),this.cellValues_.push(n.cellConfig(o,r).value)}this.value=n.value,_t(this.value,r=>{const o=this.findCellByValue(r);o&&(o.view.inputElement.checked=!0)}),this.viewProps=en.create(),this.view=new uh(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${s}, 1fr)`,this.cellCs_.forEach(r=>{r.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(r.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(s=>s===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,s=this.cellCs_.findIndex(i=>i.view.inputElement===n);s<0||(this.value.rawValue=this.cellValues_[s])}}const HC=function(){return Re({id:"radiogrid",type:"blade",accept(t){const e=Ae(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=Le(t.params.value);return new Ji(t.document,{blade:t.blade,props:ue.fromObject({label:t.params.label}),value:e,valueController:new tr(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof Ji)||!(t.controller.valueController instanceof tr)?null:new sd(t.controller)}})}();function ca(t){return Re({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const s=Ae(n,i=>({cells:i.required.function,groupName:i.required.string,size:i.required.array(i.required.number),view:i.required.constant("radiogrid")}));return s?{initialValue:e,params:s}:null},binding:t.binding,controller:e=>new tr(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const GC=ca({isType:t=>typeof t=="number",binding:{reader:t=>Ol,writer:t=>Pn}}),WC=ca({isType:t=>typeof t=="string",binding:{reader:t=>Yl,writer:t=>Pn}}),YC=ca({isType:t=>typeof t=="boolean",binding:{reader:t=>Wl,writer:t=>Pn}}),XC="essentials",ZC='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',JC=[TC,jC,zC,qC,HC,YC,GC,WC],QC=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:Dh,ButtonGridApi:Fh,ButtonGridController:Bh,CubicBezier:yn,CubicBezierApi:jh,CubicBezierAssembly:oa,CubicBezierController:Oo,CubicBezierGraphController:qh,CubicBezierGraphView:Kh,CubicBezierPickerController:Hh,CubicBezierPickerView:zh,CubicBezierPreviewView:Uh,CubicBezierView:Nh,FpsGraphBladeApi:Gh,FpsGraphController:Xh,FpsView:Yh,Fpswatch:Wh,Interval:ut,IntervalAssembly:la,IntervalConstraint:aa,RadioCellApi:td,RadioController:rd,RadioGridApi:sd,RadioGridController:tr,RadioView:id,RangeSliderController:Qh,RangeSliderTextController:ed,RangeSliderTextView:Zh,RangeSliderView:Jh,TpRadioGridChangeEvent:nd,css:ZC,id:XC,plugins:JC},Symbol.toStringTag,{value:"Module"}));/*!
* v-tweakpane v0.3.2
* (c) 2024 Vinayak Kulkarni
* @license MIT
*/const ey={class:"w-full h-full"},ty=Wo({__name:"VTweakpane",props:{pane:{}},emits:["on-pane-created"],setup(t,{emit:e}){const n=t,s=e,i=uo(null),r=uo(null);return ur(()=>{du(()=>{i.value instanceof Element&&(r.value=new Jw({container:i.value,title:n.pane.title,expanded:n.pane.expanded}),r.value.registerPlugin(QC),s("on-pane-created",r.value))})}),(o,l)=>(Gs(),Ui("main",ey,[Jo("div",{ref_key:"el",ref:i},null,512)]))}}),ny=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},sy=ny(ty,[["__scopeId","data-v-29b6d810"]]),k={radius:Math.PI*2,display:{styles:["Still","StraightLine","Rise","Bounce","Speed","Drop","Crazy","Confetti","Throw","TheCube"],kappa:{styles:{Burst:{},Fireworks:{},Spiral:{},Pyramid:{},SmallPyramid:{},Fountain:{},Stampede:{},Confetti:{},Conga:{},TheCube:{size:8/10,center:!0,speed:5,faces:!1},Text:{message:["HYPE!"],time:3}},conga:{time:5}}},emote:{time:5,max:0,queue:0,size:{ratio:{normal:1/12,small:1/24},min:16,max:256},cube:{speed:5},animation:{fade:{in:8,out:8},zoom:{in:17,out:8}},in:{fade:!0,zoom:!0},out:{fade:!0,zoom:!0}}},D={display:{Still:{time:1},StraightLine:{time:1},Rise:{origin:{min:.8,max:1.1},time:1,wiggle:{delay:{min:0,max:3/25},min:2/5,max:1}},Bounce:{origin:{min:0,max:.2},time:1,velocity:{h:{min:3,max:9},v:{min:4,max:7},loss:.3},gravity:1},Speed:{origin:{min:.3,max:.7},time:1,delay:.1},Drop:{time:1},Crazy:{time:1,distance:7e3,squash:{width:2,height:.7,time:1/50}},Confetti:{time:1},Throw:{time:1,twist:7/50,toss:1/5,drop:4/5,dest:{h:{min:.3,max:.7},v:{min:.3,max:.7}}},TheCube:{time:1},Fountain:{time:1/2}},kappa:{Rise:{time:2},Speed:{time:2},Crazy:{time:2},Burst:{time:1.5,top:{min:1/4,max:3/4},left:{min:1/4,max:3/4}},Fireworks:{time:1,origin:{x:[1/2],y:[1]},dest:{x:[1/4,1/2,3/4],y:[1/3]},speed:{rocket:2/5,burst:1/50},quantity:{small:1/8,medium:3/4,large:1/8},radius:{base:2/3,small:1/3,medium:2/3,large:1},spread:12,delays:{small:2/25,large:1/10}},Spiral:{time:1/2,bulk:8,vectors:{min:40,max:60}},Pyramid:{time:1,show:{total:.8,min:75},pause:.2,hide:.01},SmallPyramid:{time:1,show:{total:.8,min:100},pause:.2,hide:.01},Fountain:{time:1.5,top:{min:3/20,max:2/5},left:{min:1/3,max:2/3}},Stampede:{time:1,speed:2/5,maxdensity:6,top:{min:.5,max:.5},height:3,bunch:{1:{min:1,max:5},2:8,4:{min:0,max:3}},pause:{1:4/5,2:2/5},smallSleep:{min:90,max:100}},Confetti:{time:1},Conga:{time:{show:2,hide:2},size:5/3,height:5/6,avoidMiddle:6},TheCube:{time:1},Text:{time:1,show:{total:.8,min:75},hide:.01}}},iy="https://cdn.7tv.app/emote/6548b7074789656a7be787e1/4x.webp",pn=[1,2,3,4,5,6,7,8,9,10,9,8,7,6,5,4,3,2,1],$i={A:[[0,1,1,1,1,1,0,0,0],[0,0,0,0,1,0,1,0,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,1,0,0],[0,1,1,1,1,1,0,0,0]],a:[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0],[0,1,0,0,0,0,0,0,0]],B:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,1,1,0,0]],b:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,0,0]],C:[[0,0,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,0,0,0,1,0,0]],c:[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0]],D:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,0,0]],d:[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,1,1,1,1,1,1,0]],E:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,0,0,0,1,0]],e:[[0,0,1,1,1,0,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,0,0,0,1,0,0,0,0]],F:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,0,0,0,1,0]],f:[[0,0,0,0,1,0,0,0,0],[0,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,1,0,0]],G:[[0,0,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,1,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,1,0,1,0,0]],g:[[1,0,0,1,1,0,0,0,0],[1,0,1,0,0,1,0,0,0],[1,0,1,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0]],H:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,1,1,1,1,1,1,1,0]],h:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,1,1,1,0,0,0,0,0]],I:[[0,1,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,1,0]],i:[[0,1,0,0,1,0,0,0,0],[0,1,1,1,1,0,1,0,0],[0,1,0,0,0,0,0,0,0]],J:[[0,0,1,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,1,0]],j:[[1,0,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0,0],[0,1,1,1,1,0,1,0,0]],K:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,0,0],[0,0,0,1,0,1,0,0,0],[0,0,1,0,0,0,1,0,0],[0,1,0,0,0,0,0,1,0]],k:[[0,1,1,1,1,1,1,1,0],[0,0,0,1,0,0,0,0,0],[0,0,1,0,1,0,0,0,0],[0,1,0,0,0,1,0,0,0]],L:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0]],l:[[0,1,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0]],M:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,0]],m:[[0,1,1,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0],[0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0]],N:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,1,0,0],[0,0,0,1,1,1,0,0,0],[0,0,1,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0]],n:[[0,1,1,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0]],O:[[0,0,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,0,0]],o:[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,0,0]],P:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,0,1,1,0,0]],p:[[1,1,1,1,1,0,0,0,0],[0,0,1,0,0,1,0,0,0],[0,0,1,0,0,1,0,0,0],[0,0,0,1,1,0,0,0,0]],Q:[[0,0,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,0,0,0,0,1,0],[1,1,0,1,1,1,1,0,0]],q:[[0,0,0,1,1,0,0,0,0],[0,0,1,0,0,1,0,0,0],[0,0,1,0,0,1,0,0,0],[1,1,1,1,1,0,0,0,0]],R:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,1,1,0,0,1,0],[0,0,1,0,1,0,0,1,0],[0,1,0,0,0,1,1,0,0]],r:[[0,1,1,1,1,1,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0,0]],S:[[0,0,1,0,0,1,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,0,1,0,0]],s:[[0,1,0,0,1,0,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,0,1,0,0,1,0,0,0]],T:[[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0]],t:[[0,0,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0,0],[0,0,1,1,1,1,1,1,0],[0,1,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0,0]],U:[[0,0,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,0]],u:[[0,0,1,1,1,1,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,1,1,1,1,0,0,0]],V:[[0,0,0,0,1,1,1,1,0],[0,0,1,1,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0],[0,0,0,0,1,1,1,1,0]],v:[[0,0,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0],[0,0,0,0,1,1,0,0,0]],W:[[0,0,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,0]],w:[[0,0,1,1,1,1,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0,0]],X:[[0,1,1,0,0,0,1,1,0],[0,0,0,1,0,1,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,1,0,1,0,0,0],[0,1,1,0,0,0,1,1,0]],x:[[0,1,0,0,0,1,0,0,0],[0,0,1,0,1,0,0,0,0],[0,0,0,1,0,0,0,0,0],[0,0,1,0,1,0,0,0,0],[0,1,0,0,0,1,0,0,0]],Y:[[0,0,0,0,0,0,1,1,0],[0,0,0,0,1,1,0,0,0],[0,1,1,1,0,0,0,0,0],[0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,1,1,0]],y:[[1,0,0,1,1,1,0,0,0],[1,0,1,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,0],[0,1,1,1,1,1,0,0,0]],Z:[[0,1,1,0,0,0,0,1,0],[0,1,0,1,0,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,0,1,0,1,0],[0,1,0,0,0,0,1,1,0]],z:[[0,1,0,0,0,1,0,0,0],[0,1,1,0,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,0,1,1,0,0,0],[0,1,0,0,0,1,0,0,0]],1:[[0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0]],2:[[0,1,1,0,0,0,1,0,0],[0,1,0,1,0,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,0,1,0,1,0],[0,1,0,0,0,0,1,0,0]],3:[[0,0,1,0,0,0,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,1,1,0,0]],4:[[0,0,0,1,1,0,0,0,0],[0,0,0,1,0,1,1,1,0],[0,0,0,1,0,0,0,0,0],[0,1,1,1,1,1,1,1,0],[0,0,0,1,0,0,0,0,0]],5:[[0,0,1,0,0,1,1,1,0],[0,1,0,0,0,1,0,1,0],[0,1,0,0,0,1,0,1,0],[0,0,1,1,1,0,0,1,0]],6:[[0,0,1,1,1,1,0,0,0],[0,1,0,0,1,0,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,0,0,0,0]],7:[[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0],[0,1,1,1,0,0,0,1,0],[0,0,0,0,1,1,0,1,0],[0,0,0,0,0,0,1,1,0]],8:[[0,0,1,1,0,1,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,1,1,0,0]],9:[[0,0,0,0,0,1,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,0,1,0,0,1,0],[0,0,0,1,1,1,1,0,0]],0:[[0,0,1,1,1,1,1,0,0],[0,1,1,0,0,0,0,1,0],[0,1,0,1,1,1,0,1,0],[0,1,0,0,0,0,1,1,0],[0,0,1,1,1,1,1,0,0]],">":[[0,1,0,0,0,0,0,1,0],[0,0,1,0,0,0,1,0,0],[0,0,0,1,0,1,0,0,0],[0,0,0,0,1,0,0,0,0]],"<":[[0,0,0,0,1,0,0,0,0],[0,0,0,1,0,1,0,0,0],[0,0,1,0,0,0,1,0,0],[0,1,0,0,0,0,0,1,0]],":":[[0,0,1,0,0,1,0,0,0]],".":[[0,1,0,0,0,0,0,0,0]],",":[[1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0]],"'":[[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,1]],"-":[[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0]],_:[[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0]],"+":[[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0]],"=":[[0,0,0,1,0,1,0,0,0],[0,0,0,1,0,1,0,0,0],[0,0,0,1,0,1,0,0,0]],"!":[[0,0,0,0,0,1,1,0,0],[0,1,0,1,1,1,1,1,0],[0,0,0,0,0,1,1,0,0]],"@":[[0,0,1,1,1,1,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0],[0,1,0,0,1,1,1,0,0]],"#":[[0,0,0,0,1,0,1,0,0],[0,0,0,1,1,1,1,1,0],[0,0,0,0,1,0,1,0,0],[0,0,0,1,1,1,1,1,0],[0,0,0,0,1,0,1,0,0]],$:[[0,0,1,0,0,1,1,0,0],[0,1,0,0,1,0,0,1,0],[1,1,1,1,1,1,1,1,1],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,0,1,0,0]],"":[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[1,1,1,1,1,1,1,0,0],[0,1,0,0,0,1,0,0,0]],"":[[0,0,0,1,0,1,0,0,0],[0,0,1,1,1,1,1,0,0],[0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0],[0,1,0,0,0,0,0,1,0]],"":[[0,1,0,0,1,0,1,0,0],[0,1,1,1,1,1,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,0,0,1,0,0]],"":[[0,0,0,0,1,0,1,1,0],[0,0,1,0,1,1,0,0,0],[0,1,1,1,1,0,0,0,0],[0,0,1,0,1,1,0,0,0],[0,0,0,0,1,0,1,1,0]],"%":[[0,1,0,0,0,0,1,1,0],[0,0,1,1,0,0,1,1,0],[0,0,0,0,1,0,0,0,0],[0,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,0,1,0]],"?":[[0,0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,1,0],[0,1,0,1,1,0,0,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,0,1,1,0,0]]},f=function(){const t=["__proto__","constructor","prototype"];function e(F){if(typeof F=="object"&&F!==null){if(typeof Object.getPrototypeOf=="function"){const j=Object.getPrototypeOf(F);return j===Object.prototype||j===null}return Object.prototype.toString.call(F)==="[object Object]"}return!1}function n(...F){return F.reduce((j,z)=>(Object.keys(z).forEach(C=>{t.includes(C)||(Array.isArray(j[C])&&Array.isArray(z[C])?j[C]=z[C]:e(j[C])&&e(z[C])?j[C]=n(j[C],z[C]):j[C]=z[C])}),j),{})}function s(F=1){return new Promise(function(j){if(F<1){j(!1);return}let z=0;function C(){if(z++,z<F){requestAnimationFrame(C);return}j(!0)}requestAnimationFrame(C)})}function i(F,j=!1){j===!1&&(j=Math.floor(k.emote.time*1e3));const C=Math.floor(j/f.msPerFrame.value)/F;return C>1?{f:Math.ceil(C),ct:1}:{f:1,ct:Math.ceil(1/C)}}function r(F){return F<f.msPerFrame.value?s():new Promise(j=>{let z=0;function C(J){if(z===0){z=J,requestAnimationFrame(C);return}else if(J-z<F){requestAnimationFrame(C);return}j(!0)}requestAnimationFrame(C)})}function o(F,j,z,C,J,te,X,ae){const ve=Math.floor(F+C*Math.cos(z)),xe=Math.floor(j+C*Math.sin(z)),re=Math.tan(z);let le=Number.MAX_SAFE_INTEGER,oe=0,S=Number.MAX_SAFE_INTEGER,$=0;if(ve<J?le=F-(oe=J):ve>X&&(le=(oe=X)-F),xe<te?S=j-($=te):xe>ae&&(S=($=ae)-j),$===0&&oe===0)return!0;let x=$,y=oe;return le>S?y=Math.floor((x-j)/re+F):x=Math.floor((y-F)*re+j),Math.sqrt(Math.abs(F-y)**2+Math.abs(j-x)**2)>Math.ceil(C/2)}function l(F,j){F.alt="",F.onload=function(){F.onerror=null,F.onload=null},F.onerror=function(){F.onerror=null,F.onload=null,F.src=iy},F.src=j}function a(F,j,z,C,J,te){let X="";return F.length>0&&(X+=" animation-name: "+F.join()+";",X+=" animation-delay: "+j.join()+";",X+=" animation-duration: "+z.join()+";",X+=" animation-timing-function: "+C.join()+";",X+=" animation-fill-mode: "+J.join()+";",X+=" animation-iteration-count: "+te.join()+";"),F.includes("fadeIn")&&(X+=" opacity: 0;"),X}function h(F,j,z,C,J,te,X=!0,ae=!0,ve=!0,xe=!0,re=!1){re===!1&&(re=Math.floor(k.emote.time*1e3));const le=k.emote.animation.fade.in/100,oe=k.emote.animation.fade.out/100,S=k.emote.animation.zoom.in/100,$=k.emote.animation.zoom.out/100;return X&&(F.push("fadeIn"),j.push("0s"),z.push(Math.floor(re*le)+"ms"),C.push("ease-in"),J.push("forwards"),te.push("1")),ae&&(F.push("zoomIn"),j.push("0s"),z.push(Math.floor(re*S)+"ms"),C.push("linear"),J.push("forwards"),te.push("1")),ve?(F.push("fadeOut"),j.push(Math.floor(re-re*oe)+"ms"),z.push(Math.floor(re*oe)+"ms"),C.push("ease-out"),J.push("forwards"),te.push("1")):(F.push("noFadeOut"),j.push(re-50+"ms"),z.push("50ms"),C.push("ease-out"),J.push("forwards"),te.push("1")),xe&&(F.push("zoomOut"),j.push(Math.floor(re-re*$)+"ms"),z.push(Math.floor(re*$)+"ms"),C.push("linear"),J.push("forwards"),te.push("1")),a(F,j,z,C,J,te)}function p(F){const j=new Uint32Array(1);crypto.getRandomValues(j);const z=j[0]/4294967295;return F===void 0?z:F<1?z*F:Math.floor(z*F)}function d(F){return f.random(F.max-F.min)+F.min}function L(F){const j=[];for(let J=1,te=arguments.length;J<te;J++)j.push(arguments[J]);let z=!1;function C(){if(z===!1){z=!0,requestAnimationFrame(C);return}F(...j)}requestAnimationFrame(C)}const H=function(){let F,j=0;const z=[];function C(){H.value===0&&requestAnimationFrame(te)}function J(){F!==void 0&&(cancelAnimationFrame(F),F=void 0)}function te(X){if(j!==0&&z.push(X-j),z.length>2&&(H.value=z.reduce((ae,ve)=>ae+ve)/z.length),z.length>300){H.value=Math.round(H.value*1e3)/1e3;return}j=X,F=requestAnimationFrame(te)}return{start:C,stop:J,value:0}}();return{deepMerge:n,framePause:s,countEstimatedTime:i,sleep:r,safePoints:o,setImgSrc:l,styleEmote:h,styleEmoteString:a,random:p,randomFromRange:d,doNextFrame:L,msPerFrame:H}}();function ry(t){let e=0,n=0;function s(){const d=t.getBoundingClientRect();return{height:d.height,width:d.width}}let i=s();const r=function(){const d={};let L=!1;function H(){if(L===!1)return;clearTimeout(L),L=!1;let j=!0;const z=new Date().getTime();for(const C in d){if(!d.hasOwnProperty(C))continue;j=!1;const J=d[C].img,te=d[C].end,X=d[C].dec;if(d[C].space){const ae=J.getBoundingClientRect();if(te>z&&ae.bottom>0&&ae.right>0&&ae.top<i.height&&ae.left<i.width)continue}else if(te>z)continue;delete d[C],J.parentNode!==null&&t.removeChild(J),X===!0?e--:X!==!1&&!isNaN(X)&&(e-=X)}j||(L=setTimeout(H,500))}function F(j,z=!0,C=!0,J=!1){J===!1&&(J=Math.floor(k.emote.time*1e3));let te=0;do te++;while(d.hasOwnProperty(te));d[te]={img:j,space:z,dec:C,end:new Date().getTime()+J},L===!1&&(L=setTimeout(H,500))}return{hook:F}}(),o=function(){const d=[];let L=!1;const H=function(){function z(S,$,x,y,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;let b=y;S.width!==void 0&&S.height!==void 0&&(b=S.width/S.height*y);const m=f.random($-b);let P="top: "+f.random(x-y)+"px;";P+=" left: "+m+"px;",P+=" --emote-height: "+y+"px;",P+=" --emote-width: "+b+"px;";const M=Math.floor(k.emote.time*1e3*D.display.Still.time);if(P+=f.styleEmote([],[],[],[],[],[],k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,M),a(v,S.url,{style:P},!1,{space:!1,time:M}),S.hasOwnProperty("zwe"))for(let T=0,g=S.zwe.length;T<g;T++)a(v,S.zwe[T].url,{style:P},!1,{space:!1,time:M})}function C(S,$,x,y,v=!1,b=!1,m=0){if(m===0&&(m=new Date().getTime()),n>m)return;let _=y;S.width!==void 0&&S.height!==void 0&&(_=S.width/S.height*y);const P=Math.ceil(y/2),M=Math.ceil(_/2);let T=v;T===!1&&(T=f.random($)-M);let g=b;g===!1&&(g=f.random(x)-P);const B=Math.min($,x)*(f.random()+1);let R=f.random()*k.radius;if(!v&&!b){const Z=y*-1,W=_*-1;for(;!f.safePoints(T,g,R,B,W,Z,$,x);)R=f.random()*k.radius}const A=Math.floor(T+B*Math.cos(R)),U=Math.floor(g+B*Math.sin(R));let N="--emote-height: "+y+"px;";N+=" --emote-width: "+_+"px;";const I=Math.floor(k.emote.time*1e3*D.display.StraightLine.time);if(N+=" transform: translate("+T+"px, "+g+"px);",N+=f.styleEmote([],[],[],[],[],[],k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,I),a(m,S.url,{style:N,classes:["etStraightLine"]},!1,{time:I},{x:A,y:U}),S.hasOwnProperty("zwe"))for(let Z=0,W=S.zwe.length;Z<W;Z++)a(m,S.zwe[Z].url,{style:N,classes:["etStraightLine"]},!1,{time:I},{x:A,y:U})}function J(S,$,x,y,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;let b=y;S.width!==void 0&&S.height!==void 0&&(b=S.width/S.height*y);const m=Math.ceil(b/2),_=f.random($)-m,P=Math.floor(x*f.randomFromRange(D.display.Rise.origin));let M="left: "+_+"px;";M+=" --emote-height: "+y+"px;",M+=" --emote-width: "+b+"px;",k.emote.out.fade||k.emote.out.zoom?M+=' offset-path: path("M 0 '+P+" L 0 "+Math.floor(P*.05)+'") ;':M+=' offset-path: path("M 0 '+P+" L 0 -"+y+'") ;';const T=[],g=[],B=[],R=[],A=[],U=[];f.random(2)===0?T.push("wiggleL"):T.push("wiggleR");const N=Math.floor(k.emote.time*1e3*D.display.Rise.time),I=Math.floor(N*f.randomFromRange(D.display.Rise.wiggle.delay));g.push(I+"ms");const Z=Math.floor(N*f.randomFromRange(D.display.Rise.wiggle));if(B.push(Z+"ms"),R.push("ease-in-out"),A.push("both"),U.push("infinite"),T.push("offsetPath"),g.push("0s"),B.push(N+"ms"),R.push("linear"),A.push("forwards"),U.push("1"),M+=f.styleEmote(T,g,B,R,A,U,k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,N),a(v,S.url,{style:M},!1,{space:!1,time:N}),S.hasOwnProperty("zwe"))for(let W=0,se=S.zwe.length;W<se;W++)a(v,S.zwe[W].url,{style:M},!1,{space:!1,time:N})}const te=function(){function S(x,y,v,b,m=0){if(m===0&&(m=new Date().getTime()),n>m)return;let _=b;x.width!==void 0&&x.height!==void 0&&(_=x.width/x.height*b);const P=Math.ceil(_/2),M=Math.ceil(y/2),T=Math.floor(f.random(y)-P),g=Math.floor(v*f.randomFromRange(D.display.Bounce.origin)),B=Math.floor(k.emote.time*1e3*D.display.Bounce.time),R=B/300/(16+2/3);let A=f.randomFromRange(D.display.Bounce.velocity.h);const U=f.randomFromRange(D.display.Bounce.velocity.v);T+P>M&&(A=-1*A);let N="--emote-height: "+b+"px;";N+=" --emote-width: "+_+"px;",N+=f.styleEmote([],[],[],[],[],[],k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,B),N+=" transform: translate("+T+"px, "+g+"px);";const I=T,Z=g,W=[];if(W.push(a(m,x.url,{style:N},!0,{time:B})),x.hasOwnProperty("zwe"))for(let se=0,c=x.zwe.length;se<c;se++)W.push(a(m,x.zwe[se].url,{style:N},!0,{time:B}));requestAnimationFrame(function(se){$(m,W,I,Z,A,U,R,v,b,se,se)})}function $(x,y,v,b,m,_,P,M,T,g,B){if(n>x||y[0].parentElement===null)return;let R=1;g===0||(R=Math.max(1,Math.floor((B-g)/16))),g=B;for(let A=0;A<R;A++){v+=m/P,b+=_/P,_+=D.display.Bounce.gravity/P;const U=M-T;b>=U&&(b=U,_*=-1*(1-D.display.Bounce.velocity.loss),_=Math.floor(_))}for(let A=0,U=y.length;A<U;A++)y[A].style.transform="translate("+v+"px, "+b+"px)";requestAnimationFrame(function(A){$(x,y,v,b,m,_,P,M,T,g,A)})}return S}();function X(S,$,x,y,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;let b=y;S.width!==void 0&&S.height!==void 0&&(b=S.width/S.height*y);const m=Math.ceil(b/2),_=Math.ceil($/2),P=f.random($)-m;let T="top: "+Math.floor(x*f.randomFromRange(D.display.Speed.origin))+"px;";T+=" left: "+P+"px;",T+=" --emote-height: "+y+"px;",T+=" --emote-width: "+b+"px;";const g=[],B=[],R=[],A=[],U=[],N=[],I={};P+m>_?(I.origin="right",g.push("speedL")):(I.origin="left",g.push("speedR"));const Z=Math.floor(k.emote.time*1e3*D.display.Speed.time),W=Math.floor(Z*D.display.Speed.delay);if(B.push(W+"ms"),R.push(Z-W+"ms"),A.push("ease-in"),U.push("forwards"),N.push("1"),T+=f.styleEmote(g,B,R,A,U,N,k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,Z),a(v,S.url,{style:T,dataset:I},!1,{time:Z}),S.hasOwnProperty("zwe"))for(let se=0,c=S.zwe.length;se<c;se++)a(v,S.zwe[se].url,{style:T,dataset:I},!1,{time:Z})}function ae(S,$,x,y,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;let b=y;S.width!==void 0&&S.height!==void 0&&(b=S.width/S.height*y);const m=Math.ceil(b/2);let P="left: "+(f.random($)-m)+"px;";P+=" --emote-height: "+y+"px;",P+=" --emote-width: "+b+"px;";const M=[],T=[],g=[],B=[],R=[],A=[],U={};f.random(2)===0?(U.origin="topleft",M.push("dropL")):(U.origin="topright",M.push("dropR")),T.push("0s");const N=Math.floor(k.emote.time*1e3*D.display.Drop.time);if(g.push(N+"ms"),B.push("ease-in"),R.push("forwards"),A.push("1"),P+=f.styleEmote(M,T,g,B,R,A,!1,!1,k.emote.out.fade,k.emote.out.zoom,N),a(v,S.url,{style:P,dataset:U},!1,{space:!1,time:N}),S.hasOwnProperty("zwe"))for(let I=0,Z=S.zwe.length;I<Z;I++)a(v,S.zwe[I].url,{style:P,dataset:U},!1,{space:!1,time:N})}const ve=function(){function S(v,b,m,_,P=0){if(P===0&&(P=new Date().getTime()),n>P)return;let M=_;v.width!==void 0&&v.height!==void 0&&(M=v.width/v.height*_);const T=b-M,g=m-_,B=f.random(T-5)+10,R=f.random(g-5)+10;let A="top: "+R+"px;";A+=" left: "+B+"px;",A+=" --emote-height: "+_+"px;",A+=" --emote-width: "+M+"px;";const U=[],N=Math.floor(k.emote.time*1e3*D.display.Crazy.time),I=Math.sqrt(D.display.Crazy.distance**2/2)/N,Z={x:0,y:0};for(;Z.x===0&&Z.y===0;)Z.x=f.random()*(I*2)-I,Z.y=f.random()*(I*2)-I;const W={x:B,y:R,t:0};let se=0,c=0;const u=Math.floor(N*D.display.Crazy.squash.time*2);for(;c*u+W.t<N;){W.x+=Z.x,W.y+=Z.y,W.t+=1;let q=!1;W.x<=0?(W.x=0,Z.x*=-1,q=1):W.x>=T&&(W.x=T,Z.x*=-1,q=3),W.y<=0?(W.y=0,Z.y*=-1,q=2):W.y>=g&&(W.y=g,Z.y*=-1,q=4),q!==!1&&(c++,U.push({x:Math.floor(W.x),y:Math.floor(W.y),t:W.t-se,w:q}),se=W.t)}U.push({x:W.x,y:W.y,t:W.t-se,w:0}),A+=f.styleEmote([],[],[],[],[],[],k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,N);const w=[];if(w.push(a(P,v.url,{style:A},!0,{space:!1,time:N})),v.hasOwnProperty("zwe"))for(let q=0,Y=v.zwe.length;q<Y;q++)w.push(a(P,v.zwe[q].url,{style:A},!0,{space:!1,time:N}));const V=0,E=w.length,O=U.length;f.doNextFrame($,P,E,w,O,U,V)}function $(v,b,m,_,P,M){if(n>v||M>=_)return;const T=Math.floor(k.emote.time*1e3*D.display.Crazy.time*D.display.Crazy.squash.time);for(let g=0;g<b;g++)m[g].dataset.origin="center",m[g].dataset.squash="no",m[g].style.top=P[M].y+"px",m[g].style.left=P[M].x+"px",m[g].style.transition="top "+P[M].t+"ms linear, left "+P[M].t+"ms linear, transform "+T+"ms linear";M++,setTimeout(x,P[M-1].t,v,b,m,_,P,M)}function x(v,b,m,_,P,M){if(n>v)return;const T=Math.floor(k.emote.time*1e3*D.display.Crazy.time*D.display.Crazy.squash.time);for(let g=0;g<b;g++)switch(P[M-1].w){case 1:m[g].dataset.origin="left",m[g].dataset.squash="horizontal";break;case 2:m[g].dataset.origin="top",m[g].dataset.squash="vertical";break;case 3:m[g].dataset.origin="right",m[g].dataset.squash="horizontal";break;case 4:m[g].dataset.origin="bottom",m[g].dataset.squash="vertical";break}setTimeout(y,T,v,b,m,_,P,M)}function y(v,b,m,_,P,M){if(n>v)return;const T=Math.floor(k.emote.time*1e3*D.display.Crazy.time*D.display.Crazy.squash.time);for(let g=0;g<b;g++)m[g].dataset.squash="no";setTimeout($,T,v,b,m,_,P,M)}return S}();function xe(S,$,x,y,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;let b=y;S.width!==void 0&&S.height!==void 0&&(b=S.width/S.height*y);const m=Math.ceil(b/2);let P="left: "+(f.random($)-m)+"px;";P+=" --emote-height: "+y+"px;",P+=" --emote-width: "+b+"px;";const M=[],T=[],g=[],B=[],R=[],A=[];switch(f.random(3)){case 0:M.push("confettiA");break;case 1:M.push("confettiB");break;case 2:M.push("confettiC");break}T.push("0s");const U=Math.floor(k.emote.time*1e3*D.display.Confetti.time);if(g.push(U+"ms"),B.push("linear"),R.push("forwards"),A.push("1"),P+=f.styleEmote(M,T,g,B,R,A,!1,!1,k.emote.out.fade,!1,U),a(v,S.url,{style:P},!1,{space:!1,time:U}),S.hasOwnProperty("zwe"))for(let N=0,I=S.zwe.length;N<I;N++)a(v,S.zwe[N].url,{style:P},!1,{space:!1,time:U})}const re=function(){function S(y,v,b,m,_=0){if(_===0&&(_=new Date().getTime()),n>_)return;let P=m;y.width!==void 0&&y.height!==void 0&&(P=y.width/y.height*m);const M=v-P,T=b-m,g=f.random(2)===0?P*-1:v,B=f.random(b+m)-m,R=Math.floor(M*f.randomFromRange(D.display.Throw.dest.h)),A=Math.floor(T*f.randomFromRange(D.display.Throw.dest.v)),U=f.random()*m,N=Math.floor(k.emote.time*1e3*D.display.Throw.time),I=Math.floor(N*D.display.Throw.toss),Z=Math.floor(N*D.display.Throw.drop);let W="--emote-height: "+m+"px;";W+=" --emote-width: "+P+"px;",W+=" transform: translate("+g+"px, "+B+"px);";let se="--emote-height: "+m+"px;";se+=" --emote-width: "+P+"px;";let c="360";g>0&&(c="-360"),se+=" transform: translate("+R+"px, "+(b-U)+"px) rotate("+c+"deg);";const u=[],w=[],V=[],E=[],O=[],q=[];if(k.emote.out.fade){const G=k.emote.animation.fade.out/100,K=Z*G;u.push("fadeOut"),w.push(Math.floor(Z-K)+"ms"),V.push(Math.floor(K)+"ms"),E.push("ease-out"),O.push("forwards"),q.push("1")}else u.push("noFadeOut"),w.push(Z-50+"ms"),V.push("50ms"),E.push("ease-out"),O.push("forwards"),q.push("1");if(k.emote.out.zoom){const G=k.emote.animation.zoom.out/100,K=Z*G;u.push("zoomOut"),w.push(Math.floor(Z-K)+"ms"),V.push(Math.floor(K)+"ms"),E.push("linear"),O.push("forwards"),q.push("1")}se+=f.styleEmoteString(u,w,V,E,O,q,N);const Y=[];if(Y.push(a(_,y.url,{style:W,classes:["etThrowTwist"]},!0,{space:!1,time:N})),y.hasOwnProperty("zwe"))for(let G=0,K=y.zwe.length;G<K;G++)Y.push(a(_,y.zwe[G].url,{style:W,classes:["etThrowTwist"]},!0,{space:!1,time:N}));f.doNextFrame($,_,Y,R,A),setTimeout(x,I,_,Y,se)}function $(y,v,b,m){if(!(n>y))for(let _=0,P=v.length;_<P;_++)v[_].style.transform="translate("+b+"px, "+m+"px)"}function x(y,v,b){if(!(n>y))for(let m=0,_=v.length;m<_;m++)v[m].classList.replace("etThrowTwist","etThrowDrop"),v[m].setAttribute("style",b)}return S}(),le=function(){function S(x,y,v,b,m=0){if(m===0&&(m=new Date().getTime()),n>m)return;const _=document.createElement("div");_.setAttribute("class","scene cube");const P=Math.ceil(b/2),M=P*-1,T=Math.floor(k.emote.time*1e3*D.display.TheCube.time),g=document.createElement("div");if(g.setAttribute("class","cube"),g.setAttribute("style","transform: translateZ("+M+"px);"),!x.hasOwnProperty("zwe")||x.zwe.length===0){const se=document.createElement("img");f.setImgSrc(se,x.url),se.dataset.face="front",g.appendChild(se);const c=document.createElement("img");f.setImgSrc(c,x.url),c.dataset.face="back",g.appendChild(c);const u=document.createElement("img");f.setImgSrc(u,x.url),u.dataset.face="right",g.appendChild(u);const w=document.createElement("img");f.setImgSrc(w,x.url),w.dataset.face="left",g.appendChild(w);const V=document.createElement("img");f.setImgSrc(V,x.url),V.dataset.face="top",g.appendChild(V);const E=document.createElement("img");f.setImgSrc(E,x.url),E.dataset.face="bottom",g.appendChild(E)}else{const se=x.zwe.length,c=document.createElement("div");c.dataset.face="front";const u=document.createElement("img");f.setImgSrc(u,x.url),c.appendChild(u);for(let Q=0;Q<se;Q++){const ne=document.createElement("img");f.setImgSrc(ne,x.zwe[Q].url),c.appendChild(ne)}g.appendChild(c);const w=document.createElement("div");w.dataset.face="back";const V=document.createElement("img");f.setImgSrc(V,x.url),w.appendChild(V);for(let Q=0;Q<se;Q++){const ne=document.createElement("img");f.setImgSrc(ne,x.zwe[Q].url),w.appendChild(ne)}g.appendChild(w);const E=document.createElement("div");E.dataset.face="right";const O=document.createElement("img");f.setImgSrc(O,x.url),E.appendChild(O);for(let Q=0;Q<se;Q++){const ne=document.createElement("img");f.setImgSrc(ne,x.zwe[Q].url),E.appendChild(ne)}g.appendChild(E);const q=document.createElement("div");q.dataset.face="left";const Y=document.createElement("img");f.setImgSrc(Y,x.url),q.appendChild(Y);for(let Q=0;Q<se;Q++){const ne=document.createElement("img");f.setImgSrc(ne,x.zwe[Q].url),q.appendChild(ne)}g.appendChild(q);const G=document.createElement("div");G.dataset.face="top";const K=document.createElement("img");f.setImgSrc(K,x.url),G.appendChild(K);for(let Q=0;Q<se;Q++){const ne=document.createElement("img");f.setImgSrc(ne,x.zwe[Q].url),G.appendChild(ne)}g.appendChild(G);const ie=document.createElement("div");ie.dataset.face="bottom";const ee=document.createElement("img");f.setImgSrc(ee,x.url),ie.appendChild(ee);for(let Q=0;Q<se;Q++){const ne=document.createElement("img");f.setImgSrc(ne,x.zwe[Q].url),ie.appendChild(ne)}g.appendChild(ie)}_.appendChild(g);const B=f.random(y)-P,R=f.random(v)-P,A=Math.min(y,v)*(f.random()+1);let U=f.random()*k.radius;const N=b*-1;for(;!f.safePoints(B,R,U,A,N,N,y,v);)U=f.random()*k.radius;const I=Math.floor(B+A*Math.cos(U)),Z=Math.floor(R+A*Math.sin(U));let W="--emote-height: "+b+"px;";W+=" --emote-width: "+b+"px;",W+=" --cube-depth: "+P+"px;",W+=" perspective: "+b*3+"px;",W+=" transform: translate("+B+"px, "+R+"px);",W+=f.styleEmote([],[],[],[],[],[],k.emote.in.fade,!1,k.emote.out.fade,!1,T),_.setAttribute("style",W),e+=6,t.appendChild(_),r.hook(_,!0,6,T),f.doNextFrame($,m,g,_,I,Z,b)}function $(x,y,v,b,m,_){if(n>x)return;const P=Math.ceil(_/2)*-1;let M=0,T=0;for(;Math.abs(M)+Math.abs(T)<45;)M=(360-f.random()*720)*k.emote.cube.speed,T=(360-f.random()*720)*k.emote.cube.speed;y.style.transform="translateZ("+P+"px) rotateX("+M+"deg) rotateY("+T+"deg)",v.style.transform="translate("+b+"px, "+m+"px)"}return S}();function oe(S,$,x,y,v,b,m=0){if(m===0&&(m=new Date().getTime()),n>m)return;const _=Math.floor(k.emote.time*1e3*D.display.Fountain.time);let P=y;S.width!==void 0&&S.height!==void 0&&(P=S.width/S.height*y);const M=$-P,T=x-y;let g=v;g===!1&&(g=Math.floor(f.random()*(M*.33)+M*.33));let B;f.random(2)===0?B=g-f.random(M*.2):B=g+f.random(M*.2);let R="--emote-height: "+y+"px;";R+=" --emote-width: "+P+"px;",R+=" transform: translateX("+g+"px);",R+=' offset-path: path("M 0 '+x+" L 0 "+Math.floor(b*x+f.random(T/2))+" L 0 "+(x+y)+'");';const A=[],U=[],N=[],I=[],Z=[],W=[];if(A.push("offsetPath"),U.push("0s"),N.push(_+"ms"),I.push("cubic-bezier(0, 0.9, 1, 0.15)"),Z.push("forwards"),W.push("1"),R+=f.styleEmoteString(A,U,N,I,Z,W,_),a(m,S.url,{style:R,classes:["etFountain"]},!1,{time:_,space:!1},{x:B}),S.hasOwnProperty("zwe"))for(let se=0,c=S.zwe.length;se<c;se++)a(m,S.zwe[se].url,{style:R,classes:["etFountain"]},!1,{time:_,space:!1},{x:B})}return{Still:z,StraightLine:C,Rise:J,Bounce:te,Speed:X,Drop:ae,Crazy:ve,Confetti:xe,Throw:re,TheCube:le,Fountain:oe}}();function F(z){const C=i.width,J=i.height,te=Math.max(k.emote.size.min,Math.min(k.emote.size.max,Math.floor(C*k.emote.size.ratio.normal),Math.floor(J*k.emote.size.ratio.normal)));t.style.setProperty("--height",J+"px"),t.style.setProperty("--width",C+"px");const X=k.display.styles[f.random(k.display.styles.length)];X!==void 0&&o.list[X](z,C,J,te)}function j(z){d.push(...z),L!==!1&&(clearTimeout(L),L=!1);const C=()=>L=setTimeout(()=>{j([])},500);if(k.emote.max>0&&e>=k.emote.max){C();return}let J=null;for(;(J=d.shift())!==void 0;)if(F(J),k.emote.max>0&&e>k.emote.max){k.emote.queue>0&&d.length>k.emote.queue&&d.splice(0,d.length-k.emote.queue),C();break}}return{showEmotes:j,list:H}}(),l=function(){const d=[],L=function(){return{Fireworks:function(){function re(S,$,x,y,v){const b=new Date().getTime();if(n>b)return;const m=S[f.random(S.length)];let _=y;m.width!==void 0&&m.height!==void 0&&(_=m.width/m.height*y);const P=Math.ceil(_/2),M=$*D.kappa.Fireworks.origin.x[f.random(D.kappa.Fireworks.origin.x.length)]-P,T=x*D.kappa.Fireworks.origin.y[f.random(D.kappa.Fireworks.origin.y.length)],g=$*D.kappa.Fireworks.dest.x[f.random(D.kappa.Fireworks.dest.x.length)],B=x*D.kappa.Fireworks.dest.y[f.random(D.kappa.Fireworks.dest.y.length)],R=Math.floor(k.emote.time*1e3*D.kappa.Fireworks.time),A=Math.floor(R*D.kappa.Fireworks.speed.rocket);let U="--emote-height: "+y+"px;";U+=" --emote-width: "+_+"px;",U+=" transform: translate("+M+"px, "+T+"px);";const N=[];if(e--,N.push(a(b,m.url,{style:U,classes:["ktFireworkRocket"]},!0,!1,{x:g-P,y:B})),m.hasOwnProperty("zwe"))for(let I=0,Z=m.zwe.length;I<Z;I++)N.push(a(b,m.zwe[I].url,{style:U,classes:["ktFireworkRocket"]},!0,!1,{x:g-P,y:B}));setTimeout(le,A,b,S,N,g,B,y,$,x,v)}async function le(S,$,x,y,v,b,m,_,P){if(n>S)return;for(let c=0,u=x.length;c<u;c++)t.removeChild(x[c]),e--;const M=Math.floor(k.emote.time*1e3*D.kappa.Fireworks.time),T=Math.floor(M*D.kappa.Fireworks.speed.burst),g=f.countEstimatedTime(P,T),B=Math.min(m,_)*D.kappa.Fireworks.radius.base,R=Math.max(3,Math.floor(P*D.kappa.Fireworks.quantity.small)),A=Math.floor(P*D.kappa.Fireworks.quantity.medium),U=Math.max(3,Math.floor(P*D.kappa.Fireworks.quantity.large)),N=$.length,I=B*D.kappa.Fireworks.radius.small;for(let c=0;c<R;c++){if(n>S)return;const u=$[f.random(N)];let w=b;u.width!==void 0&&u.height!==void 0&&(w=u.width/u.height*b);const V=f.random();if(e--,oe(S,u.url,y,v,w,b,I,V),u.hasOwnProperty("zwe"))for(let E=0,O=u.zwe.length;E<O;E++)oe(S,u.zwe[E].url,y,v,w,b,I,V);c%g.ct===g.ct-1&&await f.framePause(g.f)}await f.sleep(Math.floor(M*D.kappa.Fireworks.delays.small));const Z=B*D.kappa.Fireworks.radius.medium,W=Math.ceil(g.ct/D.kappa.Fireworks.spread);for(let c=0;c<A;c++){if(n>S)return;const u=$[f.random(N)];let w=b;u.width!==void 0&&u.height!==void 0&&(w=u.width/u.height*b);const V=f.random();if(e--,oe(S,u.url,y,v,w,b,Z,V),u.hasOwnProperty("zwe"))for(let E=0,O=u.zwe.length;E<O;E++)oe(S,u.zwe[E].url,y,v,w,b,Z,V);c%W===W-1&&await f.framePause()}await f.sleep(Math.floor(M*D.kappa.Fireworks.delays.large));const se=B*D.kappa.Fireworks.radius.large;for(let c=0;c<U;c++){if(n>S)return;const u=$[f.random(N)];let w=b;u.width!==void 0&&u.height!==void 0&&(w=u.width/u.height*b);const V=f.random();if(e--,oe(S,u.url,y,v,w,b,se,V),u.hasOwnProperty("zwe"))for(let E=0,O=u.zwe.length;E<O;E++)oe(S,u.zwe[E].url,y,v,w,b,se,V);c%g.ct===g.ct-1&&await f.framePause(g.f)}}function oe(S,$,x,y,v,b,m,_){if(n>S)return;const P=_*k.radius,M=Math.ceil(v/2),T=x-M,g=Math.floor(T+m*Math.cos(P)),B=Math.floor(y+m*Math.sin(P)),R=Math.floor(k.emote.time*1e3*D.kappa.Fireworks.time);let A="--emote-height: "+b+"px;";A+=" --emote-width: "+v+"px;",A+=" transform: translate("+T+"px, "+y+"px);",A+=f.styleEmote([],[],[],[],[],[],!0,!1,!0,!1,R),a(S,$,{style:A,classes:["ktFireworkSparkler"]},!1,{space:!1,time:R},{x:g,y:B})}return re}(),Spiral:function(){function re(S,$,x,y,v){const b=new Date().getTime();if(n>b)return;const m=f.random()*$,_=f.random(x-y),P=Math.min($,x);f.doNextFrame(le,b,S,m,_,y,P,v)}async function le(S,$,x,y,v,b,m){if(n>S)return;const _=k.radius/(f.randomFromRange(D.kappa.Spiral.vectors)+f.random()*2);let P=f.random()*k.radius;const M=f.random(2)===0,T=Math.floor(k.emote.time*1e3*D.kappa.Spiral.time),g=f.countEstimatedTime(m,T);g.ct>D.kappa.Spiral.bulk&&(g.ct=D.kappa.Spiral.bulk);for(let B=0;B<m;B++){if(n>S)return;M?(P-=_,P<=0&&(P+=k.radius)):(P+=_,P>=k.radius&&(P-=k.radius));const R=$[f.random($.length)];let A=v;R.width!==void 0&&R.height!==void 0&&(A=R.width/R.height*v);const U=Math.ceil(A/2);if(e--,oe(S,R.url,x-U,y,A,v,b,P),R.hasOwnProperty("zwe"))for(let N=0,I=R.zwe.length;N<I;N++)oe(S,R.zwe[N].url,x-U,y,A,v,b,P);B%g.ct===g.ct-1&&await f.framePause(g.f)}}function oe(S,$,x,y,v,b,m,_){if(n>S)return;const P=Math.floor(x+m*Math.cos(_)),M=Math.floor(y+m*Math.sin(_)),T=Math.floor(k.emote.time*1e3*D.kappa.Spiral.time);let g="--emote-height: "+b+"px;";g+=" --emote-width: "+v+"px;",g+=" transform: translate("+x+"px, "+y+"px);",g+=f.styleEmote([],[],[],[],[],[],!0,!1,!0,!1,T),a(S,$,{style:g,classes:["ktSpiral"]},!1,{space:!1,time:T},{x:P,y:M})}return re}(),Pyramid:function(){function re($,x,y){const v=new Date().getTime();if(n>v)return;const b=[];let m=0;const _=pn.length,P=x/_;for(let U=0;U<_;U++)b.push(0),m+=pn[U];const M=Math.floor(k.emote.time*1e3*D.kappa.Pyramid.time),T=M*D.kappa.Pyramid.show.total,g=Math.max(Math.floor(T/m),D.kappa.Pyramid.show.min),B=g*m,R=Math.floor(M*D.kappa.Pyramid.pause);let A=0;for(let U=0;U<m;U++){if(n>v)return;let N;do N=f.random(_);while(b[N]>=pn[N]);const I=$[f.random($.length)];if(le(v,I.url,N,A,P,y,b[N]+1,B+R),I.hasOwnProperty("zwe"))for(let Z=0,W=I.zwe.length;Z<W;Z++)e++,le(v,I.zwe[Z].url,N,A,P,y,b[N]+1,B+R);b[N]++,A+=g}}function le($,x,y,v,b,m,_,P){if(n>$)return;const M=document.createElement("img");M.setAttribute("class","emote ktPyramid"),f.setImgSrc(M,x);const T=Math.floor(b*y),g=-1*b,B=m-b*_;let R="top: 0px;";R+=" left: "+T+"px;",R+=" --emote-height: "+b+"px;",R+=" --emote-width: "+b+"px;",R+=" transform: translateY("+g+"px);",M.setAttribute("style",R),t.appendChild(M),setTimeout(S,Math.floor(v/10+P),$,M,m),setTimeout(oe,v,$,M,B)}function oe($,x,y){n>$||(x.style.transform="translateY("+y+"px)")}function S($,x,y){if(n>$)return;const v=Math.floor(k.emote.time*1e3*D.kappa.Pyramid.time),b=Math.floor(v*D.kappa.Pyramid.hide);x.classList.replace("ktPyramid","ktPyramidDrop"),x.style.transform="translateY("+y+"px)",r.hook(x,!1,!0,b)}return re}(),SmallPyramid:function(){function re($,x,y){const v=new Date().getTime();if(n>v)return;const b=[];let m=0;const _=pn.length,P=Math.min(x/_,Math.floor(x*k.emote.size.ratio.small),Math.floor(y*k.emote.size.ratio.small));for(let N=0;N<_;N++)b.push(0),m+=pn[N];const M=Math.floor(k.emote.time*1e3*D.kappa.SmallPyramid.time),T=M*D.kappa.SmallPyramid.show.total,g=Math.max(Math.floor(T/m),D.kappa.SmallPyramid.show.min),B=g*m,R=Math.floor(M*D.kappa.SmallPyramid.pause),A=f.random(x-P*_);let U=0;for(let N=0;N<m;N++){if(n>v)return;let I;do I=f.random(_);while(b[I]>=pn[I]);const Z=$[f.random($.length)];if(le(v,Z.url,A,I,U,P,y,b[I]+1,B+R),Z.hasOwnProperty("zwe"))for(let W=0,se=Z.zwe.length;W<se;W++)e++,le(v,Z.zwe[W].url,A,I,U,P,y,b[I]+1,B+R);b[I]++,U+=g}}function le($,x,y,v,b,m,_,P,M){if(n>$)return;const T=document.createElement("img");T.setAttribute("class","emote ktSmallPyramid"),f.setImgSrc(T,x);const g=y+m*v,B=-1*m,R=_-m*P;let A="top: 0px;";A+=" left: "+g+"px;",A+=" --emote-height: "+m+"px;",A+=" --emote-width: "+m+"px;",A+=" transform: translateY("+B+"px);",T.setAttribute("style",A),t.appendChild(T),setTimeout(S,Math.floor(b/10+M),$,T,_),setTimeout(oe,b,$,T,R)}function oe($,x,y){n>$||(x.style.transform="translateY("+y+"px)")}function S($,x,y){if(n>$)return;const v=Math.floor(k.emote.time*1e3*D.kappa.SmallPyramid.time),b=Math.floor(v*D.kappa.SmallPyramid.hide);x.classList.replace("ktSmallPyramid","ktSmallPyramidDrop"),x.style.transform="translateY("+y+"px)",r.hook(x,!1,!0,b)}return re}(),Stampede:function(){async function re($,x,y,v,b){const m=new Date().getTime();if(n>m)return;const _=v*D.kappa.Stampede.height,P=f.random(2)===0,M=f.random(y-_+v*D.kappa.Stampede.top.min+v*D.kappa.Stampede.top.max)+v*(-1*D.kappa.Stampede.top.min),T=f.randomFromRange(D.kappa.Stampede.bunch[1]),g=f.random(D.kappa.Stampede.bunch[2]-T)+T,B=f.randomFromRange(D.kappa.Stampede.bunch[4]);e+=T+g+b+B;const R=B>0,A=Math.floor(k.emote.time*1e3*D.kappa.Stampede.time),U=Math.floor(A*D.kappa.Stampede.speed),N=Math.floor(U*D.kappa.Stampede.pause[1]);let I=0;for(let se=0,c=$.length;se<c;se++){let u=v;$[se].width!==void 0&&$[se].height!==void 0&&(u=$[se].width/$[se].height*v),u>I&&(I=u)}if(await le(m,$,T,N,!1,M,_,P,x,v,I),n>m)return;const Z=Math.floor(U*D.kappa.Stampede.pause[2]);if(await le(m,$,g,Z,!1,M,_,P,x,v,I),n>m)return;const W=f.countEstimatedTime(b,A);W.ct>D.kappa.Stampede.maxdensity&&(W.ct=D.kappa.Stampede.maxdensity),await le(m,$,b,R,W,M,_,P,x,v,I),!(n>m)&&R&&await le(m,$,B,!1,!1,M,_,P,x,v,I)}async function le($,x,y,v,b,m,_,P,M,T,g){if(n>$)return;const B=[];for(let R=0;R<y;R++){if(n>$)return;const A=x[f.random(x.length)];let U=T;A.width!==void 0&&A.height!==void 0&&(U=A.width/A.height*T);const N=m+f.random(_);if(e--,B.push(oe($,A.url,N,P,M,U,T,g)),A.hasOwnProperty("zwe"))for(let I=0,Z=A.zwe.length;I<Z;I++)oe($,A.zwe[I].url,N,P,M,U,T,g);if(b===!1)await f.sleep(f.randomFromRange(D.kappa.Stampede.smallSleep));else if(R%b.ct===b.ct-1){let I=b.f;I===1?I=f.random(3):I*=f.random()*3/2,I!==0&&await f.framePause(I)}}if(v!==!1){if(v!==!0){await f.sleep(v);return}do{if(n>$)return;await f.sleep(100);for(let R=B.length-1;R>=0;R--)(B[R]===null||B[R].hasAttribute("deleted"))&&B.splice(R,1)}while(B.length>0)}}function oe($,x,y,v,b,m,_,P){if(n>$)return;const M=-2*P,T=Math.floor(k.emote.time*1e3*D.kappa.Stampede.time),g=Math.floor(T*D.kappa.Stampede.speed);let B="--emote-height: "+_+"px;";B+=" --emote-width: "+m+"px;",v?B+=" transform: translate("+b+"px, "+y+"px);":B+=" transform: translate("+M+"px, "+y+"px);",B+=f.styleEmoteString([],[],[],[],[],[]);let R;return v?R=a($,x,{style:B,classes:["ktStampede"]},!0,{space:!1,time:g},{x:M,y}):R=a($,x,{style:B,classes:["ktStampede"]},!0,{space:!1,time:g},{x:b,y}),setTimeout(S,g,$,R),R}function S($,x){n>$||x!==null&&(x.parentNode!==null&&t.removeChild(x),x.setAttribute("deleted",!0))}return re}(),Conga:function(){async function re($,x,y,v,b){const m=new Date().getTime();if(n>m)return;let _=0,P=!1;const M=Math.ceil(v*D.kappa.Conga.size),T=Math.floor(v*D.kappa.Conga.height),g=Math.floor(y/T);let B=g;for(b&&(B=D.kappa.Conga.avoidMiddle);d.length>=B;){if(n>m)return;await f.sleep(250)}for(;!P;){if(_=f.random(g)*T,b){_=f.random(D.kappa.Conga.avoidMiddle);const u=Math.floor(D.kappa.Conga.avoidMiddle/2);_>=u&&(_=g-1-(_-u)),_*=T}let c=!1;for(let u=0,w=d.length;u<w;u++)if(d[u].row===_){c=!0;break}c||(P=!0)}d.push({row:_,done:!1});const R=[],A=[],U=Math.floor(x/M);for(let c=0;c<U;c++){const u=$[f.random($.length)];R.push(u.url);const w=[];if(u.hasOwnProperty("zwe"))for(let V=0,E=u.zwe.length;V<E;V++)w.push(u.zwe[V].url);A.push(w)}const N=_/T%2===0,I=Math.floor((x-U*M)/2),Z=[],W=[];for(let c=0;c<U;c++){Z.push(le(m,R[c],c,x,_,v,M,U,N,I));const u=[];for(let w=0,V=A[c].length;w<V;w++)u.push(le(m,A[c][w],c,x,_,v,M,U,N,I));W.push(u)}const se=Math.floor(k.emote.time*1e3*D.kappa.Conga.time.show);await f.sleep(se),await f.sleep(Math.floor(k.display.kappa.conga.time*1e3));for(let c=0,u=Z.length;c<u;c++){oe(m,Z[c],c,x,_,v,M,U,N,I);for(let w=0,V=W[c].length;w<V;w++)oe(m,W[c][w],c,x,_,v,M,U,N,I)}await f.sleep(se);for(let c=0,u=d.length;c<u;c++)if(d[c].row===_){d.splice(c,1);break}}function le($,x,y,v,b,m,_,P,M,T){if(n>$)return;const g=document.createElement("div");g.setAttribute("class","scene ktCongaIn");const B=document.createElement("img");B.setAttribute("class","dancer fit"),f.setImgSrc(B,x);let R="--emote-height: "+m+"px;";R+=" --emote-width: "+m+"px;",B.setAttribute("style",R);let A=_*y+T,U=A-v;return M&&(A=_*(P-1-y)+T,U=A+v),R="top: "+b+"px;",R+=" left: 0px;",R+=" height: "+_+"px;",R+=" width: "+_+"px;",R+=" z-index: "+b+";",R+=" transform: translateX("+U+"px);",g.setAttribute("style",R),e++,g.appendChild(B),t.appendChild(g),f.doNextFrame(S,$,g,A),g}function oe($,x,y,v,b,m,_,P,M,T){if(n>$)return;let g=_*y+T,B=g+v;M&&(g=_*(P-1-y)+T,B=g-v);const R=Math.floor(k.emote.time*1e3*D.kappa.Conga.time.hide);x.classList.replace("ktCongaIn","ktCongaOut"),r.hook(x,!0,!0,Math.ceil(R*1.25)),f.doNextFrame(S,$,x,B)}function S($,x,y){n>$||(x.style.transform="translateX("+y+"px)")}return re}(),TheCube:function(){function re(oe,S,$,x,y,v){const b=new Date().getTime();if(n>b)return;const m=Math.ceil(x/2),_=m*-1,P=Math.ceil(S/2),M=Math.ceil($/2),T=document.createElement("div");T.setAttribute("class","scene cube kappa");const g=Math.floor(k.emote.time*1e3*D.kappa.TheCube.time),B=document.createElement("div");B.setAttribute("class","cube"),B.setAttribute("style","transform: translateZ("+_+"px);");const R=["front","back","right","left","top","bottom"],A=[];for(let Z=0;Z<6;Z++)A.push(oe[f.random(oe.length)]);for(let Z=0;Z<6;Z++)if(!A[Z].hasOwnProperty("zwe")||A[Z].zwe.length===0){const W=document.createElement("img");f.setImgSrc(W,A[Z].url),W.dataset.face=R[Z],B.appendChild(W)}else{const W=document.createElement("div");W.dataset.face=R[Z];const se=document.createElement("img");f.setImgSrc(se,A[Z].url),W.appendChild(se);for(let c=0,u=A[Z].zwe.length;c<u;c++){const w=document.createElement("img");f.setImgSrc(w,A[Z].zwe[c].url),W.appendChild(w)}B.appendChild(W)}T.appendChild(B);let U=f.random(S-x),N=f.random($-x);y&&(U=Math.floor(P-m),N=Math.floor(M-m));let I="--emote-height: "+x+"px;";I+=" --emote-width: "+x+"px;",I+=" --cube-depth: "+m+"px;",I+=" perspective: "+x*3+"px;",I+=" transform: translate("+U+"px, "+N+"px);",I+=f.styleEmote([],[],[],[],[],[],k.emote.in.fade,!1,k.emote.out.fade,!1,g),T.setAttribute("style",I),t.appendChild(T),r.hook(T,!1,6,g),f.doNextFrame(le,b,B,v,x)}function le(oe,S,$,x){if(n>oe)return;const y=Math.ceil(x/2)*-1;let v=0,b=0;for(;Math.abs(v)+Math.abs(b)<45;)v=(360-f.random()*720)*$,b=(360-f.random()*720)*$;S.style.transform="translateZ("+y+"px) rotateX("+v+"deg) rotateY("+b+"deg)"}return re}(),Text:function(){let re=0;function le(y,v,b,m,_){const P=new Date().getTime();if(n>P)return;const M=oe(m);let T=0,g=0;const B=[],R=M.length;for(let V=0;V<R;V++){const E=M[V].length;for(let O=0;O<E;O++)M[V][O]!==0&&(g+=1);T+=E,B.push(0)}const A=Math.min(Math.floor(v/(R+2)),Math.floor(v*k.emote.size.ratio.small),Math.floor(b*k.emote.size.ratio.small)),N=Math.floor(_*1e3*D.kappa.Text.time)*D.kappa.Text.show.total,I=Math.max(Math.floor(N/T),D.kappa.Text.show.min),Z=I*g,W=M[0].length,se=A*W,c=f.random(b-se)+se,u=f.random(v-A*R);let w=0;for(let V=0;V<T;V++){if(n>P)return;let E;do E=f.random(R);while(B[E]>=M[E].length);if(M[E][B[E]]!==0){const O=y[f.random(y.length)];if(S(P,O.url,c,u,B[E]+1,I,Z,_,E,w,b,A),O.hasOwnProperty("zwe"))for(let q=0,Y=O.zwe.length;q<Y;q++)S(P,O.zwe[q].url,c,u,B[E]+1,I,Z,_,E,w,b,A);w+=I}B[E]++}}function oe(y){const v=[],b=[];if(re===0)for(let m=0,_=Object.keys($i),P=_.length;m<P;m++)re=Math.max(re,$i[_[m]][0].length);for(let m=0;m<re;m++)b.push(0);for(let m=0,_=y.length;m<_;m++){if(m>0&&v.push(b),y[m]===" "){v.push(b),v.push(b);continue}const P=y[m];if(!$i.hasOwnProperty(P))continue;const M=$i[P];for(let T=0,g=M.length;T<g;T++)v.push(M[T])}return v}function S(y,v,b,m,_,P,M,T,g,B,R,A){if(n>y)return;const U=document.createElement("img");U.setAttribute("class","emote fit"),f.setImgSrc(U,v);const N=m+A*g,I=-1*A,Z=b-A*_;let W="top: 0px;";W+=" left: "+N+"px;",W+=" --emote-height: "+A+"px;",W+=" --emote-width: "+A+"px;",W+=" transition: transform "+P+"ms ease-in;",W+=" transform: translateY("+I+"px);",U.setAttribute("style",W),t.appendChild(U),e++;const se=Math.floor(T*1e3*D.kappa.Text.time);setTimeout(x,Math.floor(M+se+B/10),y,U,R,se),setTimeout($,B,y,U,Z)}function $(y,v,b){n>y||(v.style.transform="translateY("+b+"px)")}function x(y,v,b,m){if(n>y)return;const _=Math.floor(m*D.kappa.Text.hide);v.style.transform="translateY("+b+"px)",v.style.transitionDuration=_+"ms",r.hook(v,!1,!0,_)}return le}()}}();function H(z){switch(z.style){case"Pyramid":case"SmallPyramid":let C=0;for(let le=0,oe=pn.length;le<oe;le++)C+=pn[le];return C;case"Fireworks":const J=Math.max(3,Math.floor(z.count*D.kappa.Fireworks.quantity.small)),te=Math.floor(z.count*D.kappa.Fireworks.quantity.medium),X=Math.max(3,Math.floor(z.count*D.kappa.Fireworks.quantity.large));return 1+J+te+X;case"Conga":const ae=i.width,ve=i.height,xe=Math.max(k.emote.size.min,Math.min(k.emote.size.max,Math.floor(ae*k.emote.size.ratio.normal),Math.floor(ve*k.emote.size.ratio.normal))),re=Math.ceil(xe*D.kappa.Conga.size);return Math.floor(ae/re);case"TheCube":return 6}return z.count}async function F(z,C){i=s();const J=i.width,te=i.height,X=Math.max(k.emote.size.min,Math.min(k.emote.size.max,Math.floor(J*k.emote.size.ratio.normal),Math.floor(te*k.emote.size.ratio.normal))),ae=Math.max(k.emote.size.min,Math.min(Math.floor(k.emote.size.max/2),Math.floor(J*k.emote.size.ratio.small),Math.floor(te*k.emote.size.ratio.small))),ve=te-X;t.style.setProperty("--height",te+"px"),t.style.setProperty("--width",J+"px");const xe=H(C);e+=xe;const re=z.length,le=new Date().getTime();let oe=Math.floor(k.emote.time*1e3);switch(D.kappa.hasOwnProperty(C.style)&&D.kappa[C.style].hasOwnProperty("time")?oe=Math.floor(k.emote.time*1e3*D.kappa[C.style].time):D.display.hasOwnProperty(C.style)&&D.display[C.style].hasOwnProperty("time")&&(oe=Math.floor(k.emote.time*1e3*D.display[C.style].time)),C.style){case"Stampede":e-=xe,await L.Stampede(z,J,te,X,C.count);break;case"Fireworks":L.Fireworks(z,J,te,ae,C.count);break;case"Spiral":L.Spiral(z,J,te,ae,C.count);break;case"Pyramid":L.Pyramid(z,J,te);break;case"SmallPyramid":L.SmallPyramid(z,J,te);break;case"Conga":e-=xe;let S=!1;C.prefs.hasOwnProperty("avoidMiddle")&&C.prefs.avoidMiddle===!0&&(S=!0),L.Conga(z,J,te,X,S);break;case"Text":e-=xe;let $="HYPE!";k.display.kappa.styles.hasOwnProperty(C.style)&&k.display.kappa.styles[C.style].hasOwnProperty("message")&&($=k.display.kappa.styles[C.style].message[f.random(k.display.kappa.styles[C.style].message.length)]),C.prefs.hasOwnProperty("message")&&Array.isArray(C.prefs.message)&&C.prefs.message.length>0&&($=C.prefs.message[f.random(C.prefs.message.length)]);let x=k.emote.time;k.display.kappa.styles.hasOwnProperty(C.style)&&k.display.kappa.styles[C.style].hasOwnProperty("time")&&(x=k.display.kappa.styles[C.style].time),C.prefs.hasOwnProperty("time")&&C.prefs.time>0&&(x=C.prefs.time),L.Text(z,J,te,$,x);break;case"TheCube":const y=Math.min(J,te);let v=8/10;k.display.kappa.styles.hasOwnProperty(C.style)&&k.display.kappa.styles[C.style].hasOwnProperty("size")&&(v=k.display.kappa.styles[C.style].size),C.prefs.hasOwnProperty("size")&&(v=C.prefs.size);let b=!0;k.display.kappa.styles.hasOwnProperty(C.style)&&k.display.kappa.styles[C.style].hasOwnProperty("center")&&(b=k.display.kappa.styles[C.style].center),C.prefs.hasOwnProperty("center")&&(b=C.prefs.center);let m=5;k.display.kappa.styles.hasOwnProperty(C.style)&&k.display.kappa.styles[C.style].hasOwnProperty("speed")&&(m=k.display.kappa.styles[C.style].speed),C.prefs.hasOwnProperty("speed")&&(m=C.prefs.speed||1);let _=!1;k.display.kappa.styles.hasOwnProperty(C.style)&&k.display.kappa.styles[C.style].hasOwnProperty("faces")&&(_=k.display.kappa.styles[C.style].faces),C.prefs.hasOwnProperty("faces")&&(_=C.prefs.faces===!0);let P=[];_?P=z:P.push(z[f.random(re)]),L.TheCube(P,J,te,Math.floor(y*v),b,m);break;case"Burst":const M=f.randomFromRange(D.kappa[C.style].left),T=f.randomFromRange(D.kappa[C.style].top)*ve,g=f.countEstimatedTime(C.count,oe);for(let N=0;N<C.count;N++){if(n>le)return;const I=f.random(re);e--;let Z=X;z[I].width!==void 0&&z[I].height!==void 0&&(Z=z[I].width/z[I].height*X);const W=J-Math.ceil(Z/2);o.list.StraightLine(z[I],J,te,X,M*W,T,le),N%g.ct===g.ct-1&&await f.framePause(g.f)}break;case"Fountain":const B=f.randomFromRange(D.kappa[C.style].left)*J,R=f.randomFromRange(D.kappa[C.style].top),A=f.countEstimatedTime(C.count,oe);for(let N=0;N<C.count;N++){if(n>le)return;const I=f.random(re);e--,o.list.Fountain(z[I],J,te,X,B,R,le),N%A.ct===A.ct-1&&await f.framePause(A.f)}break;case"Confetti":const U=f.countEstimatedTime(C.count,oe);for(let N=0;N<C.count;N++){if(n>le)return;const I=f.random(re);e--,o.list.Confetti(z[I],J,te,ae,le),N%U.ct===U.ct-1&&await f.framePause(U.f)}break}}function j(){d.length=0}return{run:F,stop:j}}();function a(d,L,H={},F=!1,j={},z=!1){if(n>d)return;const C=document.createElement("img"),J=[];if(J.push("emote"),H.hasOwnProperty("classes")&&J.push(...H.classes),C.classList.add(...J),f.setImgSrc(C,L),H.hasOwnProperty("style")&&C.setAttribute("style",H.style),H.hasOwnProperty("dataset"))for(let ve=0,xe=Object.keys(H.dataset),re=xe.length;ve<re;ve++)C.setAttribute("data-"+xe[ve],H.dataset[xe[ve]]);e++,t.appendChild(C);let te=!0,X=!0,ae=!1;if(j!==!1&&(j.hasOwnProperty("space")&&(te=j.space),j.hasOwnProperty("decrement")&&(X=j.decrement),j.hasOwnProperty("time")&&(ae=j.time),r.hook(C,te,X,ae)),z!==!1){let ve=null;z.hasOwnProperty("x")&&z.hasOwnProperty("y")?ve="translate("+z.x+"px, "+z.y+"px)":z.hasOwnProperty("x")?ve="translateX("+z.x+"px)":z.hasOwnProperty("y")&&(ve="translateY("+z.y+"px)"),ve!==null&&f.doNextFrame(h,d,C,ve)}if(F)return C}function h(d,L,H){n>d||(L.style.transform=H)}function p(){n=new Date().getTime(),l.stop();const d=t.getElementsByClassName("scene");for(;d.length;)d[0].parentElement.removeChild(d[0]);const L=t.getElementsByTagName("img");for(;L.length;)L[0].parentElement.removeChild(L[0]);e=0}return{emote:o,kappa:l,clear:p}}const Ic=Wo({__name:"kappagen",props:{isRave:{type:Boolean,default:!1},config:{}},setup(t,{expose:e}){const n=t,s=qo(),i=dr(()=>ry(s.value));return qs(()=>n.config,r=>{r&&(k.emote=f.deepMerge(k.emote,ss(n.config)))},{deep:!0,immediate:!0}),ur(()=>{f.msPerFrame.start()}),Yo(()=>{f.msPerFrame.stop()}),e({clear(){i.value.clear()},showEmotes(r){i.value.emote.showEmotes(r)},playAnimation(r,o){return i.value.kappa.run(r,o)}}),(r,o)=>(Gs(),Ui("div",{class:lr(["kappagen",{rave:r.isRave}]),ref_key:"kappagenEl",ref:s},null,2))}}),vt={TheCube:"TheCube",Text:"Text",Confetti:"Confetti",Spiral:"Spiral",Stampede:"Stampede",Burst:"Burst",Fountain:"Fountain",SmallPyramid:"SmallPyramid",Pyramid:"Pyramid",Fireworks:"Fireworks",Conga:"Conga"},so=[{style:vt.Text,prefs:{message:[],time:3}},{style:vt.TheCube,prefs:{size:.1,center:!1,speed:6,faces:!1}},{style:vt.Confetti,count:150},{style:vt.Spiral,count:150},{style:vt.Stampede,count:150},{style:vt.Burst,count:150},{style:vt.Fountain,count:150},{style:vt.SmallPyramid},{style:vt.Pyramid},{style:vt.Fireworks,count:150},{style:vt.Conga,prefs:{avoidMiddle:!1}}];function oy(t){return Gc()?(yd(t),!0):!1}const ly=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ay=ly?window:void 0;function Kc(t){var e;const n=uu(t);return(e=n?.$el)!=null?e:n}function cy(){const t=qo(!1),e=Zm();return e&&ur(()=>{t.value=!0},e),t}function uy(t){const e=cy();return dr(()=>(e.value,!!t()))}function py(t,e,n={}){const{window:s=ay,...i}=n;let r;const o=uy(()=>s&&"ResizeObserver"in s),l=()=>{r&&(r.disconnect(),r=void 0)},a=dr(()=>{const d=uu(t);return Array.isArray(d)?d.map(L=>Kc(L)):[Kc(d)]}),h=qs(a,d=>{if(l(),o.value&&s){r=new ResizeObserver(e);for(const L of d)L&&r.observe(L,i)}},{immediate:!0,flush:"post"}),p=()=>{l(),h()};return oy(p),{isSupported:o,stop:p}}const hy={key:0,class:"kappagen-frame"},dy=Wo({__name:"App",setup(t){const e=Xs({isFrame:!1,isRave:!1,isZWE:!0,text:"Twir",emoteUrl:"https://cdn.7tv.app/emote/01HEJ0NWTR0004F2B5D9XYF1Z1/4x.avif",emoteZWEUrl:"https://cdn.7tv.app/emote/01FE3XY508000AA32JP519W2EW/4x.avif"}),n=Xs({max:10,time:10,queue:100,cube:{speed:10},size:{min:1,max:256,ratio:{normal:1/12,small:1/24}}}),s=uo();function i(){return[{url:e.emoteUrl,zwe:e.isZWE?[{url:e.emoteZWEUrl}]:[]}]}async function r(p){if(!s.value)return;const d=so.find(L=>L.style===p);d&&await s.value.playAnimation(i(),d)}function o(){if(!s.value)return;const p=Math.floor(Math.random()*20),d=Array.from({length:p}).map(()=>({url:e.emoteUrl}));s.value.showEmotes(d)}function l(){s.value&&s.value.clear()}function a(p){p.addBinding(e,"isFrame",{label:"Enable frame"});const d=p.addFolder({title:"Emotes"});d.addBinding(e,"isRave",{label:"Rave"}),d.addBinding(n,"max",{label:"Max",min:1,max:100,step:1}),d.addBinding(n,"time",{label:"Time",min:1,max:1e3,step:1}),d.addBinding(n,"queue",{label:"Queue",min:1,max:1e3,step:1}),d.addBinding(e,"emoteUrl",{label:"Emote"}),d.addBinding(e,"isZWE",{label:"Enable Zero Width"}).on("change",({value:z})=>{L.disabled=!z});const L=d.addBinding(e,"emoteZWEUrl",{label:"Emote Zero Width"}),H=p.addFolder({title:"Size"});H.addBinding(n.size,"min",{label:"Min",min:1,max:256,step:1}),H.addBinding(n.size,"max",{label:"Max",min:1,max:256,step:1}),H.addBinding(n.size.ratio,"normal",{label:"Ratio (normal)",min:.01,max:1,step:.01}),H.addBinding(n.size.ratio,"small",{label:"Ratio (small)",min:.01,max:1,step:.01});const F=p.addFolder({title:"Animations"}),j=so.find(z=>z.style===vt.Text);F.addButton({title:j.style}).on("click",()=>{j.prefs.message=[e.text],r(j.style)}),F.addBinding(e,"text",{label:"Text"}),F.addBlade({view:"separator"});for(const z of so.slice(1))F.addButton({title:z.style}).on("click",()=>{r(z.style)});p.addBlade({view:"separator"}),p.addButton({title:"Show random emotes"}).on("click",o),p.addButton({title:"Clear"}).on("click",l)}const h=qo({width:0,height:0});return py(document.body,p=>{const d=p[0],{width:L,height:H}=d.contentRect;h.value={width:L,height:H}}),(p,d)=>(Gs(),Ui(Lt,null,[Ft(ss(sy),{pane:{title:"Kappagen Playground"},onOnPaneCreated:a}),e.isFrame?(Gs(),Ui("div",hy,[Ft(ss(Ic),{ref_key:"kappagen",ref:s,"is-rave":e.isRave,config:n},null,8,["is-rave","config"])])):(Gs(),Km(ss(Ic),{key:1,ref_key:"kappagen",ref:s,"is-rave":e.isRave,config:n,style:or({height:`${h.value.height}px`,width:`${h.value.width}px`})},null,8,["is-rave","config","style"]))],64))}}),my=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},fy=my(dy,[["__scopeId","data-v-82005ce4"]]);Vf(fy).mount("#app");
