(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function _o(t,e){const n=new Set(t.split(","));return e?s=>n.has(s.toLowerCase()):s=>n.has(s)}const ke={},Yn=[],pt=()=>{},Uh=()=>!1,Gi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),go=t=>t.startsWith("onUpdate:"),Ze=Object.assign,Co=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},qh=Object.prototype.hasOwnProperty,we=(t,e)=>qh.call(t,e),he=Array.isArray,Ms=t=>Yi(t)==="[object Map]",Hh=t=>Yi(t)==="[object Set]",me=t=>typeof t=="function",Ne=t=>typeof t=="string",Wi=t=>typeof t=="symbol",Re=t=>t!==null&&typeof t=="object",Rc=t=>(Re(t)||me(t))&&me(t.then)&&me(t.catch),Gh=Object.prototype.toString,Yi=t=>Gh.call(t),Wh=t=>Yi(t).slice(8,-1),Yh=t=>Yi(t)==="[object Object]",yo=t=>Ne(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$s=_o(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xi=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Xh=/-(\w)/g,ns=Xi(t=>t.replace(Xh,(e,n)=>n?n.toUpperCase():"")),Zh=/\B([A-Z])/g,as=Xi(t=>t.replace(Zh,"-$1").toLowerCase()),Dc=Xi(t=>t.charAt(0).toUpperCase()+t.slice(1)),_r=Xi(t=>t?`on${Dc(t)}`:""),hn=(t,e)=>!Object.is(t,e),gr=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ti=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Jh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ea;const Fc=()=>ea||(ea=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xo(t){if(he(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=Ne(s)?nd(s):xo(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(Ne(t)||Re(t))return t}const Qh=/;(?![^(]*\))/g,ed=/:([^]+)/,td=/\/\*[^]*?\*\//g;function nd(t){const e={};return t.replace(td,"").split(Qh).forEach(n=>{if(n){const s=n.split(ed);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Zi(t){let e="";if(Ne(t))e=t;else if(he(t))for(let n=0;n<t.length;n++){const s=Zi(t[n]);s&&(e+=s+" ")}else if(Re(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const sd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",id=_o(sd);function Bc(t){return!!t||t===""}/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wt;class rd{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=wt,!e&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=wt;try{return wt=this,e()}finally{wt=n}}}on(){wt=this}off(){wt=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function od(t,e=wt){e&&e.active&&e.effects.push(t)}function ld(){return wt}let Pn;class Po{constructor(e,n,s,i){this.fn=e,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,od(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,On();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(ad(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),An()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=an,n=Pn;try{return an=!0,Pn=this,this._runnings++,ta(this),this.fn()}finally{na(this),this._runnings--,Pn=n,an=e}}stop(){var e;this.active&&(ta(this),na(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function ad(t){return t.value}function ta(t){t._trackId++,t._depsLength=0}function na(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)jc(t.deps[e],t);t.deps.length=t._depsLength}}function jc(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let an=!0,qr=0;const Nc=[];function On(){Nc.push(an),an=!1}function An(){const t=Nc.pop();an=t===void 0?!0:t}function Eo(){qr++}function ko(){for(qr--;!qr&&Hr.length;)Hr.shift()()}function zc(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&jc(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Hr=[];function Ic(t,e,n){Eo();for(const s of t.keys()){let i;s._dirtyLevel<e&&(i??(i=t.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=e),s._shouldSchedule&&(i??(i=t.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&Hr.push(s.scheduler)))}ko()}const Kc=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Gr=new WeakMap,En=Symbol(""),Wr=Symbol("");function tt(t,e,n){if(an&&Pn){let s=Gr.get(t);s||Gr.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=Kc(()=>s.delete(n))),zc(Pn,i)}}function jt(t,e,n,s,i,r){const o=Gr.get(t);if(!o)return;let l=[];if(e==="clear")l=[...o.values()];else if(n==="length"&&he(t)){const a=Number(s);o.forEach((c,p)=>{(p==="length"||!Wi(p)&&p>=a)&&l.push(c)})}else switch(n!==void 0&&l.push(o.get(n)),e){case"add":he(t)?yo(n)&&l.push(o.get("length")):(l.push(o.get(En)),Ms(t)&&l.push(o.get(Wr)));break;case"delete":he(t)||(l.push(o.get(En)),Ms(t)&&l.push(o.get(Wr)));break;case"set":Ms(t)&&l.push(o.get(En));break}Eo();for(const a of l)a&&Ic(a,4);ko()}const cd=_o("__proto__,__v_isRef,__isVue"),Uc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wi)),sa=ud();function ud(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=Ce(this);for(let r=0,o=this.length;r<o;r++)tt(s,"get",r+"");const i=s[e](...n);return i===-1||i===!1?s[e](...n.map(Ce)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){On(),Eo();const s=Ce(this)[e].apply(this,n);return ko(),An(),s}}),t}function pd(t){const e=Ce(this);return tt(e,"has",t),e.hasOwnProperty(t)}class qc{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?Pd:Yc:r?Wc:Gc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=he(e);if(!i){if(o&&we(sa,n))return Reflect.get(sa,n,s);if(n==="hasOwnProperty")return pd}const l=Reflect.get(e,n,s);return(Wi(n)?Uc.has(n):cd(n))||(i||tt(e,"get",n),r)?l:nt(l)?o&&yo(n)?l:l.value:Re(l)?i?Xc(l):As(l):l}}class Hc extends qc{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._isShallow){const a=ss(r);if(!Li(s)&&!ss(s)&&(r=Ce(r),s=Ce(s)),!he(e)&&nt(r)&&!nt(s))return a?!1:(r.value=s,!0)}const o=he(e)&&yo(n)?Number(n)<e.length:we(e,n),l=Reflect.set(e,n,s,i);return e===Ce(i)&&(o?hn(s,r)&&jt(e,"set",n,s):jt(e,"add",n,s)),l}deleteProperty(e,n){const s=we(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&jt(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!Wi(n)||!Uc.has(n))&&tt(e,"has",n),s}ownKeys(e){return tt(e,"iterate",he(e)?"length":En),Reflect.ownKeys(e)}}class hd extends qc{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const dd=new Hc,md=new hd,fd=new Hc(!0),Vo=t=>t,Ji=t=>Reflect.getPrototypeOf(t);function pi(t,e,n=!1,s=!1){t=t.__v_raw;const i=Ce(t),r=Ce(e);n||(hn(e,r)&&tt(i,"get",e),tt(i,"get",r));const{has:o}=Ji(i),l=s?Vo:n?$o:Rs;if(o.call(i,e))return l(t.get(e));if(o.call(i,r))return l(t.get(r));t!==i&&t.get(e)}function hi(t,e=!1){const n=this.__v_raw,s=Ce(n),i=Ce(t);return e||(hn(t,i)&&tt(s,"has",t),tt(s,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function di(t,e=!1){return t=t.__v_raw,!e&&tt(Ce(t),"iterate",En),Reflect.get(t,"size",t)}function ia(t){t=Ce(t);const e=Ce(this);return Ji(e).has.call(e,t)||(e.add(t),jt(e,"add",t,t)),this}function ra(t,e){e=Ce(e);const n=Ce(this),{has:s,get:i}=Ji(n);let r=s.call(n,t);r||(t=Ce(t),r=s.call(n,t));const o=i.call(n,t);return n.set(t,e),r?hn(e,o)&&jt(n,"set",t,e):jt(n,"add",t,e),this}function oa(t){const e=Ce(this),{has:n,get:s}=Ji(e);let i=n.call(e,t);i||(t=Ce(t),i=n.call(e,t)),s&&s.call(e,t);const r=e.delete(t);return i&&jt(e,"delete",t,void 0),r}function la(){const t=Ce(this),e=t.size!==0,n=t.clear();return e&&jt(t,"clear",void 0,void 0),n}function mi(t,e){return function(s,i){const r=this,o=r.__v_raw,l=Ce(o),a=e?Vo:t?$o:Rs;return!t&&tt(l,"iterate",En),o.forEach((c,p)=>s.call(i,a(c),a(p),r))}}function fi(t,e,n){return function(...s){const i=this.__v_raw,r=Ce(i),o=Ms(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,c=i[t](...s),p=n?Vo:e?$o:Rs;return!e&&tt(r,"iterate",a?Wr:En),{next(){const{value:g,done:X}=c.next();return X?{value:g,done:X}:{value:l?[p(g[0]),p(g[1])]:p(g),done:X}},[Symbol.iterator](){return this}}}}function Gt(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function vd(){const t={get(r){return pi(this,r)},get size(){return di(this)},has:hi,add:ia,set:ra,delete:oa,clear:la,forEach:mi(!1,!1)},e={get(r){return pi(this,r,!1,!0)},get size(){return di(this)},has:hi,add:ia,set:ra,delete:oa,clear:la,forEach:mi(!1,!0)},n={get(r){return pi(this,r,!0)},get size(){return di(this,!0)},has(r){return hi.call(this,r,!0)},add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear"),forEach:mi(!0,!1)},s={get(r){return pi(this,r,!0,!0)},get size(){return di(this,!0)},has(r){return hi.call(this,r,!0)},add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear"),forEach:mi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=fi(r,!1,!1),n[r]=fi(r,!0,!1),e[r]=fi(r,!1,!0),s[r]=fi(r,!0,!0)}),[t,n,e,s]}const[bd,wd,_d,gd]=vd();function So(t,e){const n=e?t?gd:_d:t?wd:bd;return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(we(n,i)&&i in s?n:s,i,r)}const Cd={get:So(!1,!1)},yd={get:So(!1,!0)},xd={get:So(!0,!1)},Gc=new WeakMap,Wc=new WeakMap,Yc=new WeakMap,Pd=new WeakMap;function Ed(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kd(t){return t.__v_skip||!Object.isExtensible(t)?0:Ed(Wh(t))}function As(t){return ss(t)?t:Mo(t,!1,dd,Cd,Gc)}function Vd(t){return Mo(t,!1,fd,yd,Wc)}function Xc(t){return Mo(t,!0,md,xd,Yc)}function Mo(t,e,n,s,i){if(!Re(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=kd(t);if(o===0)return t;const l=new Proxy(t,o===2?s:n);return i.set(t,l),l}function Xn(t){return ss(t)?Xn(t.__v_raw):!!(t&&t.__v_isReactive)}function ss(t){return!!(t&&t.__v_isReadonly)}function Li(t){return!!(t&&t.__v_isShallow)}function Zc(t){return Xn(t)||ss(t)}function Ce(t){const e=t&&t.__v_raw;return e?Ce(e):t}function Jc(t){return Object.isExtensible(t)&&Ti(t,"__v_skip",!0),t}const Rs=t=>Re(t)?As(t):t,$o=t=>Re(t)?Xc(t):t;class Qc{constructor(e,n,s,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Po(()=>e(this._value),()=>gi(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const e=Ce(this);return(!e._cacheable||e.effect.dirty)&&hn(e._value,e._value=e.effect.run())&&gi(e,4),eu(e),e.effect._dirtyLevel>=2&&gi(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Sd(t,e,n=!1){let s,i;const r=me(t);return r?(s=t,i=pt):(s=t.get,i=t.set),new Qc(s,i,r||!i,n)}function eu(t){var e;an&&Pn&&(t=Ce(t),zc(Pn,(e=t.dep)!=null?e:t.dep=Kc(()=>t.dep=void 0,t instanceof Qc?t:void 0)))}function gi(t,e=4,n){t=Ce(t);const s=t.dep;s&&Ic(s,e)}function nt(t){return!!(t&&t.__v_isRef===!0)}function Yr(t){return tu(t,!1)}function Md(t){return tu(t,!0)}function tu(t,e){return nt(t)?t:new $d(t,e)}class $d{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ce(e),this._value=n?e:Rs(e)}get value(){return eu(this),this._value}set value(e){const n=this.__v_isShallow||Li(e)||ss(e);e=n?e:Ce(e),hn(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Rs(e),gi(this,4))}}function Oi(t){return nt(t)?t.value:t}const Td={get:(t,e,n)=>Oi(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return nt(i)&&!nt(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function nu(t){return Xn(t)?t:new Proxy(t,Td)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cn(t,e,n,s){try{return s?t(...s):t()}catch(i){Qi(i,e,n)}}function gt(t,e,n,s){if(me(t)){const r=cn(t,e,n,s);return r&&Rc(r)&&r.catch(o=>{Qi(o,e,n)}),r}const i=[];for(let r=0;r<t.length;r++)i.push(gt(t[r],e,n,s));return i}function Qi(t,e,n,s=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const c=r.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](t,o,l)===!1)return}r=r.parent}const a=e.appContext.config.errorHandler;if(a){cn(a,null,10,[t,o,l]);return}}Ld(t,n,i,s)}function Ld(t,e,n,s=!0){console.error(t)}let Ds=!1,Xr=!1;const Ke=[];let Mt=0;const Zn=[];let nn=null,xn=0;const su=Promise.resolve();let To=null;function iu(t){const e=To||su;return t?e.then(this?t.bind(this):t):e}function Od(t){let e=Mt+1,n=Ke.length;for(;e<n;){const s=e+n>>>1,i=Ke[s],r=Fs(i);r<t||r===t&&i.pre?e=s+1:n=s}return e}function Lo(t){(!Ke.length||!Ke.includes(t,Ds&&t.allowRecurse?Mt+1:Mt))&&(t.id==null?Ke.push(t):Ke.splice(Od(t.id),0,t),ru())}function ru(){!Ds&&!Xr&&(Xr=!0,To=su.then(lu))}function Ad(t){const e=Ke.indexOf(t);e>Mt&&Ke.splice(e,1)}function Rd(t){he(t)?Zn.push(...t):(!nn||!nn.includes(t,t.allowRecurse?xn+1:xn))&&Zn.push(t),ru()}function aa(t,e,n=Ds?Mt+1:0){for(;n<Ke.length;n++){const s=Ke[n];if(s&&s.pre){if(t&&s.id!==t.uid)continue;Ke.splice(n,1),n--,s()}}}function ou(t){if(Zn.length){const e=[...new Set(Zn)].sort((n,s)=>Fs(n)-Fs(s));if(Zn.length=0,nn){nn.push(...e);return}for(nn=e,xn=0;xn<nn.length;xn++)nn[xn]();nn=null,xn=0}}const Fs=t=>t.id==null?1/0:t.id,Dd=(t,e)=>{const n=Fs(t)-Fs(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function lu(t){Xr=!1,Ds=!0,Ke.sort(Dd);try{for(Mt=0;Mt<Ke.length;Mt++){const e=Ke[Mt];e&&e.active!==!1&&cn(e,null,14)}}finally{Mt=0,Ke.length=0,ou(),Ds=!1,To=null,(Ke.length||Zn.length)&&lu()}}function Fd(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ke;let i=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in s){const p=`${o==="modelValue"?"model":o}Modifiers`,{number:g,trim:X}=s[p]||ke;X&&(i=n.map(J=>Ne(J)?J.trim():J)),g&&(i=n.map(Jh))}let l,a=s[l=_r(e)]||s[l=_r(ns(e))];!a&&r&&(a=s[l=_r(as(e))]),a&&gt(a,t,6,i);const c=s[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,gt(c,t,6,i)}}function au(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},l=!1;if(!me(t)){const a=c=>{const p=au(c,e,!0);p&&(l=!0,Ze(o,p))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(Re(t)&&s.set(t,null),null):(he(r)?r.forEach(a=>o[a]=null):Ze(o,r),Re(t)&&s.set(t,o),o)}function er(t,e){return!t||!Gi(e)?!1:(e=e.slice(2).replace(/Once$/,""),we(t,e[0].toLowerCase()+e.slice(1))||we(t,as(e))||we(t,e))}let $t=null,cu=null;function Ai(t){const e=$t;return $t=t,cu=t&&t.type.__scopeId||null,e}function Bd(t,e=$t,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&_a(-1);const r=Ai(e);let o;try{o=t(...i)}finally{Ai(r),s._d&&_a(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ca(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:l,attrs:a,emit:c,render:p,renderCache:g,data:X,setupState:J,ctx:V,inheritAttrs:f}=t;let j,K;const re=Ai(t);try{if(n.shapeFlag&4){const le=i||s,be=le;j=St(p.call(be,le,g,r,J,X,V)),K=a}else{const le=e;j=St(le.length>1?le(r,{attrs:a,slots:l,emit:c}):le(r,null)),K=e.props?a:jd(a)}}catch(le){Os.length=0,Qi(le,t,1),j=Nt(Bs)}let ie=j;if(K&&f!==!1){const le=Object.keys(K),{shapeFlag:be}=ie;le.length&&be&7&&(o&&le.some(go)&&(K=Nd(K,o)),ie=is(ie,K))}return n.dirs&&(ie=is(ie),ie.dirs=ie.dirs?ie.dirs.concat(n.dirs):n.dirs),n.transition&&(ie.transition=n.transition),j=ie,Ai(re),j}const jd=t=>{let e;for(const n in t)(n==="class"||n==="style"||Gi(n))&&((e||(e={}))[n]=t[n]);return e},Nd=(t,e)=>{const n={};for(const s in t)(!go(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function zd(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:l,patchFlag:a}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?ua(s,o,c):!!o;if(a&8){const p=e.dynamicProps;for(let g=0;g<p.length;g++){const X=p[g];if(o[X]!==s[X]&&!er(c,X))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?ua(s,o,c):!0:!!o;return!1}function ua(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!er(n,r))return!0}return!1}function Id({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Kd=Symbol.for("v-ndc"),Ud=t=>t.__isSuspense;function qd(t,e){e&&e.pendingBranch?he(t)?e.effects.push(...t):e.effects.push(t):Rd(t)}const Hd=Symbol.for("v-scx"),Gd=()=>xi(Hd),vi={};function Ci(t,e,n){return uu(t,e,n)}function uu(t,e,{immediate:n,deep:s,flush:i,once:r,onTrack:o,onTrigger:l}=ke){if(e&&r){const ee=e;e=(...ae)=>{ee(...ae),be()}}const a=Ge,c=ee=>s===!0?ee:Wn(ee,s===!1?1:void 0);let p,g=!1,X=!1;if(nt(t)?(p=()=>t.value,g=Li(t)):Xn(t)?(p=()=>c(t),g=!0):he(t)?(X=!0,g=t.some(ee=>Xn(ee)||Li(ee)),p=()=>t.map(ee=>{if(nt(ee))return ee.value;if(Xn(ee))return c(ee);if(me(ee))return cn(ee,a,2)})):me(t)?e?p=()=>cn(t,a,2):p=()=>(J&&J(),gt(t,a,3,[V])):p=pt,e&&s){const ee=p;p=()=>Wn(ee())}let J,V=ee=>{J=ie.onStop=()=>{cn(ee,a,4),J=ie.onStop=void 0}},f;if(ir)if(V=pt,e?n&&gt(e,a,3,[p(),X?[]:void 0,V]):p(),i==="sync"){const ee=Gd();f=ee.__watcherHandles||(ee.__watcherHandles=[])}else return pt;let j=X?new Array(t.length).fill(vi):vi;const K=()=>{if(!(!ie.active||!ie.dirty))if(e){const ee=ie.run();(s||g||(X?ee.some((ae,se)=>hn(ae,j[se])):hn(ee,j)))&&(J&&J(),gt(e,a,3,[ee,j===vi?void 0:X&&j[0]===vi?[]:j,V]),j=ee)}else ie.run()};K.allowRecurse=!!e;let re;i==="sync"?re=K:i==="post"?re=()=>Qe(K,a&&a.suspense):(K.pre=!0,a&&(K.id=a.uid),re=()=>Lo(K));const ie=new Po(p,pt,re),le=ld(),be=()=>{ie.stop(),le&&Co(le.effects,ie)};return e?n?K():j=ie.run():i==="post"?Qe(ie.run.bind(ie),a&&a.suspense):ie.run(),f&&f.push(be),be}function Wd(t,e,n){const s=this.proxy,i=Ne(t)?t.includes(".")?pu(s,t):()=>s[t]:t.bind(s,s);let r;me(e)?r=e:(r=e.handler,n=e);const o=Xs(this),l=uu(i,r.bind(s),n);return o(),l}function pu(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function Wn(t,e,n=0,s){if(!Re(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(s=s||new Set,s.has(t))return t;if(s.add(t),nt(t))Wn(t.value,e,n,s);else if(he(t))for(let i=0;i<t.length;i++)Wn(t[i],e,n,s);else if(Hh(t)||Ms(t))t.forEach(i=>{Wn(i,e,n,s)});else if(Yh(t))for(const i in t)Wn(t[i],e,n,s);return t}function bn(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[s];a&&(On(),gt(a,n,8,[t.el,l,t,e]),An())}}/*! #__NO_SIDE_EFFECTS__ */function Oo(t,e){return me(t)?Ze({name:t.name},e,{setup:t}):t}const yi=t=>!!t.type.__asyncLoader,hu=t=>t.type.__isKeepAlive;function Yd(t,e){du(t,"a",e)}function Xd(t,e){du(t,"da",e)}function du(t,e,n=Ge){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(tr(e,s,n),n){let i=n.parent;for(;i&&i.parent;)hu(i.parent.vnode)&&Zd(s,e,n,i),i=i.parent}}function Zd(t,e,n,s){const i=tr(e,t,s,!0);Ro(()=>{Co(s[e],i)},n)}function tr(t,e,n=Ge,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;On();const l=Xs(n),a=gt(e,n,t,o);return l(),An(),a});return s?i.unshift(r):i.push(r),r}}const qt=t=>(e,n=Ge)=>(!ir||t==="sp")&&tr(t,(...s)=>e(...s),n),Jd=qt("bm"),Ao=qt("m"),Qd=qt("bu"),em=qt("u"),tm=qt("bum"),Ro=qt("um"),nm=qt("sp"),sm=qt("rtg"),im=qt("rtc");function rm(t,e=Ge){tr("ec",t,e)}const Zr=t=>t?Eu(t)?zo(t)||t.proxy:Zr(t.parent):null,Ts=Ze(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zr(t.parent),$root:t=>Zr(t.root),$emit:t=>t.emit,$options:t=>fu(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Lo(t.update)}),$nextTick:t=>t.n||(t.n=iu.bind(t.proxy)),$watch:t=>Wd.bind(t)}),Cr=(t,e)=>t!==ke&&!t.__isScriptSetup&&we(t,e),om={get({_:t},e){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const J=o[e];if(J!==void 0)switch(J){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Cr(s,e))return o[e]=1,s[e];if(i!==ke&&we(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&we(c,e))return o[e]=3,r[e];if(n!==ke&&we(n,e))return o[e]=4,n[e];Jr&&(o[e]=0)}}const p=Ts[e];let g,X;if(p)return e==="$attrs"&&tt(t,"get",e),p(t);if((g=l.__cssModules)&&(g=g[e]))return g;if(n!==ke&&we(n,e))return o[e]=4,n[e];if(X=a.config.globalProperties,we(X,e))return X[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Cr(i,e)?(i[e]=n,!0):s!==ke&&we(s,e)?(s[e]=n,!0):we(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let l;return!!n[o]||t!==ke&&we(t,o)||Cr(e,o)||(l=r[0])&&we(l,o)||we(s,o)||we(Ts,o)||we(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:we(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function pa(t){return he(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Jr=!0;function lm(t){const e=fu(t),n=t.proxy,s=t.ctx;Jr=!1,e.beforeCreate&&ha(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:c,created:p,beforeMount:g,mounted:X,beforeUpdate:J,updated:V,activated:f,deactivated:j,beforeDestroy:K,beforeUnmount:re,destroyed:ie,unmounted:le,render:be,renderTracked:ee,renderTriggered:ae,errorCaptured:se,serverPrefetch:$,expose:S,inheritAttrs:P,components:x,directives:d,filters:b}=e;if(c&&am(c,s,null),o)for(const w in o){const E=o[w];me(E)&&(s[w]=E.bind(n))}if(i){const w=i.call(n,n);Re(w)&&(t.data=As(w))}if(Jr=!0,r)for(const w in r){const E=r[w],M=me(E)?E.bind(n,n):me(E.get)?E.get.bind(n,n):pt,C=!me(E)&&me(E.set)?E.set.bind(n):pt,A=Vu({get:M,set:C});Object.defineProperty(s,w,{enumerable:!0,configurable:!0,get:()=>A.value,set:L=>A.value=L})}if(l)for(const w in l)mu(l[w],s,n,w);if(a){const w=me(a)?a.call(n):a;Reflect.ownKeys(w).forEach(E=>{mm(E,w[E])})}p&&ha(p,t,"c");function y(w,E){he(E)?E.forEach(M=>w(M.bind(n))):E&&w(E.bind(n))}if(y(Jd,g),y(Ao,X),y(Qd,J),y(em,V),y(Yd,f),y(Xd,j),y(rm,se),y(im,ee),y(sm,ae),y(tm,re),y(Ro,le),y(nm,$),he(S))if(S.length){const w=t.exposed||(t.exposed={});S.forEach(E=>{Object.defineProperty(w,E,{get:()=>n[E],set:M=>n[E]=M})})}else t.exposed||(t.exposed={});be&&t.render===pt&&(t.render=be),P!=null&&(t.inheritAttrs=P),x&&(t.components=x),d&&(t.directives=d)}function am(t,e,n=pt){he(t)&&(t=Qr(t));for(const s in t){const i=t[s];let r;Re(i)?"default"in i?r=xi(i.from||s,i.default,!0):r=xi(i.from||s):r=xi(i),nt(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function ha(t,e,n){gt(he(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function mu(t,e,n,s){const i=s.includes(".")?pu(n,s):()=>n[s];if(Ne(t)){const r=e[t];me(r)&&Ci(i,r)}else if(me(t))Ci(i,t.bind(n));else if(Re(t))if(he(t))t.forEach(r=>mu(r,e,n,s));else{const r=me(t.handler)?t.handler.bind(n):e[t.handler];me(r)&&Ci(i,r,t)}}function fu(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!i.length&&!n&&!s?a=e:(a={},i.length&&i.forEach(c=>Ri(a,c,o,!0)),Ri(a,e,o)),Re(e)&&r.set(e,a),a}function Ri(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&Ri(t,r,n,!0),i&&i.forEach(o=>Ri(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=cm[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const cm={data:da,props:ma,emits:ma,methods:Ss,computed:Ss,beforeCreate:He,created:He,beforeMount:He,mounted:He,beforeUpdate:He,updated:He,beforeDestroy:He,beforeUnmount:He,destroyed:He,unmounted:He,activated:He,deactivated:He,errorCaptured:He,serverPrefetch:He,components:Ss,directives:Ss,watch:pm,provide:da,inject:um};function da(t,e){return e?t?function(){return Ze(me(t)?t.call(this,this):t,me(e)?e.call(this,this):e)}:e:t}function um(t,e){return Ss(Qr(t),Qr(e))}function Qr(t){if(he(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function He(t,e){return t?[...new Set([].concat(t,e))]:e}function Ss(t,e){return t?Ze(Object.create(null),t,e):e}function ma(t,e){return t?he(t)&&he(e)?[...new Set([...t,...e])]:Ze(Object.create(null),pa(t),pa(e??{})):e}function pm(t,e){if(!t)return e;if(!e)return t;const n=Ze(Object.create(null),t);for(const s in e)n[s]=He(t[s],e[s]);return n}function vu(){return{app:null,config:{isNativeTag:Uh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hm=0;function dm(t,e){return function(s,i=null){me(s)||(s=Ze({},s)),i!=null&&!Re(i)&&(i=null);const r=vu(),o=new WeakSet;let l=!1;const a=r.app={_uid:hm++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:Nm,get config(){return r.config},set config(c){},use(c,...p){return o.has(c)||(c&&me(c.install)?(o.add(c),c.install(a,...p)):me(c)&&(o.add(c),c(a,...p))),a},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),a},component(c,p){return p?(r.components[c]=p,a):r.components[c]},directive(c,p){return p?(r.directives[c]=p,a):r.directives[c]},mount(c,p,g){if(!l){const X=Nt(s,i);return X.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),t(X,c,g),l=!0,a._container=c,c.__vue_app__=a,zo(X.component)||X.component.proxy}},unmount(){l&&(t(null,a._container),delete a._container.__vue_app__)},provide(c,p){return r.provides[c]=p,a},runWithContext(c){const p=Ls;Ls=a;try{return c()}finally{Ls=p}}};return a}}let Ls=null;function mm(t,e){if(Ge){let n=Ge.provides;const s=Ge.parent&&Ge.parent.provides;s===n&&(n=Ge.provides=Object.create(s)),n[t]=e}}function xi(t,e,n=!1){const s=Ge||$t;if(s||Ls){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Ls._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&me(e)?e.call(s&&s.proxy):e}}function fm(t,e,n,s=!1){const i={},r={};Ti(r,sr,1),t.propsDefaults=Object.create(null),bu(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:Vd(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function vm(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,l=Ce(i),[a]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const p=t.vnode.dynamicProps;for(let g=0;g<p.length;g++){let X=p[g];if(er(t.emitsOptions,X))continue;const J=e[X];if(a)if(we(r,X))J!==r[X]&&(r[X]=J,c=!0);else{const V=ns(X);i[V]=eo(a,l,V,J,t,!1)}else J!==r[X]&&(r[X]=J,c=!0)}}}else{bu(t,e,i,r)&&(c=!0);let p;for(const g in l)(!e||!we(e,g)&&((p=as(g))===g||!we(e,p)))&&(a?n&&(n[g]!==void 0||n[p]!==void 0)&&(i[g]=eo(a,l,g,void 0,t,!0)):delete i[g]);if(r!==l)for(const g in r)(!e||!we(e,g))&&(delete r[g],c=!0)}c&&jt(t,"set","$attrs")}function bu(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if($s(a))continue;const c=e[a];let p;i&&we(i,p=ns(a))?!r||!r.includes(p)?n[p]=c:(l||(l={}))[p]=c:er(t.emitsOptions,a)||(!(a in s)||c!==s[a])&&(s[a]=c,o=!0)}if(r){const a=Ce(n),c=l||ke;for(let p=0;p<r.length;p++){const g=r[p];n[g]=eo(i,a,g,c[g],t,!we(c,g))}}return o}function eo(t,e,n,s,i,r){const o=t[n];if(o!=null){const l=we(o,"default");if(l&&s===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&me(a)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const p=Xs(i);s=c[n]=a.call(null,e),p()}}else s=a}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===as(n))&&(s=!0))}return s}function wu(t,e,n=!1){const s=e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},l=[];let a=!1;if(!me(t)){const p=g=>{a=!0;const[X,J]=wu(g,e,!0);Ze(o,X),J&&l.push(...J)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!r&&!a)return Re(t)&&s.set(t,Yn),Yn;if(he(r))for(let p=0;p<r.length;p++){const g=ns(r[p]);fa(g)&&(o[g]=ke)}else if(r)for(const p in r){const g=ns(p);if(fa(g)){const X=r[p],J=o[g]=he(X)||me(X)?{type:X}:Ze({},X);if(J){const V=wa(Boolean,J.type),f=wa(String,J.type);J[0]=V>-1,J[1]=f<0||V<f,(V>-1||we(J,"default"))&&l.push(g)}}}const c=[o,l];return Re(t)&&s.set(t,c),c}function fa(t){return t[0]!=="$"&&!$s(t)}function va(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function ba(t,e){return va(t)===va(e)}function wa(t,e){return he(e)?e.findIndex(n=>ba(n,t)):me(e)&&ba(e,t)?0:-1}const _u=t=>t[0]==="_"||t==="$stable",Do=t=>he(t)?t.map(St):[St(t)],bm=(t,e,n)=>{if(e._n)return e;const s=Bd((...i)=>Do(e(...i)),n);return s._c=!1,s},gu=(t,e,n)=>{const s=t._ctx;for(const i in t){if(_u(i))continue;const r=t[i];if(me(r))e[i]=bm(i,r,s);else if(r!=null){const o=Do(r);e[i]=()=>o}}},Cu=(t,e)=>{const n=Do(e);t.slots.default=()=>n},wm=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ce(e),Ti(e,"_",n)):gu(e,t.slots={})}else t.slots={},e&&Cu(t,e);Ti(t.slots,sr,1)},_m=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=ke;if(s.shapeFlag&32){const l=e._;l?n&&l===1?r=!1:(Ze(i,e),!n&&l===1&&delete i._):(r=!e.$stable,gu(e,i)),o=e}else e&&(Cu(t,e),o={default:1});if(r)for(const l in i)!_u(l)&&o[l]==null&&delete i[l]};function to(t,e,n,s,i=!1){if(he(t)){t.forEach((X,J)=>to(X,e&&(he(e)?e[J]:e),n,s,i));return}if(yi(s)&&!i)return;const r=s.shapeFlag&4?zo(s.component)||s.component.proxy:s.el,o=i?null:r,{i:l,r:a}=t,c=e&&e.r,p=l.refs===ke?l.refs={}:l.refs,g=l.setupState;if(c!=null&&c!==a&&(Ne(c)?(p[c]=null,we(g,c)&&(g[c]=null)):nt(c)&&(c.value=null)),me(a))cn(a,l,12,[o,p]);else{const X=Ne(a),J=nt(a);if(X||J){const V=()=>{if(t.f){const f=X?we(g,a)?g[a]:p[a]:a.value;i?he(f)&&Co(f,r):he(f)?f.includes(r)||f.push(r):X?(p[a]=[r],we(g,a)&&(g[a]=p[a])):(a.value=[r],t.k&&(p[t.k]=a.value))}else X?(p[a]=o,we(g,a)&&(g[a]=o)):J&&(a.value=o,t.k&&(p[t.k]=o))};o?(V.id=-1,Qe(V,n)):V()}}}const Qe=qd;function gm(t){return Cm(t)}function Cm(t,e){const n=Fc();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:c,setElementText:p,parentNode:g,nextSibling:X,setScopeId:J=pt,insertStaticContent:V}=t,f=(u,h,_,T=null,O=null,U=null,W=void 0,I=null,Y=!!h.dynamicChildren)=>{if(u===h)return;u&&!bs(u,h)&&(T=G(u),L(u,O,U,!0),u=null),h.patchFlag===-2&&(Y=!1,h.dynamicChildren=null);const{type:z,ref:H,shapeFlag:te}=h;switch(z){case nr:j(u,h,_,T);break;case Bs:K(u,h,_,T);break;case xr:u==null&&re(h,_,T,W);break;case Vt:x(u,h,_,T,O,U,W,I,Y);break;default:te&1?be(u,h,_,T,O,U,W,I,Y):te&6?d(u,h,_,T,O,U,W,I,Y):(te&64||te&128)&&z.process(u,h,_,T,O,U,W,I,Y,Z)}H!=null&&O&&to(H,u&&u.ref,U,h||u,!h)},j=(u,h,_,T)=>{if(u==null)s(h.el=l(h.children),_,T);else{const O=h.el=u.el;h.children!==u.children&&c(O,h.children)}},K=(u,h,_,T)=>{u==null?s(h.el=a(h.children||""),_,T):h.el=u.el},re=(u,h,_,T)=>{[u.el,u.anchor]=V(u.children,h,_,T,u.el,u.anchor)},ie=({el:u,anchor:h},_,T)=>{let O;for(;u&&u!==h;)O=X(u),s(u,_,T),u=O;s(h,_,T)},le=({el:u,anchor:h})=>{let _;for(;u&&u!==h;)_=X(u),i(u),u=_;i(h)},be=(u,h,_,T,O,U,W,I,Y)=>{h.type==="svg"?W="svg":h.type==="math"&&(W="mathml"),u==null?ee(h,_,T,O,U,W,I,Y):$(u,h,O,U,W,I,Y)},ee=(u,h,_,T,O,U,W,I)=>{let Y,z;const{props:H,shapeFlag:te,transition:oe,dirs:ce}=u;if(Y=u.el=o(u.type,U,H&&H.is,H),te&8?p(Y,u.children):te&16&&se(u.children,Y,null,T,O,yr(u,U),W,I),ce&&bn(u,null,T,"created"),ae(Y,u,u.scopeId,W,T),H){for(const Pe in H)Pe!=="value"&&!$s(Pe)&&r(Y,Pe,null,H[Pe],U,u.children,T,O,F);"value"in H&&r(Y,"value",null,H.value,U),(z=H.onVnodeBeforeMount)&&kt(z,T,u)}ce&&bn(u,null,T,"beforeMount");const ve=ym(O,oe);ve&&oe.beforeEnter(Y),s(Y,h,_),((z=H&&H.onVnodeMounted)||ve||ce)&&Qe(()=>{z&&kt(z,T,u),ve&&oe.enter(Y),ce&&bn(u,null,T,"mounted")},O)},ae=(u,h,_,T,O)=>{if(_&&J(u,_),T)for(let U=0;U<T.length;U++)J(u,T[U]);if(O){let U=O.subTree;if(h===U){const W=O.vnode;ae(u,W,W.scopeId,W.slotScopeIds,O.parent)}}},se=(u,h,_,T,O,U,W,I,Y=0)=>{for(let z=Y;z<u.length;z++){const H=u[z]=I?sn(u[z]):St(u[z]);f(null,H,h,_,T,O,U,W,I)}},$=(u,h,_,T,O,U,W)=>{const I=h.el=u.el;let{patchFlag:Y,dynamicChildren:z,dirs:H}=h;Y|=u.patchFlag&16;const te=u.props||ke,oe=h.props||ke;let ce;if(_&&wn(_,!1),(ce=oe.onVnodeBeforeUpdate)&&kt(ce,_,h,u),H&&bn(h,u,_,"beforeUpdate"),_&&wn(_,!0),z?S(u.dynamicChildren,z,I,_,T,yr(h,O),U):W||E(u,h,I,null,_,T,yr(h,O),U,!1),Y>0){if(Y&16)P(I,h,te,oe,_,T,O);else if(Y&2&&te.class!==oe.class&&r(I,"class",null,oe.class,O),Y&4&&r(I,"style",te.style,oe.style,O),Y&8){const ve=h.dynamicProps;for(let Pe=0;Pe<ve.length;Pe++){const Me=ve[Pe],qe=te[Me],vt=oe[Me];(vt!==qe||Me==="value")&&r(I,Me,qe,vt,O,u.children,_,T,F)}}Y&1&&u.children!==h.children&&p(I,h.children)}else!W&&z==null&&P(I,h,te,oe,_,T,O);((ce=oe.onVnodeUpdated)||H)&&Qe(()=>{ce&&kt(ce,_,h,u),H&&bn(h,u,_,"updated")},T)},S=(u,h,_,T,O,U,W)=>{for(let I=0;I<h.length;I++){const Y=u[I],z=h[I],H=Y.el&&(Y.type===Vt||!bs(Y,z)||Y.shapeFlag&70)?g(Y.el):_;f(Y,z,H,null,T,O,U,W,!0)}},P=(u,h,_,T,O,U,W)=>{if(_!==T){if(_!==ke)for(const I in _)!$s(I)&&!(I in T)&&r(u,I,_[I],null,W,h.children,O,U,F);for(const I in T){if($s(I))continue;const Y=T[I],z=_[I];Y!==z&&I!=="value"&&r(u,I,z,Y,W,h.children,O,U,F)}"value"in T&&r(u,"value",_.value,T.value,W)}},x=(u,h,_,T,O,U,W,I,Y)=>{const z=h.el=u?u.el:l(""),H=h.anchor=u?u.anchor:l("");let{patchFlag:te,dynamicChildren:oe,slotScopeIds:ce}=h;ce&&(I=I?I.concat(ce):ce),u==null?(s(z,_,T),s(H,_,T),se(h.children||[],_,H,O,U,W,I,Y)):te>0&&te&64&&oe&&u.dynamicChildren?(S(u.dynamicChildren,oe,_,O,U,W,I),(h.key!=null||O&&h===O.subTree)&&yu(u,h,!0)):E(u,h,_,H,O,U,W,I,Y)},d=(u,h,_,T,O,U,W,I,Y)=>{h.slotScopeIds=I,u==null?h.shapeFlag&512?O.ctx.activate(h,_,T,W,Y):b(h,_,T,O,U,W,Y):v(u,h,Y)},b=(u,h,_,T,O,U,W)=>{const I=u.component=Am(u,T,O);if(hu(u)&&(I.ctx.renderer=Z),Rm(I),I.asyncDep){if(O&&O.registerDep(I,y),!u.el){const Y=I.subTree=Nt(Bs);K(null,Y,h,_)}}else y(I,u,h,_,O,U,W)},v=(u,h,_)=>{const T=h.component=u.component;if(zd(u,h,_))if(T.asyncDep&&!T.asyncResolved){w(T,h,_);return}else T.next=h,Ad(T.update),T.effect.dirty=!0,T.update();else h.el=u.el,T.vnode=h},y=(u,h,_,T,O,U,W)=>{const I=()=>{if(u.isMounted){let{next:H,bu:te,u:oe,parent:ce,vnode:ve}=u;{const zn=xu(u);if(zn){H&&(H.el=ve.el,w(u,H,W)),zn.asyncDep.then(()=>{u.isUnmounted||I()});return}}let Pe=H,Me;wn(u,!1),H?(H.el=ve.el,w(u,H,W)):H=ve,te&&gr(te),(Me=H.props&&H.props.onVnodeBeforeUpdate)&&kt(Me,ce,H,ve),wn(u,!0);const qe=ca(u),vt=u.subTree;u.subTree=qe,f(vt,qe,g(vt.el),G(vt),u,O,U),H.el=qe.el,Pe===null&&Id(u,qe.el),oe&&Qe(oe,O),(Me=H.props&&H.props.onVnodeUpdated)&&Qe(()=>kt(Me,ce,H,ve),O)}else{let H;const{el:te,props:oe}=h,{bm:ce,m:ve,parent:Pe}=u,Me=yi(h);wn(u,!1),ce&&gr(ce),!Me&&(H=oe&&oe.onVnodeBeforeMount)&&kt(H,Pe,h),wn(u,!0);{const qe=u.subTree=ca(u);f(null,qe,_,T,u,O,U),h.el=qe.el}if(ve&&Qe(ve,O),!Me&&(H=oe&&oe.onVnodeMounted)){const qe=h;Qe(()=>kt(H,Pe,qe),O)}(h.shapeFlag&256||Pe&&yi(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&u.a&&Qe(u.a,O),u.isMounted=!0,h=_=T=null}},Y=u.effect=new Po(I,pt,()=>Lo(z),u.scope),z=u.update=()=>{Y.dirty&&Y.run()};z.id=u.uid,wn(u,!0),z()},w=(u,h,_)=>{h.component=u;const T=u.vnode.props;u.vnode=h,u.next=null,vm(u,h.props,T,_),_m(u,h.children,_),On(),aa(u),An()},E=(u,h,_,T,O,U,W,I,Y=!1)=>{const z=u&&u.children,H=u?u.shapeFlag:0,te=h.children,{patchFlag:oe,shapeFlag:ce}=h;if(oe>0){if(oe&128){C(z,te,_,T,O,U,W,I,Y);return}else if(oe&256){M(z,te,_,T,O,U,W,I,Y);return}}ce&8?(H&16&&F(z,O,U),te!==z&&p(_,te)):H&16?ce&16?C(z,te,_,T,O,U,W,I,Y):F(z,O,U,!0):(H&8&&p(_,""),ce&16&&se(te,_,T,O,U,W,I,Y))},M=(u,h,_,T,O,U,W,I,Y)=>{u=u||Yn,h=h||Yn;const z=u.length,H=h.length,te=Math.min(z,H);let oe;for(oe=0;oe<te;oe++){const ce=h[oe]=Y?sn(h[oe]):St(h[oe]);f(u[oe],ce,_,null,O,U,W,I,Y)}z>H?F(u,O,U,!0,!1,te):se(h,_,T,O,U,W,I,Y,te)},C=(u,h,_,T,O,U,W,I,Y)=>{let z=0;const H=h.length;let te=u.length-1,oe=H-1;for(;z<=te&&z<=oe;){const ce=u[z],ve=h[z]=Y?sn(h[z]):St(h[z]);if(bs(ce,ve))f(ce,ve,_,null,O,U,W,I,Y);else break;z++}for(;z<=te&&z<=oe;){const ce=u[te],ve=h[oe]=Y?sn(h[oe]):St(h[oe]);if(bs(ce,ve))f(ce,ve,_,null,O,U,W,I,Y);else break;te--,oe--}if(z>te){if(z<=oe){const ce=oe+1,ve=ce<H?h[ce].el:T;for(;z<=oe;)f(null,h[z]=Y?sn(h[z]):St(h[z]),_,ve,O,U,W,I,Y),z++}}else if(z>oe)for(;z<=te;)L(u[z],O,U,!0),z++;else{const ce=z,ve=z,Pe=new Map;for(z=ve;z<=oe;z++){const it=h[z]=Y?sn(h[z]):St(h[z]);it.key!=null&&Pe.set(it.key,z)}let Me,qe=0;const vt=oe-ve+1;let zn=!1,Zl=0;const vs=new Array(vt);for(z=0;z<vt;z++)vs[z]=0;for(z=ce;z<=te;z++){const it=u[z];if(qe>=vt){L(it,O,U,!0);continue}let Et;if(it.key!=null)Et=Pe.get(it.key);else for(Me=ve;Me<=oe;Me++)if(vs[Me-ve]===0&&bs(it,h[Me])){Et=Me;break}Et===void 0?L(it,O,U,!0):(vs[Et-ve]=z+1,Et>=Zl?Zl=Et:zn=!0,f(it,h[Et],_,null,O,U,W,I,Y),qe++)}const Jl=zn?xm(vs):Yn;for(Me=Jl.length-1,z=vt-1;z>=0;z--){const it=ve+z,Et=h[it],Ql=it+1<H?h[it+1].el:T;vs[z]===0?f(null,Et,_,Ql,O,U,W,I,Y):zn&&(Me<0||z!==Jl[Me]?A(Et,_,Ql,2):Me--)}}},A=(u,h,_,T,O=null)=>{const{el:U,type:W,transition:I,children:Y,shapeFlag:z}=u;if(z&6){A(u.component.subTree,h,_,T);return}if(z&128){u.suspense.move(h,_,T);return}if(z&64){W.move(u,h,_,Z);return}if(W===Vt){s(U,h,_);for(let te=0;te<Y.length;te++)A(Y[te],h,_,T);s(u.anchor,h,_);return}if(W===xr){ie(u,h,_);return}if(T!==2&&z&1&&I)if(T===0)I.beforeEnter(U),s(U,h,_),Qe(()=>I.enter(U),O);else{const{leave:te,delayLeave:oe,afterLeave:ce}=I,ve=()=>s(U,h,_),Pe=()=>{te(U,()=>{ve(),ce&&ce()})};oe?oe(U,ve,Pe):Pe()}else s(U,h,_)},L=(u,h,_,T=!1,O=!1)=>{const{type:U,props:W,ref:I,children:Y,dynamicChildren:z,shapeFlag:H,patchFlag:te,dirs:oe}=u;if(I!=null&&to(I,null,_,u,!0),H&256){h.ctx.deactivate(u);return}const ce=H&1&&oe,ve=!yi(u);let Pe;if(ve&&(Pe=W&&W.onVnodeBeforeUnmount)&&kt(Pe,h,u),H&6)B(u.component,_,T);else{if(H&128){u.suspense.unmount(_,T);return}ce&&bn(u,null,h,"beforeUnmount"),H&64?u.type.remove(u,h,_,O,Z,T):z&&(U!==Vt||te>0&&te&64)?F(z,h,_,!1,!0):(U===Vt&&te&384||!O&&H&16)&&F(Y,h,_),T&&R(u)}(ve&&(Pe=W&&W.onVnodeUnmounted)||ce)&&Qe(()=>{Pe&&kt(Pe,h,u),ce&&bn(u,null,h,"unmounted")},_)},R=u=>{const{type:h,el:_,anchor:T,transition:O}=u;if(h===Vt){N(_,T);return}if(h===xr){le(u);return}const U=()=>{i(_),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(u.shapeFlag&1&&O&&!O.persisted){const{leave:W,delayLeave:I}=O,Y=()=>W(_,U);I?I(u.el,U,Y):Y()}else U()},N=(u,h)=>{let _;for(;u!==h;)_=X(u),i(u),u=_;i(h)},B=(u,h,_)=>{const{bum:T,scope:O,update:U,subTree:W,um:I}=u;T&&gr(T),O.stop(),U&&(U.active=!1,L(W,u,h,_)),I&&Qe(I,h),Qe(()=>{u.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve())},F=(u,h,_,T=!1,O=!1,U=0)=>{for(let W=U;W<u.length;W++)L(u[W],h,_,T,O)},G=u=>u.shapeFlag&6?G(u.component.subTree):u.shapeFlag&128?u.suspense.next():X(u.anchor||u.el);let q=!1;const ne=(u,h,_)=>{u==null?h._vnode&&L(h._vnode,null,null,!0):f(h._vnode||null,u,h,null,null,null,_),q||(q=!0,aa(),ou(),q=!1),h._vnode=u},Z={p:f,um:L,m:A,r:R,mt:b,mc:se,pc:E,pbc:S,n:G,o:t};return{render:ne,hydrate:void 0,createApp:dm(ne)}}function yr({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function wn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function ym(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function yu(t,e,n=!1){const s=t.children,i=e.children;if(he(s)&&he(i))for(let r=0;r<s.length;r++){const o=s[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=sn(i[r]),l.el=o.el),n||yu(o,l)),l.type===nr&&(l.el=o.el)}}function xm(t){const e=t.slice(),n=[0];let s,i,r,o,l;const a=t.length;for(s=0;s<a;s++){const c=t[s];if(c!==0){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,t[n[l]]<c?r=l+1:o=l;c<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function xu(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:xu(e)}const Pm=t=>t.__isTeleport,Vt=Symbol.for("v-fgt"),nr=Symbol.for("v-txt"),Bs=Symbol.for("v-cmt"),xr=Symbol.for("v-stc"),Os=[];let _t=null;function Fo(t=!1){Os.push(_t=t?null:[])}function Em(){Os.pop(),_t=Os[Os.length-1]||null}let js=1;function _a(t){js+=t}function km(t){return t.dynamicChildren=js>0?_t||Yn:null,Em(),js>0&&_t&&_t.push(t),t}function Bo(t,e,n,s,i,r){return km(jo(t,e,n,s,i,r,!0))}function Vm(t){return t?t.__v_isVNode===!0:!1}function bs(t,e){return t.type===e.type&&t.key===e.key}const sr="__vInternal",Pu=({key:t})=>t??null,Pi=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ne(t)||nt(t)||me(t)?{i:$t,r:t,k:e,f:!!n}:t:null);function jo(t,e=null,n=null,s=0,i=null,r=t===Vt?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Pu(e),ref:e&&Pi(e),scopeId:cu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:$t};return l?(No(a,n),r&128&&t.normalize(a)):n&&(a.shapeFlag|=Ne(n)?8:16),js>0&&!o&&_t&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&_t.push(a),a}const Nt=Sm;function Sm(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===Kd)&&(t=Bs),Vm(t)){const l=is(t,e,!0);return n&&No(l,n),js>0&&!r&&_t&&(l.shapeFlag&6?_t[_t.indexOf(t)]=l:_t.push(l)),l.patchFlag|=-2,l}if(jm(t)&&(t=t.__vccOpts),e){e=Mm(e);let{class:l,style:a}=e;l&&!Ne(l)&&(e.class=Zi(l)),Re(a)&&(Zc(a)&&!he(a)&&(a=Ze({},a)),e.style=xo(a))}const o=Ne(t)?1:Ud(t)?128:Pm(t)?64:Re(t)?4:me(t)?2:0;return jo(t,e,n,s,i,o,r,!0)}function Mm(t){return t?Zc(t)||sr in t?Ze({},t):t:null}function is(t,e,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=t,l=e?Tm(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Pu(l),ref:e&&e.ref?n&&i?he(i)?i.concat(Pi(e)):[i,Pi(e)]:Pi(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Vt?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&is(t.ssContent),ssFallback:t.ssFallback&&is(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function $m(t=" ",e=0){return Nt(nr,null,t,e)}function St(t){return t==null||typeof t=="boolean"?Nt(Bs):he(t)?Nt(Vt,null,t.slice()):typeof t=="object"?sn(t):Nt(nr,null,String(t))}function sn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:is(t)}function No(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(he(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),No(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(sr in e)?e._ctx=$t:i===3&&$t&&($t.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else me(e)?(e={default:e,_ctx:$t},n=32):(e=String(e),s&64?(n=16,e=[$m(e)]):n=8);t.children=e,t.shapeFlag|=n}function Tm(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=Zi([e.class,s.class]));else if(i==="style")e.style=xo([e.style,s.style]);else if(Gi(i)){const r=e[i],o=s[i];o&&r!==o&&!(he(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function kt(t,e,n,s=null){gt(t,e,7,[n,s])}const Lm=vu();let Om=0;function Am(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||Lm,r={uid:Om++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new rd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wu(s,i),emitsOptions:au(s,i),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:s.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Fd.bind(null,r),t.ce&&t.ce(r),r}let Ge=null,Di,no;{const t=Fc(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Di=e("__VUE_INSTANCE_SETTERS__",n=>Ge=n),no=e("__VUE_SSR_SETTERS__",n=>ir=n)}const Xs=t=>{const e=Ge;return Di(t),t.scope.on(),()=>{t.scope.off(),Di(e)}},ga=()=>{Ge&&Ge.scope.off(),Di(null)};function Eu(t){return t.vnode.shapeFlag&4}let ir=!1;function Rm(t,e=!1){e&&no(e);const{props:n,children:s}=t.vnode,i=Eu(t);fm(t,n,i,e),wm(t,s);const r=i?Dm(t,e):void 0;return e&&no(!1),r}function Dm(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Jc(new Proxy(t.ctx,om));const{setup:s}=n;if(s){const i=t.setupContext=s.length>1?Bm(t):null,r=Xs(t);On();const o=cn(s,t,0,[t.props,i]);if(An(),r(),Rc(o)){if(o.then(ga,ga),e)return o.then(l=>{Ca(t,l)}).catch(l=>{Qi(l,t,0)});t.asyncDep=o}else Ca(t,o)}else ku(t)}function Ca(t,e,n){me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Re(e)&&(t.setupState=nu(e)),ku(t)}function ku(t,e,n){const s=t.type;t.render||(t.render=s.render||pt);{const i=Xs(t);On();try{lm(t)}finally{An(),i()}}}function Fm(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return tt(t,"get","$attrs"),e[n]}}))}function Bm(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Fm(t)},slots:t.slots,emit:t.emit,expose:e}}function zo(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(nu(Jc(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ts)return Ts[n](t)},has(e,n){return n in e||n in Ts}}))}function jm(t){return me(t)&&"__vccOpts"in t}const Vu=(t,e)=>Sd(t,e,ir),Nm="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const zm="http://www.w3.org/2000/svg",Im="http://www.w3.org/1998/Math/MathML",rn=typeof document<"u"?document:null,ya=rn&&rn.createElement("template"),Km={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?rn.createElementNS(zm,t):e==="mathml"?rn.createElementNS(Im,t):rn.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>rn.createTextNode(t),createComment:t=>rn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>rn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{ya.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const l=ya.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Um=Symbol("_vtc");function qm(t,e,n){const s=t[Um];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const xa=Symbol("_vod"),Hm=Symbol("_vsh"),Gm=Symbol(""),Wm=/(^|;)\s*display\s*:/;function Ym(t,e,n){const s=t.style,i=Ne(n);let r=!1;if(n&&!i){if(e)if(Ne(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Ei(s,l,"")}else for(const o in e)n[o]==null&&Ei(s,o,"");for(const o in n)o==="display"&&(r=!0),Ei(s,o,n[o])}else if(i){if(e!==n){const o=s[Gm];o&&(n+=";"+o),s.cssText=n,r=Wm.test(n)}}else e&&t.removeAttribute("style");xa in t&&(t[xa]=r?s.display:"",t[Hm]&&(s.display="none"))}const Pa=/\s*!important$/;function Ei(t,e,n){if(he(n))n.forEach(s=>Ei(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Xm(t,e);Pa.test(n)?t.setProperty(as(s),n.replace(Pa,""),"important"):t[s]=n}}const Ea=["Webkit","Moz","ms"],Pr={};function Xm(t,e){const n=Pr[e];if(n)return n;let s=ns(e);if(s!=="filter"&&s in t)return Pr[e]=s;s=Dc(s);for(let i=0;i<Ea.length;i++){const r=Ea[i]+s;if(r in t)return Pr[e]=r}return e}const ka="http://www.w3.org/1999/xlink";function Zm(t,e,n,s,i){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(ka,e.slice(6,e.length)):t.setAttributeNS(ka,e,n);else{const r=id(e);n==null||r&&!Bc(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function Jm(t,e,n,s,i,r,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,i,r),t[e]=n??"";return}const l=t.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const c=l==="OPTION"?t.getAttribute("value")||"":t.value,p=n??"";(c!==p||!("_value"in t))&&(t.value=p),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Bc(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function Qm(t,e,n,s){t.addEventListener(e,n,s)}function ef(t,e,n,s){t.removeEventListener(e,n,s)}const Va=Symbol("_vei");function tf(t,e,n,s,i=null){const r=t[Va]||(t[Va]={}),o=r[e];if(s&&o)o.value=s;else{const[l,a]=nf(e);if(s){const c=r[e]=of(s,i);Qm(t,l,c,a)}else o&&(ef(t,l,o,a),r[e]=void 0)}}const Sa=/(?:Once|Passive|Capture)$/;function nf(t){let e;if(Sa.test(t)){e={};let s;for(;s=t.match(Sa);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):as(t.slice(2)),e]}let Er=0;const sf=Promise.resolve(),rf=()=>Er||(sf.then(()=>Er=0),Er=Date.now());function of(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;gt(lf(s,n.value),e,5,[s])};return n.value=t,n.attached=rf(),n}function lf(t,e){if(he(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Ma=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,af=(t,e,n,s,i,r,o,l,a)=>{const c=i==="svg";e==="class"?qm(t,s,c):e==="style"?Ym(t,n,s):Gi(e)?go(e)||tf(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):cf(t,e,s,c))?Jm(t,e,s,r,o,l,a):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Zm(t,e,s,c))};function cf(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ma(e)&&me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ma(e)&&Ne(n)?!1:e in t}const uf=Ze({patchProp:af},Km);let $a;function pf(){return $a||($a=gm(uf))}const hf=(...t)=>{const e=pf().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=mf(s);if(!i)return;const r=e._component;!me(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,df(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function df(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function mf(t){return Ne(t)?document.querySelector(t):t}/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function Ee(t){return t==null}function Io(t){return t!==null&&typeof t=="object"}function so(t){return t!==null&&typeof t=="object"}function ff(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Vn(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((s,i)=>{const r=t[i],o=e[i];return so(r)&&so(o)?Object.assign(Object.assign({},s),{[i]:Vn(r,o)}):Object.assign(Object.assign({},s),{[i]:i in e?o:r})},{})}function Ko(t){return Io(t)?"target"in t:!1}const vf={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let Ie=class Gn{static alreadyDisposed(){return new Gn({type:"alreadydisposed"})}static notBindable(){return new Gn({type:"notbindable"})}static notCompatible(e,n){return new Gn({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new Gn({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Gn({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=vf[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},Ta=class Su{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const s=this.read();if(!Su.isBindable(s))throw Ie.notBindable();if(!(e in s))throw Ie.propertyNotFound(e);s[e]=n}},De=class{constructor(){this.observers_={}}on(e,n,s){var i;let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n,key:(i=s==null?void 0:s.key)!==null&&i!==void 0?i:n}),this}off(e,n){const s=this.observers_[e];return s&&(this.observers_[e]=s.filter(i=>i.key!==n)),this}emit(e,n){const s=this.observers_[e];s&&s.forEach(i=>{i.handler(n)})}},bf=class{constructor(e,n){var s;this.constraint_=n==null?void 0:n.constraint,this.equals_=(s=n==null?void 0:n.equals)!==null&&s!==void 0?s:(i,r)=>i===r,this.emitter=new De,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const s=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,i)&&!s.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:s,previousRawValue:r,rawValue:i,sender:this}))}},wf=class{constructor(e){this.emitter=new De,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const s=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!s.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:s,previousRawValue:i,rawValue:this.value_,sender:this}))}},_f=class{constructor(e){this.emitter=new De,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function Se(t,e){const n=e==null?void 0:e.constraint,s=e==null?void 0:e.equals;return!n&&!s?new wf(t):new bf(t,e)}function gf(t){return[new _f(t),(e,n)=>{t.setRawValue(e,n)}]}let fe=class Mu{constructor(e){this.emitter=new De,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((s,i)=>Object.assign(s,{[i]:Se(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new Mu(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},Zs=class{constructor(e){this.values=fe.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),s=this.values.get("min");return Math.min(Math.max(e,s),n)}},Cf=class{constructor(e){this.values=fe.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),s=this.values.get("min");let i=e;return Ee(s)||(i=Math.max(i,s)),Ee(n)||(i=Math.min(i,n)),i}},yf=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,s=Math.round((e-n)/this.step);return n+s*this.step}},xf=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const Pf={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let Ef=class{constructor(e,n,s){this.left=n,this.operator=e,this.right=s}evaluate(){const e=Pf[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const kf={"+":t=>t,"-":t=>-t,"~":t=>~t};let Vf=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=kf[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function Uo(t){return(e,n)=>{for(let s=0;s<t.length;s++){const i=t[s](e,n);if(i!=="")return i}return""}}function Ns(t,e){var n;const s=t.substr(e).match(/^\s+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Sf(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function zs(t,e){var n;const s=t.substr(e).match(/^[0-9]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Mf(t,e){const n=zs(t,e);if(n!=="")return n;const s=t.substr(e,1);if(e+=1,s!=="-"&&s!=="+")return"";const i=zs(t,e);return i===""?"":s+i}function qo(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const s=Mf(t,e);return s===""?"":n+s}function $u(t,e){const n=t.substr(e,1);if(n==="0")return n;const s=Sf(t,e);return e+=s.length,s===""?"":s+zs(t,e)}function $f(t,e){const n=$u(t,e);if(e+=n.length,n==="")return"";const s=t.substr(e,1);if(e+=s.length,s!==".")return"";const i=zs(t,e);return e+=i.length,n+s+i+qo(t,e)}function Tf(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const s=zs(t,e);return e+=s.length,s===""?"":n+s+qo(t,e)}function Lf(t,e){const n=$u(t,e);return e+=n.length,n===""?"":n+qo(t,e)}const Of=Uo([$f,Tf,Lf]);function Af(t,e){var n;const s=t.substr(e).match(/^[01]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Rf(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const s=Af(t,e);return s===""?"":n+s}function Df(t,e){var n;const s=t.substr(e).match(/^[0-7]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Ff(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const s=Df(t,e);return s===""?"":n+s}function Bf(t,e){var n;const s=t.substr(e).match(/^[0-9a-f]+/i);return(n=s&&s[0])!==null&&n!==void 0?n:""}function jf(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const s=Bf(t,e);return s===""?"":n+s}const Nf=Uo([Rf,Ff,jf]),zf=Uo([Nf,Of]);function If(t,e){const n=zf(t,e);return e+=n.length,n===""?null:{evaluable:new xf(n),cursor:e}}function Kf(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const s=Lu(t,e);if(!s)return null;e=s.cursor,e+=Ns(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:s.evaluable,cursor:e}}function Uf(t,e){var n;return(n=If(t,e))!==null&&n!==void 0?n:Kf(t,e)}function Tu(t,e){const n=Uf(t,e);if(n)return n;const s=t.substr(e,1);if(e+=s.length,s!=="+"&&s!=="-"&&s!=="~")return null;const i=Tu(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new Vf(s,i.evaluable)}):null}function qf(t,e,n){n+=Ns(e,n).length;const s=t.filter(i=>e.startsWith(i,n))[0];return s?(n+=s.length,n+=Ns(e,n).length,{cursor:n,operator:s}):null}function Hf(t,e){return(n,s)=>{const i=t(n,s);if(!i)return null;s=i.cursor;let r=i.evaluable;for(;;){const o=qf(e,n,s);if(!o)break;s=o.cursor;const l=t(n,s);if(!l)return null;s=l.cursor,r=new Ef(o.operator,r,l.evaluable)}return r?{cursor:s,evaluable:r}:null}}const Gf=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>Hf(t,e),Tu);function Lu(t,e){return e+=Ns(t,e).length,Gf(t,e)}function Wf(t){const e=Lu(t,0);return!e||e.cursor+Ns(t,e.cursor).length!==t.length?null:e.evaluable}function It(t){var e;const n=Wf(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function Ou(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=It(t);if(!Ee(e))return e}return 0}function Yf(t){return String(t)}function st(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function ye(t,e,n,s,i){const r=(t-e)/(n-e);return s+r*(i-s)}function La(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Fe(t,e,n){return Math.min(Math.max(t,e),n)}function Au(t,e){return(t%e+e)%e}function Xf(t,e){return Ee(t.step)?Math.max(La(e),2):La(t.step)}function Ru(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function Du(t,e){var n;const s=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return s===0?.1:Math.pow(10,Math.floor(Math.log10(s))-1)}function Fu(t,e){return Ee(t.step)?null:new yf(t.step,e)}function Bu(t){return!Ee(t.max)&&!Ee(t.min)?new Zs({max:t.max,min:t.min}):!Ee(t.max)||!Ee(t.min)?new Cf({max:t.max,min:t.min}):null}function ju(t,e){var n,s,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:st(Xf(t,e)),keyScale:(s=t.keyScale)!==null&&s!==void 0?s:Ru(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:Du(t,e)}}function Nu(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function Ho(t){return{constraint:t.constraint,textProps:fe.fromObject(ju(t.params,t.initialValue))}}let Rn=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},rr=class{constructor(e){this.target=e}},Js=class extends rr{constructor(e,n,s){super(e),this.value=n,this.last=s??!0}},Zf=class extends rr{constructor(e,n){super(e),this.expanded=n}},Jf=class extends rr{constructor(e,n){super(e),this.index=n}};class Qf extends rr{constructor(e,n){super(e),this.native=n}}let Is=class extends Rn{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new De,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new Js(this,n.binding.target.read(),e.options.last))}};class ev{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new De}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function tv(t){if(!("binding"in t))return!1;const e=t.binding;return Ko(e)&&"read"in e&&"write"in e}function nv(t,e){const s=Object.keys(e).reduce((i,r)=>{if(i===void 0)return;const o=e[r],l=o(t[r]);return l.succeeded?Object.assign(Object.assign({},i),{[r]:l.value}):void 0},{});return s}function sv(t,e){return t.reduce((n,s)=>{if(n===void 0)return;const i=e(s);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function iv(t){return t===null?!1:typeof t=="object"}function Rt(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const s=t(n);return s!==void 0?{succeeded:!0,value:s}:{succeeded:!1,value:void 0}}}function Oa(t){return{custom:e=>Rt(e)(t),boolean:Rt(e=>typeof e=="boolean"?e:void 0)(t),number:Rt(e=>typeof e=="number"?e:void 0)(t),string:Rt(e=>typeof e=="string"?e:void 0)(t),function:Rt(e=>typeof e=="function"?e:void 0)(t),constant:e=>Rt(n=>n===e?e:void 0)(t),raw:Rt(e=>e)(t),object:e=>Rt(n=>{if(iv(n))return nv(n,e)})(t),array:e=>Rt(n=>{if(Array.isArray(n))return sv(n,e)})(t)}}const io={optional:Oa(!0),required:Oa(!1)};function Te(t,e){const n=e(io),s=io.required.object(n)(t);return s.succeeded?s.value:void 0}function ot(t,e,n,s){if(e&&!e(t))return!1;const i=Te(t,n);return i?s(i):!1}function lt(t,e){var n;return Vn((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function kn(t){return"value"in t}function zu(t){if(!Io(t)||!("binding"in t))return!1;const e=t.binding;return Ko(e)}const Tt="http://www.w3.org/2000/svg";function Fi(t){t.offsetHeight}function rv(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function Go(t){return t.ontouchstart!==void 0}function ov(){return globalThis}function lv(){return ov().document}function av(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const cv={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function or(t,e){const n=t.createElementNS(Tt,"svg");return n.innerHTML=cv[e],n}function Iu(t,e,n){t.insertBefore(e,t.children[n])}function Wo(t){t.parentElement&&t.parentElement.removeChild(t)}function Ku(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function uv(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function Uu(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function zt(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Lt(t,e,n){zt(t.value(e),n)}const pv="tp";function _e(t){return(n,s)=>[pv,"-",t,"v",n?`_${n}`:"",s?`-${s}`:""].join("")}const ws=_e("lbl");function hv(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}let qu=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ws()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(ws("l")),Lt(n.props,"label",r=>{Ee(r)?this.element.classList.add(ws(void 0,"nol")):(this.element.classList.remove(ws(void 0,"nol")),uv(s),s.appendChild(hv(e,r)))}),this.element.appendChild(s),this.labelElement=s;const i=e.createElement("div");i.classList.add(ws("v")),this.element.appendChild(i),this.valueElement=i}},Hu=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new qu(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return ot(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return lt(null,{label:this.props.get("label")})}};function dv(){return["veryfirst","first","last","verylast"]}const Aa=_e(""),Ra={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let lr=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{dv().forEach(s=>{n.classList.remove(Aa(void 0,Ra[s]))}),this.blade.get("positions").forEach(s=>{n.classList.add(Aa(void 0,Ra[s]))})}),this.viewProps.handleDispose(()=>{Wo(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return ot(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return lt(null,Object.assign({},this.viewProps.exportState()))}},Sn=class extends lr{constructor(e,n){if(n.value!==n.valueController.value)throw Ie.shouldNeverHappen();const s=n.valueController.viewProps,i=new Hu(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new qu(e,{props:n.props,viewProps:s}),viewProps:s})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return ot(e,n=>{var s,i,r;return super.importState(n)&&this.labelController.importProps(n)&&((r=(i=(s=this.valueController).importProps)===null||i===void 0?void 0:i.call(s,e))!==null&&r!==void 0?r:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,s;return lt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(s=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&s!==void 0?s:{}))}};function Da(t){const e=Object.assign({},t);return delete e.value,e}class Gu extends Sn{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return ot(e,n=>super.importState(Da(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return lt(()=>Da(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function mv(t){return kn(t)&&zu(t.value)}class fv extends Gu{importState(e){return ot(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function vv(t){return kn(t)&&tv(t.value)}function Wu(t,e){for(;t.length<e;)t.push(void 0)}function bv(t){const e=[];return Wu(e,t),e}function wv(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function _v(t,e){const n=[...wv(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Wu(n,t.length),n}class gv{constructor(e){this.emitter=new De,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Se(bv(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=_v(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Cv(t){if(!("binding"in t))return!1;const e=t.binding;return Ko(e)&&"read"in e&&!("write"in e)}class yv extends Gu{exportState(){return lt(()=>super.exportState(),{binding:{readonly:!0}})}}function xv(t){return kn(t)&&Cv(t.value)}let Pv=class extends Rn{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const s=n.bind(this);return this.controller.buttonController.emitter.on(e,r=>{s(new Qf(this,r.nativeEvent))}),this}off(e,n){return this.controller.buttonController.emitter.off(e,n),this}};function Ev(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function cs(t,e){return n=>{Ev(t,e,n)}}function Yo(t,e){zt(t,n=>{e.textContent=n??""})}const kr=_e("btn");let kv=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(kr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("button");s.classList.add(kr("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const i=e.createElement("div");i.classList.add(kr("t")),Yo(n.props.value("title"),i),this.buttonElement.appendChild(i)}},Vv=class{constructor(e,n){this.emitter=new De,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new kv(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return ot(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return lt(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}},Fa=class extends lr{constructor(e,n){const s=new Vv(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new Hu(e,{blade:n.blade,props:n.labelProps,valueController:s});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=s,this.labelController=i}importState(e){return ot(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return lt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},Yu=class{constructor(e){const[n,s]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=s??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const us=new Yu("2.0.3");function Je(t){return Object.assign({core:us},t)}const Sv=Je({id:"button",type:"blade",accept(t){const e=Te(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Fa(t.document,{blade:t.blade,buttonProps:fe.fromObject({title:t.params.title}),labelProps:fe.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof Fa?new Pv(t.controller):null}});function Mv(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function $v(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Tv(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Lv(t){return Io(t)?"refresh"in t&&typeof t.refresh=="function":!1}function Ov(t,e){if(!Ta.isBindable(t))throw Ie.notBindable();return new Ta(t,e)}let Av=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new De,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,s){const i=s??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,Ov(e,n),i),l=this.pool_.createBindingApi(o);return this.add(l,i.index)}addFolder(e){return $v(this,e)}addButton(e){return Mv(this,e)}addTab(e){return Tv(this,e)}add(e,n){const s=e.controller;return this.controller_.rack.add(s,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,s=this.pool_.createBlade(n,e),i=this.pool_.createApi(s);return this.add(i,e.index)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.children.forEach(e=>{Lv(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,s=this.pool_.createApi(n),i=zu(n.value)?n.value.binding:null;this.emitter_.emit("change",new Js(s,i?i.target.read():n.value.rawValue,e.options.last))}},Xo=class extends Rn{constructor(e,n){super(e),this.rackApi_=new Av(e.rackController,n)}refresh(){this.rackApi_.refresh()}},Zo=class extends lr{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return ot(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((s,i)=>s.importState(n.children[i])))}exportState(){return lt(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function ro(t){return"rackController"in t}let Rv=class{constructor(e){this.emitter=new De,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Ie.shouldNeverHappen();const s=n!==void 0?n:this.items_.length;this.items_.splice(s,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:s,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const s=this.extract_(e);s&&(s.allItems().forEach(i=>{this.cache_.delete(i)}),s.emitter.off("add",this.onSubListAdd_),s.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function Dv(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(kn(s)&&s.value===e)return s}return null}function Fv(t){return ro(t)?t.rackController.rack.bcSet_:null}let Bv=class{constructor(e){var n,s;this.emitter=new De,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(s=this.blade_)===null||s===void 0||s.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Rv(Fv),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var s;(s=e.parent)===null||s===void 0||s.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const s=e.item;if(s.viewProps.emitter.on("change",this.onChildViewPropsChange_),s.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),s.viewProps.handleDispose(this.onChildDispose_),kn(s))s.value.emitter.on("change",this.onChildValueChange_);else if(ro(s)){const i=s.rackController.rack;if(i){const r=i.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const s=e.item;if(kn(s))s.value.emitter.off("change",this.onChildValueChange_);else if(ro(s)){const i=s.rackController.rack;if(i){const r=i.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],s=e[e.length-1];this.bcSet_.items.forEach(i=>{const r=[];i===n&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),i===s&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),i.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=Dv(this.find(kn),e.sender);if(!n)throw Ie.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},Jo=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new Bv({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let s=this.rack.children.length-1;s>=0;s--)this.rack.children[s].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Iu(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Wo(e.bladeController.view.element)}};function ps(){return new fe({positions:Se([],{equals:ff})})}let Qo=class Xu extends fe{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},s=fe.createCore(n);return new Xu(s)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ee(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const s=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Lt(this,"expanded",s),Lt(this,"temporaryExpanded",s)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function jv(t,e){let n=0;return rv(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),Fi(e),n=e.clientHeight,t.set("temporaryExpanded",null),Fi(e)}),n}function Ba(t,e){e.style.height=t.styleHeight}function el(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),Ee(t.get("expandedHeight"))){const n=jv(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),Fi(e)}),t.emitter.on("change",()=>{Ba(t,e)}),Ba(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let Zu=class extends Xo{constructor(e,n){super(e,n),this.emitter_=new De,this.controller.foldable.value("expanded").emitter.on("change",s=>{this.emitter_.emit("fold",new Zf(this,s.sender.rawValue))}),this.rackApi_.on("change",s=>{this.emitter_.emit("change",s)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,s){return this.rackApi_.addBinding(e,n,s)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}};const Ju=_e("cnt");let Nv=class{constructor(e,n){var s;this.className_=_e((s=n.viewName)!==null&&s!==void 0?s:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Ju()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Lt(this.foldable_,"completed",cs(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Lt(n.props,"title",c=>{Ee(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(this.className_("t")),Yo(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const a=e.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}},oo=class extends Zo{constructor(e,n){var s;const i=Qo.create((s=n.expanded)!==null&&s!==void 0?s:!0),r=new Nv(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Jo({blade:n.blade,element:r.containerElement,root:n.root,viewProps:n.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,el(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return ot(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return lt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const zv=Je({id:"folder",type:"blade",accept(t){const e=Te(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new oo(t.document,{blade:t.blade,expanded:t.params.expanded,props:fe.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof oo?new Zu(t.controller,t.pool):null}}),Iv=_e("");function ja(t,e){return cs(t,Iv(void 0,e))}let Dn=class Qu extends fe{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=gf(Se(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,s,i;const r=e??{};return new Qu(fe.createCore({disabled:(n=r.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(s=r.hidden)!==null&&s!==void 0?s:!1,parent:(i=r.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){zt(this.globalDisabled_,ja(e,"disabled")),Lt(this,"hidden",ja(e,"hidden"))}bindDisabled(e){zt(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){zt(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const s=e.previousRawValue;s==null||s.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const Na=_e("tbp");let Kv=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Na()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Na("c")),this.element.appendChild(s),this.containerElement=s}};const _s=_e("tbi");let Uv=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(_s()),n.viewProps.bindClassModifiers(this.element),Lt(n.props,"selected",r=>{r?this.element.classList.add(_s(void 0,"sel")):this.element.classList.remove(_s(void 0,"sel"))});const s=e.createElement("button");s.classList.add(_s("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const i=e.createElement("div");i.classList.add(_s("t")),Yo(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}},qv=class{constructor(e,n){this.emitter=new De,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Uv(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},lo=class extends Zo{constructor(e,n){const s=new Kv(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Jo({blade:n.blade,element:s.containerElement,viewProps:n.viewProps}),view:s})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new qv(e,{props:n.itemProps,viewProps:Dn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Lt(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return ot(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return lt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},Hv=class extends Xo{constructor(e,n){super(e,n),this.emitter_=new De,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",s=>{this.emitter_.emit("change",s)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,s=new lo(n,{blade:ps(),itemProps:fe.fromObject({selected:!1,title:e.title}),props:fe.fromObject({selected:!1}),viewProps:Dn.create()}),i=this.pool_.createApi(s);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}onSelect_(e){this.emitter_.emit("select",new Jf(this,e.rawValue))}},Gv=class extends Xo{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,s){return this.rackApi_.addBinding(e,n,s)}addBlade(e){return this.rackApi_.addBlade(e)}};const za=-1;let Wv=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Se(!0),this.selectedIndex=Se(za),this.items_=[]}add(e,n){const s=n??this.items_.length;this.items_.splice(s,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=za,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,s)=>{n.rawValue=s===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,s)=>{n.rawValue=s===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(s=>s===e.sender);this.items_.forEach((s,i)=>{s.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const gs=_e("tab");let Yv=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(gs(),Ju()),n.viewProps.bindClassModifiers(this.element),zt(n.empty,cs(this.element,gs(void 0,"nop")));const s=e.createElement("div");s.classList.add(gs("t")),this.element.appendChild(s),this.itemsElement=s;const i=e.createElement("div");i.classList.add(gs("i")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(gs("c")),this.element.appendChild(r),this.contentsElement=r}},Ia=class extends Zo{constructor(e,n){const s=new Wv,i=new Yv(e,{empty:s.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Jo({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=s}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;Iu(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;Wo(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const ep=Je({id:"tab",type:"blade",accept(t){const e=Te(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new Ia(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const s=new lo(t.document,{blade:ps(),itemProps:fe.fromObject({selected:!1,title:n.title}),props:fe.fromObject({selected:!1}),viewProps:Dn.create()});e.add(s)}),e},api(t){return t.controller instanceof Ia?new Hv(t.controller,t.pool):t.controller instanceof lo?new Gv(t.controller,t.pool):null}});function Xv(t,e){const n=t.accept(e.params);if(!n)return null;const s=Te(e.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return t.controller({blade:ps(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:s==null?void 0:s.disabled,hidden:s==null?void 0:s.hidden}),viewProps:Dn.create({disabled:s==null?void 0:s.disabled,hidden:s==null?void 0:s.hidden})})}let tl=class extends Is{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},Zv=class{constructor(){this.disabled=!1,this.emitter=new De}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},Jv=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new De,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},Qs=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,s)=>s.constrain(n),e)}};function Bi(t,e){if(t instanceof e)return t;if(t instanceof Qs){const n=t.constraints.reduce((s,i)=>s||(i instanceof e?i:null),null);if(n)return n}return null}let ei=class{constructor(e){this.values=fe.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}};function ti(t){var e;const n=io;if(Array.isArray(t))return(e=Te({items:t},s=>({items:s.required.array(s.required.object({text:s.required.string,value:s.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function nl(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function sl(t){return Ee(t)?null:new ei(nl(t))}const Vr=_e("lst");let Qv=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(Vr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("select");s.classList.add(Vr("s")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.selectElement=s;const i=e.createElement("div");i.classList.add(Vr("m")),i.appendChild(or(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Lt(this.props_,"options",r=>{Ku(this.selectElement),r.forEach(o=>{const l=e.createElement("option");l.textContent=o.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},dn=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Qv(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return ot(e,null,n=>({options:n.required.custom(ti)}),n=>(this.props.set("options",nl(n.options)),!0))}exportProps(){return lt(null,{options:this.props.get("options")})}};const Ka=_e("pop");let e0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ka()),n.viewProps.bindClassModifiers(this.element),zt(n.shows,cs(this.element,Ka(void 0,"v")))}},tp=class{constructor(e,n){this.shows=Se(!1),this.viewProps=n.viewProps,this.view=new e0(e,{shows:this.shows,viewProps:this.viewProps})}};const Ua=_e("txt");let t0=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ua()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const s=e.createElement("input");s.classList.add(Ua("i")),s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},Ks=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new t0(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const s=e.currentTarget.value,i=this.parser_(s);Ee(i)||(this.value.rawValue=i),this.view.refresh()}};function n0(t){return String(t)}function np(t){return t==="false"?!1:!!t}function qa(t){return n0(t)}function s0(t){return e=>t.reduce((n,s)=>n!==null?n:s(e),null)}const i0=st(0);function ji(t){return i0(t)+"%"}function sp(t){return String(t)}function ao(t){return t}function hs({primary:t,secondary:e,forward:n,backward:s}){let i=!1;function r(o){i||(i=!0,o(),i=!1)}t.emitter.on("change",o=>{r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{r(()=>{t.setRawValue(s(t.rawValue,e.rawValue),o.options)}),r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function et(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Us(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Kt(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function r0(t){return t==="ArrowUp"||t==="ArrowDown"}function ip(t){return r0(t)||t==="ArrowLeft"||t==="ArrowRight"}function Sr(t,e){var n,s;const i=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+r.left),y:t.pageY-(((s=i&&i.scrollY)!==null&&s!==void 0?s:0)+r.top)}}let Fn=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new De,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const s=this.elem_.ownerDocument;s.addEventListener("mousemove",this.onDocumentMouseMove_),s.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Sr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Sr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Sr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),s=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),s=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const s=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(s?{x:s.clientX-i.left,y:s.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const at=_e("txt");let o0=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(at(),at(void 0,"num")),n.arrayPosition&&this.element.classList.add(at(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("input");s.classList.add(at("i")),s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(at()),this.inputElement.classList.add(at("i"));const i=e.createElement("div");i.classList.add(at("k")),this.element.appendChild(i),this.knobElement=i;const r=e.createElementNS(Tt,"svg");r.classList.add(at("g")),this.knobElement.appendChild(r);const o=e.createElementNS(Tt,"path");o.classList.add(at("gb")),r.appendChild(o),this.guideBodyElem_=o;const l=e.createElementNS(Tt,"path");l.classList.add(at("gh")),r.appendChild(l),this.guideHeadElem_=l;const a=e.createElement("div");a.classList.add(_e("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(at(void 0,"drg"));return}this.element.classList.add(at(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),s=n+(n>0?-1:n<0?1:0),i=Fe(-s,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${s+i},0 L${s},4 L${s+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},ni=class{constructor(e,n){var s;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(s=n.sliderProps)!==null&&s!==void 0?s:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Se(null),this.view=new o0(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Fn(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,s;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),r=(s=this.sliderProps_)===null||s===void 0?void 0:s.get("max");let o=e;return i!==void 0&&(o=Math.max(o,i)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(e){const s=e.currentTarget.value,i=this.parser_(s);Ee(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=et(this.props.get("keyScale"),Us(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){et(this.props.get("keyScale"),Us(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const Mr=_e("sld");let l0=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Mr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Mr("t")),n.viewProps.bindTabIndex(s),this.element.appendChild(s),this.trackElement=s;const i=e.createElement("div");i.classList.add(Mr("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Fe(ye(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},a0=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new l0(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(ye(Fe(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=et(this.props.get("keyScale"),Kt(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){et(this.props.get("keyScale"),Kt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const $r=_e("sldtxt");let c0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add($r());const s=e.createElement("div");s.classList.add($r("s")),this.sliderView_=n.sliderView,s.appendChild(this.sliderView_.element),this.element.appendChild(s);const i=e.createElement("div");i.classList.add($r("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}},Ni=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new a0(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new ni(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new c0(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return ot(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const s=this.sliderC_.props;return s.set("max",n.max),s.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return lt(null,{max:e.get("max"),min:e.get("min")})}};function rp(t){return{sliderProps:new fe({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new fe({formatter:Se(t.formatter),keyScale:t.keyScale,pointerScale:Se(t.pointerScale)})}}const u0={containerUnitSize:"cnt-usz"};function op(t){return`--${u0[t]}`}function qs(t){return Nu(t)}function on(t){if(so(t))return Te(t,qs)}function Ft(t,e){if(!t)return;const n=[],s=Fu(t,e);s&&n.push(s);const i=Bu(t);return i&&n.push(i),new Qs(n)}function p0(t){return t?t.major===us.major:!1}function lp(t){if(t==="inline"||t==="popup")return t}function si(t,e){t.write(e)}const bi=_e("ckb");let h0=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(bi()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("label");s.classList.add(bi("l")),this.element.appendChild(s),this.labelElement=s;const i=e.createElement("input");i.classList.add(bi("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(bi("w")),this.labelElement.appendChild(r);const o=or(e,"check");r.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},d0=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new h0(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}};function m0(t){const e=[],n=sl(t.options);return n&&e.push(n),new Qs(e)}const f0=Je({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Te(e,s=>({options:s.optional.custom(ti),readonly:s.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>np,constraint:t=>m0(t.params),writer:t=>si},controller:t=>{const e=t.document,n=t.value,s=t.constraint,i=s&&Bi(s,ei);return i?new dn(e,{props:new fe({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new d0(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof dn?new tl(t.controller):null}}),_n=_e("col");let v0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(_n()),n.foldable.bindExpandedClass(this.element,_n(void 0,"expanded")),Lt(n.foldable,"completed",cs(this.element,_n(void 0,"cpl")));const s=e.createElement("div");s.classList.add(_n("h")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(_n("s")),s.appendChild(i),this.swatchElement=i;const r=e.createElement("div");if(r.classList.add(_n("t")),s.appendChild(r),this.textElement=r,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(_n("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};function b0(t,e,n){const s=Fe(t/255,0,1),i=Fe(e/255,0,1),r=Fe(n/255,0,1),o=Math.max(s,i,r),l=Math.min(s,i,r),a=o-l;let c=0,p=0;const g=(l+o)/2;return a!==0&&(p=a/(1-Math.abs(o+l-1)),s===o?c=(i-r)/a:i===o?c=2+(r-s)/a:c=4+(s-i)/a,c=c/6+(c<0?1:0)),[c*360,p*100,g*100]}function w0(t,e,n){const s=(t%360+360)%360,i=Fe(e/100,0,1),r=Fe(n/100,0,1),o=(1-Math.abs(2*r-1))*i,l=o*(1-Math.abs(s/60%2-1)),a=r-o/2;let c,p,g;return s>=0&&s<60?[c,p,g]=[o,l,0]:s>=60&&s<120?[c,p,g]=[l,o,0]:s>=120&&s<180?[c,p,g]=[0,o,l]:s>=180&&s<240?[c,p,g]=[0,l,o]:s>=240&&s<300?[c,p,g]=[l,0,o]:[c,p,g]=[o,0,l],[(c+a)*255,(p+a)*255,(g+a)*255]}function _0(t,e,n){const s=Fe(t/255,0,1),i=Fe(e/255,0,1),r=Fe(n/255,0,1),o=Math.max(s,i,r),l=Math.min(s,i,r),a=o-l;let c;a===0?c=0:o===s?c=60*(((i-r)/a%6+6)%6):o===i?c=60*((r-s)/a+2):c=60*((s-i)/a+4);const p=o===0?0:a/o,g=o;return[c,p*100,g*100]}function ap(t,e,n){const s=Au(t,360),i=Fe(e/100,0,1),r=Fe(n/100,0,1),o=r*i,l=o*(1-Math.abs(s/60%2-1)),a=r-o;let c,p,g;return s>=0&&s<60?[c,p,g]=[o,l,0]:s>=60&&s<120?[c,p,g]=[l,o,0]:s>=120&&s<180?[c,p,g]=[0,o,l]:s>=180&&s<240?[c,p,g]=[0,l,o]:s>=240&&s<300?[c,p,g]=[l,0,o]:[c,p,g]=[o,0,l],[(c+a)*255,(p+a)*255,(g+a)*255]}function g0(t,e,n){const s=n+e*(100-Math.abs(2*n-100))/200;return[t,s!==0?e*(100-Math.abs(2*n-100))/s:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function C0(t,e,n){const s=100-Math.abs(n*(200-e)/100-100);return[t,s!==0?e*n/s:0,n*(200-e)/(2*100)]}function Ot(t){return[t[0],t[1],t[2]]}function ar(t,e){return[t[0],t[1],t[2],e]}const y0={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:g0,rgb:w0},hsv:{hsl:C0,hsv:(t,e,n)=>[t,e,n],rgb:ap},rgb:{hsl:b0,hsv:_0,rgb:(t,e,n)=>[t,e,n]}};function rs(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function x0(t,e){return t===e?e:Au(t,e)}function cp(t,e,n){var s;const i=rs(e,n);return[e==="rgb"?Fe(t[0],0,i[0]):x0(t[0],i[0]),Fe(t[1],0,i[1]),Fe(t[2],0,i[2]),Fe((s=t[3])!==null&&s!==void 0?s:1,0,1)]}function Ha(t,e,n,s){const i=rs(e,n),r=rs(e,s);return t.map((o,l)=>o/i[l]*r[l])}function up(t,e,n){const s=Ha(t,e.mode,e.type,"int"),i=y0[e.mode][n.mode](...s);return Ha(i,n.mode,"int",n.type)}let xe=class pp{static black(){return new pp([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=cp(e,n,this.type)}getComponents(e){return ar(up(Ot(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const Wt=_e("colp");let P0=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Wt()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Wt("hsv"));const i=e.createElement("div");i.classList.add(Wt("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),s.appendChild(i);const r=e.createElement("div");r.classList.add(Wt("h")),this.hPaletteView_=n.hPaletteView,r.appendChild(this.hPaletteView_.element),s.appendChild(r),this.element.appendChild(s);const o=e.createElement("div");if(o.classList.add(Wt("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const l=e.createElement("div");l.classList.add(Wt("a"));const a=e.createElement("div");a.classList.add(Wt("ap")),a.appendChild(this.alphaViews_.palette.element),l.appendChild(a);const c=e.createElement("div");c.classList.add(Wt("at")),c.appendChild(this.alphaViews_.text.element),l.appendChild(c),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function E0(t){return t==="int"?"int":t==="float"?"float":void 0}function il(t){return Te(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(E0)}),expanded:e.optional.boolean,picker:e.optional.custom(lp),readonly:e.optional.constant(!1)}))}function Mn(t){return t?.1:1}function hp(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let rl=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=cp(e,n,this.type)}getComponents(e){return ar(up(Ot(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const k0={int:(t,e)=>new xe(t,e),float:(t,e)=>new rl(t,e)};function ol(t,e,n){return k0[n](t,e)}function V0(t){return t.type==="float"}function S0(t){return t.type==="int"}function M0(t){const e=t.getComponents(),n=rs(t.mode,"int");return new xe([Math.round(ye(e[0],0,1,0,n[0])),Math.round(ye(e[1],0,1,0,n[1])),Math.round(ye(e[2],0,1,0,n[2])),e[3]],t.mode)}function $0(t){const e=t.getComponents(),n=rs(t.mode,"int");return new rl([ye(e[0],0,n[0],0,1),ye(e[1],0,n[1],0,1),ye(e[2],0,n[2],0,1),e[3]],t.mode)}function Ye(t,e){if(t.type===e)return t;if(S0(t)&&e==="float")return $0(t);if(V0(t)&&e==="int")return M0(t);throw Ie.shouldNeverHappen()}function T0(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function ht(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const L0={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function dp(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),s=e[2];return L0[s](n)}function mp(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[ht(e[1],255),ht(e[2],255),ht(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function O0(t){const e=mp(t);return e?new xe(e,"rgb"):null}function fp(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[ht(e[1],255),ht(e[2],255),ht(e[3],255),ht(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function A0(t){const e=fp(t);return e?new xe(e,"rgb"):null}function vp(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[dp(e[1]),ht(e[2],100),ht(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function R0(t){const e=vp(t);return e?new xe(e,"hsl"):null}function bp(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[dp(e[1]),ht(e[2],100),ht(e[3],100),ht(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function D0(t){const e=bp(t);return e?new xe(e,"hsl"):null}function wp(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function F0(t){const e=wp(t);return e?new xe(e,"rgb"):null}function _p(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ye(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),ye(parseInt(n[4],16),0,255,0,1)]:null}function B0(t){const e=_p(t);return e?new xe(e,"rgb"):null}function gp(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function j0(t){return e=>{const n=gp(e);return n?ol(n,"rgb",t):null}}function Cp(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function N0(t){return e=>{const n=Cp(e);return n?ol(n,"rgb",t):null}}const z0=[{parser:wp,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:_p,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:mp,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:fp,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:vp,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:bp,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:gp,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Cp,result:{alpha:!0,mode:"rgb",notation:"object"}}];function I0(t){return z0.reduce((e,{parser:n,result:s})=>e||(n(t)?s:null),null)}function K0(t,e="int"){const n=I0(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function ii(t){const e=[F0,B0,O0,A0,R0,D0];e.push(j0("int"),N0("int"));const n=s0(e);return s=>{const i=n(s);return i?Ye(i,t):null}}function U0(t){const e=ii("int");if(typeof t!="string")return xe.black();const n=e(t);return n??xe.black()}function yp(t){const e=Fe(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function ll(t,e="#"){const n=Ot(t.getComponents("rgb")).map(yp).join("");return`${e}${n}`}function al(t,e="#"){const n=t.getComponents("rgb"),s=[n[0],n[1],n[2],n[3]*255].map(yp).join("");return`${e}${s}`}function xp(t){const e=st(0),n=Ye(t,"int");return`rgb(${Ot(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function ki(t){const e=st(2),n=st(0);return`rgba(${Ye(t,"int").getComponents("rgb").map((r,o)=>(o===3?e:n)(r)).join(", ")})`}function q0(t){const e=[st(0),ji,ji],n=Ye(t,"int");return`hsl(${Ot(n.getComponents("hsl")).map((i,r)=>e[r](i)).join(", ")})`}function H0(t){const e=[st(0),ji,ji,st(2)];return`hsla(${Ye(t,"int").getComponents("hsl").map((i,r)=>e[r](i)).join(", ")})`}function Pp(t,e){const n=st(e==="float"?2:0),s=["r","g","b"],i=Ye(t,e);return`{${Ot(i.getComponents("rgb")).map((o,l)=>`${s[l]}: ${n(o)}`).join(", ")}}`}function G0(t){return e=>Pp(e,t)}function Ep(t,e){const n=st(2),s=st(e==="float"?2:0),i=["r","g","b","a"];return`{${Ye(t,e).getComponents("rgb").map((l,a)=>{const c=a===3?n:s;return`${i[a]}: ${c(l)}`}).join(", ")}}`}function W0(t){return e=>Ep(e,t)}const Y0=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:ll},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:al},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:xp},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:ki},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:q0},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:H0},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:G0(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:W0(e)}],[])];function kp(t){return Y0.reduce((e,n)=>e||(T0(n.format,t)?n.stringifier:null),null)}const Cs=_e("apl");let X0=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Cs()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(Cs("b")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Cs("c")),s.appendChild(i),this.colorElem_=i;const r=e.createElement("div");r.classList.add(Cs("m")),this.element.appendChild(r),this.markerElem_=r;const o=e.createElement("div");o.classList.add(Cs("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),s=new xe([n[0],n[1],n[2],0],"rgb"),i=new xe([n[0],n[1],n[2],255],"rgb"),r=["to right",ki(s),ki(i)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=ki(e);const o=ye(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}},Z0=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new X0(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=e.point.x/e.bounds.width,i=this.value.rawValue,[r,o,l]=i.getComponents("hsv");this.value.setRawValue(new xe([r,o,l,s],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=et(Mn(!0),Kt(e));if(n===0)return;const s=this.value.rawValue,[i,r,o,l]=s.getComponents("hsv");this.value.setRawValue(new xe([i,r,o,l+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){et(Mn(!0),Kt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const In=_e("coltxt");function J0(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((s,i)=>{const r=t.createElement("option");return r.textContent=i.text,r.value=i.value,s.appendChild(r),s},t.createDocumentFragment())),e}let Q0=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(In()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(In("m")),this.modeElem_=J0(e),this.modeElem_.classList.add(In("ms")),s.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(In("mm")),i.appendChild(or(e,"dropdown")),s.appendChild(i),this.element.appendChild(s);const r=e.createElement("div");r.classList.add(In("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=n.inputViews,this.applyInputViews_(),zt(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Ku(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const s=e.createElement("div");s.classList.add(In("c")),s.appendChild(n.element),this.inputsElem_.appendChild(s)})}};function eb(t){return st(t==="float"?2:0)}function tb(t,e,n){const s=rs(t,e)[n];return new Zs({min:0,max:s})}function nb(t,e,n){return new ni(t,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:e.parser,props:fe.fromObject({formatter:eb(e.colorType),keyScale:Mn(!1),pointerScale:e.colorType==="float"?.01:1}),value:Se(0,{constraint:tb(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function sb(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:It,viewProps:e.viewProps};return[0,1,2].map(s=>{const i=nb(t,n,s);return hs({primary:e.value,secondary:i.value,forward(r){return Ye(r,e.colorType).getComponents(e.colorMode)[s]},backward(r,o){const l=e.colorMode,c=Ye(r,e.colorType).getComponents(l);c[s]=o;const p=ol(ar(Ot(c),c[3]),l,e.colorType);return Ye(p,"int")}}),i})}function ib(t,e){const n=new Ks(t,{parser:ii("int"),props:fe.fromObject({formatter:ll}),value:Se(xe.black()),viewProps:e.viewProps});return hs({primary:e.value,secondary:n.value,forward:s=>new xe(Ot(s.getComponents()),s.mode),backward:(s,i)=>new xe(ar(Ot(i.getComponents(s.mode)),s.getComponents()[3]),s.mode)}),[n]}function rb(t){return t!=="hex"}let ob=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Se(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Q0(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return rb(n)?sb(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):ib(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(s=>s.view)}};const Tr=_e("hpl");let lb=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Tr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(Tr("c")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Tr("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=xp(new xe([n,100,100],"hsv"));const s=ye(n,0,360,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}},ab=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new lb(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=ye(Fe(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,r,o,l]=i.getComponents("hsv");this.value.setRawValue(new xe([s,r,o,l],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=et(Mn(!1),Kt(e));if(n===0)return;const s=this.value.rawValue,[i,r,o,l]=s.getComponents("hsv");this.value.setRawValue(new xe([i+n,r,o,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){et(Mn(!1),Kt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Lr=_e("svp"),Ga=64;let cb=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Lr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("canvas");s.height=Ga,s.width=Ga,s.classList.add(Lr("c")),this.element.appendChild(s),this.canvasElement=s;const i=e.createElement("div");i.classList.add(Lr("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=av(this.canvasElement);if(!e)return;const s=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,r=this.canvasElement.height,o=e.getImageData(0,0,i,r),l=o.data;for(let p=0;p<r;p++)for(let g=0;g<i;g++){const X=ye(g,0,i,0,100),J=ye(p,0,r,100,0),V=ap(s[0],X,J),f=(p*i+g)*4;l[f]=V[0],l[f+1]=V[1],l[f+2]=V[2],l[f+3]=255}e.putImageData(o,0,0);const a=ye(s[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const c=ye(s[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}},ub=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new cb(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=ye(e.point.x,0,e.bounds.width,0,100),i=ye(e.point.y,0,e.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new xe([r,s,i,o],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){ip(e.key)&&e.preventDefault();const[n,s,i,r]=this.value.rawValue.getComponents("hsv"),o=Mn(!1),l=et(o,Kt(e)),a=et(o,Us(e));l===0&&a===0||this.value.setRawValue(new xe([n,s+l,i+a,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Mn(!1),s=et(n,Kt(e)),i=et(n,Us(e));s===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},pb=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new ab(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new ub(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Z0(e,{value:this.value,viewProps:this.viewProps}),text:new ni(e,{parser:It,props:fe.fromObject({pointerScale:.01,keyScale:.1,formatter:st(2)}),value:Se(0,{constraint:new Zs({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&hs({primary:this.value,secondary:this.alphaIcs_.text.value,forward:s=>s.getComponents()[3],backward:(s,i)=>{const r=s.getComponents();return r[3]=i,new xe(r,s.mode)}}),this.textsC_=new ob(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new P0(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const Or=_e("colsw");let hb=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(Or()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Or("sw")),this.element.appendChild(s),this.swatchElem_=s;const i=e.createElement("button");i.classList.add(Or("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=al(e)}onValueChange_(){this.update_()}},db=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new hb(e,{value:this.value,viewProps:this.viewProps})}},cl=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Qo.create(n.expanded),this.swatchC_=new db(e,{value:this.value,viewProps:this.viewProps});const s=this.swatchC_.view.buttonElement;s.addEventListener("blur",this.onButtonBlur_),s.addEventListener("click",this.onButtonClick_),this.textC_=new Ks(e,{parser:n.parser,props:fe.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new v0(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new tp(e,{viewProps:this.viewProps}):null;const i=new pb(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),hs({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),el(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,s=e.relatedTarget;(!s||!n.contains(s))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=Uu(e);s&&n.contains(s)||s&&s===this.swatchC_.view.buttonElement&&!Go(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function mb(t){return Ot(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function fb(t){return t.getComponents("rgb").reduce((e,n,s)=>{const i=Math.floor(s===3?n*255:n)&255;return e<<8|i},0)>>>0}function vb(t){return new xe([t>>16&255,t>>8&255,t&255],"rgb")}function bb(t){return new xe([t>>24&255,t>>16&255,t>>8&255,ye(t&255,0,255,0,1)],"rgb")}function wb(t){return typeof t!="number"?xe.black():vb(t)}function _b(t){return typeof t!="number"?xe.black():bb(t)}function Vi(t,e){return typeof t!="object"||Ee(t)?!1:e in t&&typeof t[e]=="number"}function Vp(t){return Vi(t,"r")&&Vi(t,"g")&&Vi(t,"b")}function Sp(t){return Vp(t)&&Vi(t,"a")}function Mp(t){return Vp(t)}function ul(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),s=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==s[i])return!1;return!0}function Wa(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function gb(t){const e=kp(t);return e?(n,s)=>{si(n,e(s))}:null}function Cb(t){const e=t?fb:mb;return(n,s)=>{si(n,e(s))}}function yb(t,e,n){const i=Ye(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function xb(t,e,n){const i=Ye(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function Pb(t,e){return(n,s)=>{t?yb(n,s,e):xb(n,s,e)}}function Eb(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function kb(t){return t?e=>al(e,"0x"):e=>ll(e,"0x")}function Vb(t){return"color"in t||t.view==="color"}const Sb=Je({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!Vb(e))return null;const n=il(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:Eb(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?_b:wb,equals:ul,writer:t=>Cb(t.params.supportsAlpha)},controller:t=>{var e,n;return new cl(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:kb(t.params.supportsAlpha),parser:ii("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Mb(t,e){if(!Mp(t))return Ye(xe.black(),e);if(e==="int"){const n=Wa(t);return new xe(n,"rgb")}if(e==="float"){const n=Wa(t);return new rl(n,"rgb")}return Ye(xe.black(),"int")}function $b(t){return Sp(t)}function Tb(t){return e=>{const n=Mb(e,t);return Ye(n,"int")}}function Lb(t,e){return n=>t?Ep(n,e):Pp(n,e)}const Ob=Je({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!Mp(t))return null;const s=il(e);return s?{initialValue:t,params:Object.assign(Object.assign({},s),{colorType:(n=hp(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>Tb(t.params.colorType),equals:ul,writer:t=>Pb($b(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const s=Sp(t.initialValue);return new cl(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:Lb(s,t.params.colorType),parser:ii("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s,value:t.value,viewProps:t.viewProps})}}),Ab=Je({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=K0(t,hp(e));if(!n)return null;const s=kp(n);if(!s)return null;const i=il(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:s})}:null},binding:{reader:()=>U0,equals:ul,writer:t=>{const e=gb(t.params.format);if(!e)throw Ie.notBindable();return e}},controller:t=>{var e,n;return new cl(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:ii("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let pl=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((s,i)=>{var r,o;return(o=(r=this.components[i])===null||r===void 0?void 0:r.constrain(s))!==null&&o!==void 0?o:s});return this.asm_.fromComponents(n)}};const Ya=_e("pndtxt");let Rb=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(Ya()),this.textViews.forEach(s=>{const i=e.createElement("div");i.classList.add(Ya("a")),i.appendChild(s.element),this.element.appendChild(i)})}};function Db(t,e,n){return new ni(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Se(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let hl=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((s,i)=>Db(e,n,i)),this.acs_.forEach((s,i)=>{hs({primary:this.value,secondary:s.value,forward:r=>n.assembly.toComponents(r)[i],backward:(r,o)=>{const l=n.assembly.toComponents(r);return l[i]=o,n.assembly.fromComponents(l)}})}),this.view=new Rb(e,{textViews:this.acs_.map(s=>s.view)})}get textControllers(){return this.acs_}},Fb=class extends Is{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function Bb(t,e){const n=[],s=Fu(t,e);s&&n.push(s);const i=Bu(t);i&&n.push(i);const r=sl(t.options);return r&&n.push(r),new Qs(n)}const jb=Je({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Te(e,s=>Object.assign(Object.assign({},Nu(s)),{options:s.optional.custom(ti),readonly:s.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ou,constraint:t=>Bb(t.params,t.initialValue),writer:t=>si},controller:t=>{const e=t.value,n=t.constraint,s=n&&Bi(n,ei);if(s)return new dn(t.document,{props:new fe({options:s.values.value("options")}),value:e,viewProps:t.viewProps});const i=ju(t.params,e.rawValue),r=n&&Bi(n,Zs);return r?new Ni(t.document,Object.assign(Object.assign({},rp(Object.assign(Object.assign({},i),{keyScale:Se(i.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:It,value:e,viewProps:t.viewProps})):new ni(t.document,{parser:It,props:fe.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof Ni?new Fb(t.controller):t.controller.valueController instanceof dn?new tl(t.controller):null}});let un=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Ee(e))return!1;const n=e.x,s=e.y;return!(typeof n!="number"||typeof s!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const $p={toComponents:t=>t.getComponents(),fromComponents:t=>new un(...t)},Kn=_e("p2d");let Nb=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Kn()),n.viewProps.bindClassModifiers(this.element),zt(n.expanded,cs(this.element,Kn(void 0,"expanded")));const s=e.createElement("div");s.classList.add(Kn("h")),this.element.appendChild(s);const i=e.createElement("button");i.classList.add(Kn("b")),i.appendChild(or(e,"p2dpad")),n.viewProps.bindDisabled(i),s.appendChild(i),this.buttonElement=i;const r=e.createElement("div");if(r.classList.add(Kn("t")),s.appendChild(r),this.textElement=r,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Kn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};const Yt=_e("p2dp");let zb=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Yt()),n.layout==="popup"&&this.element.classList.add(Yt(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Yt("p")),n.viewProps.bindTabIndex(s),this.element.appendChild(s),this.padElement=s;const i=e.createElementNS(Tt,"svg");i.classList.add(Yt("g")),this.padElement.appendChild(i),this.svgElem_=i;const r=e.createElementNS(Tt,"line");r.classList.add(Yt("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=e.createElementNS(Tt,"line");o.classList.add(Yt("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const l=e.createElementNS(Tt,"line");l.classList.add(Yt("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const a=e.createElement("div");a.classList.add(Yt("m")),this.padElement.appendChild(a),this.markerElem_=a,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),s=this.props_.get("max"),i=ye(e,-s,+s,0,100),r=ye(n,-s,+s,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function Xa(t,e,n){return[et(e[0],Kt(t)),et(e[1],Us(t))*(n?1:-1)]}let Ib=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new zb(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Fn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=this.props.get("max"),i=ye(e.point.x,0,e.bounds.width,-s,+s),r=ye(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-s,+s);this.value.setRawValue(new un(i,r),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){ip(e.key)&&e.preventDefault();const[n,s]=Xa(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&s===0||this.value.setRawValue(new un(this.value.rawValue.x+n,this.value.rawValue.y+s),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,s]=Xa(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Kb=class{constructor(e,n){var s,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Qo.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new tp(e,{viewProps:this.viewProps}):null;const r=new Ib(e,{layout:n.pickerLayout,props:new fe({invertsY:Se(n.invertsY),max:Se(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new hl(e,{assembly:$p,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Nb(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),hs({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),el(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,s=e.relatedTarget;(!s||!n.contains(s))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=Uu(e);s&&n.contains(s)||s&&s===this.view.buttonElement&&!Go(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function Ub(t){return un.isObject(t)?new un(t.x,t.y):new un}function qb(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Hb(t,e){return new pl({assembly:$p,components:[Ft(Object.assign(Object.assign({},t),t.x),e.x),Ft(Object.assign(Object.assign({},t),t.y),e.y)]})}function Za(t,e){var n,s;if(!Ee(t.min)||!Ee(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((s=t.max)!==null&&s!==void 0?s:0));const i=Ru(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function Gb(t,e){var n,s;const i=Za(Vn(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),r=Za(Vn(t,(s=t.y)!==null&&s!==void 0?s:{}),e.y);return Math.max(i,r)}function Wb(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const Yb=Je({id:"input-point2d",type:"input",accept:(t,e)=>{if(!un.isObject(t))return null;const n=Te(e,s=>Object.assign(Object.assign({},qs(s)),{expanded:s.optional.boolean,picker:s.optional.custom(lp),readonly:s.optional.constant(!1),x:s.optional.custom(on),y:s.optional.object(Object.assign(Object.assign({},qs(s)),{inverted:s.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>Ub,constraint:t=>Hb(t.params,t.initialValue),equals:un.equals,writer:()=>qb},controller:t=>{var e,n;const s=t.document,i=t.value,r=t.constraint,o=[t.params.x,t.params.y];return new Kb(s,{axes:i.rawValue.getComponents().map((l,a)=>{var c;return Ho({constraint:r.components[a],initialValue:l,params:Vn(t.params,(c=o[a])!==null&&c!==void 0?c:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:Wb(t.params),max:Gb(t.params,i.rawValue),parser:It,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});let Jn=class{constructor(e=0,n=0,s=0){this.x=e,this.y=n,this.z=s}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Ee(e))return!1;const n=e.x,s=e.y,i=e.z;return!(typeof n!="number"||typeof s!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const Tp={toComponents:t=>t.getComponents(),fromComponents:t=>new Jn(...t)};function Xb(t){return Jn.isObject(t)?new Jn(t.x,t.y,t.z):new Jn}function Zb(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function Jb(t,e){return new pl({assembly:Tp,components:[Ft(Object.assign(Object.assign({},t),t.x),e.x),Ft(Object.assign(Object.assign({},t),t.y),e.y),Ft(Object.assign(Object.assign({},t),t.z),e.z)]})}const Qb=Je({id:"input-point3d",type:"input",accept:(t,e)=>{if(!Jn.isObject(t))return null;const n=Te(e,s=>Object.assign(Object.assign({},qs(s)),{readonly:s.optional.constant(!1),x:s.optional.custom(on),y:s.optional.custom(on),z:s.optional.custom(on)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Xb,constraint:t=>Jb(t.params,t.initialValue),equals:Jn.equals,writer:t=>Zb},controller:t=>{const e=t.value,n=t.constraint,s=[t.params.x,t.params.y,t.params.z];return new hl(t.document,{assembly:Tp,axes:e.rawValue.getComponents().map((i,r)=>{var o;return Ho({constraint:n.components[r],initialValue:i,params:Vn(t.params,(o=s[r])!==null&&o!==void 0?o:{})})}),parser:It,value:e,viewProps:t.viewProps})}});let Qn=class{constructor(e=0,n=0,s=0,i=0){this.x=e,this.y=n,this.z=s,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Ee(e))return!1;const n=e.x,s=e.y,i=e.z,r=e.w;return!(typeof n!="number"||typeof s!="number"||typeof i!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const Lp={toComponents:t=>t.getComponents(),fromComponents:t=>new Qn(...t)};function ew(t){return Qn.isObject(t)?new Qn(t.x,t.y,t.z,t.w):new Qn}function tw(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function nw(t,e){return new pl({assembly:Lp,components:[Ft(Object.assign(Object.assign({},t),t.x),e.x),Ft(Object.assign(Object.assign({},t),t.y),e.y),Ft(Object.assign(Object.assign({},t),t.z),e.z),Ft(Object.assign(Object.assign({},t),t.w),e.w)]})}const sw=Je({id:"input-point4d",type:"input",accept:(t,e)=>{if(!Qn.isObject(t))return null;const n=Te(e,s=>Object.assign(Object.assign({},qs(s)),{readonly:s.optional.constant(!1),w:s.optional.custom(on),x:s.optional.custom(on),y:s.optional.custom(on),z:s.optional.custom(on)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>ew,constraint:t=>nw(t.params,t.initialValue),equals:Qn.equals,writer:t=>tw},controller:t=>{const e=t.value,n=t.constraint,s=[t.params.x,t.params.y,t.params.z,t.params.w];return new hl(t.document,{assembly:Lp,axes:e.rawValue.getComponents().map((i,r)=>{var o;return Ho({constraint:n.components[r],initialValue:i,params:Vn(t.params,(o=s[r])!==null&&o!==void 0?o:{})})}),parser:It,value:e,viewProps:t.viewProps})}});function iw(t){const e=[],n=sl(t.options);return n&&e.push(n),new Qs(e)}const rw=Je({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Te(e,s=>({readonly:s.optional.constant(!1),options:s.optional.custom(ti)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>sp,constraint:t=>iw(t.params),writer:t=>si},controller:t=>{const e=t.document,n=t.value,s=t.constraint,i=s&&Bi(s,ei);return i?new dn(e,{props:new fe({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new Ks(e,{parser:r=>r,props:fe.fromObject({formatter:ao}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof dn?new tl(t.controller):null}}),ri={monitor:{defaultInterval:200,defaultRows:3}},Ja=_e("mll");let ow=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Ja()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("textarea");s.classList.add(Ja("i")),s.style.height=`calc(var(${op("containerUnitSize")}) * ${n.rows})`,s.readOnly=!0,n.viewProps.bindDisabled(s),this.element.appendChild(s),this.textareaElem_=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,s=[];this.value.rawValue.forEach(i=>{i!==void 0&&s.push(this.formatter_(i))}),e.textContent=s.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},dl=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new ow(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const Qa=_e("sgl");let lw=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Qa()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("input");s.classList.add(Qa("i")),s.readOnly=!0,s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},ml=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new lw(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const aw=Je({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Te(e,s=>({readonly:s.required.constant(!0),rows:s.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>np},controller:t=>{var e;return t.value.rawValue.length===1?new ml(t.document,{formatter:qa,value:t.value,viewProps:t.viewProps}):new dl(t.document,{formatter:qa,rows:(e=t.params.rows)!==null&&e!==void 0?e:ri.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let cw=class extends Is{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const Xt=_e("grl");let uw=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Xt()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const s=e.createElementNS(Tt,"svg");s.classList.add(Xt("g")),s.style.height=`calc(var(${op("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(s),this.svgElem_=s;const i=e.createElementNS(Tt,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const r=e.createElement("div");r.classList.add(Xt("t"),_e("tt")()),this.element.appendChild(r),this.tooltipElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:n}=this.element,s=this.value.rawValue.length-1,i=this.props_.get("min"),r=this.props_.get("max"),o=[];this.value.rawValue.forEach((g,X)=>{if(g===void 0)return;const J=ye(X,0,s,0,e),V=ye(g,i,r,n,0);o.push([J,V].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const l=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){l.classList.remove(Xt("t","a"));return}const c=ye(this.cursor_.rawValue,0,s,0,e),p=ye(a,i,r,n,0);l.style.left=`${c}px`,l.style.top=`${p}px`,l.textContent=`${this.formatter_(a)}`,l.classList.contains(Xt("t","a"))||(l.classList.add(Xt("t","a"),Xt("t","in")),Fi(l),l.classList.remove(Xt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},Op=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Se(-1),this.view=new uw(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Go(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const s=new Fn(this.view.element);s.emitter.on("down",this.onGraphPointerDown_),s.emitter.on("move",this.onGraphPointerMove_),s.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return ot(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return lt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(ye(e.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(ye(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function co(t){return Ee(t.format)?st(2):t.format}function pw(t){var e;return t.value.rawValue.length===1?new ml(t.document,{formatter:co(t.params),value:t.value,viewProps:t.viewProps}):new dl(t.document,{formatter:co(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:ri.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function hw(t){var e,n,s;return new Op(t.document,{formatter:co(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:ri.monitor.defaultRows,props:fe.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(s=t.params.min)!==null&&s!==void 0?s:0}),value:t.value,viewProps:t.viewProps})}function ec(t){return t.view==="graph"}const dw=Je({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Te(e,s=>({format:s.optional.function,max:s.optional.number,min:s.optional.number,readonly:s.required.constant(!0),rows:s.optional.number,view:s.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>ec(t)?64:1,reader:t=>Ou},controller:t=>ec(t.params)?hw(t):pw(t),api:t=>t.controller.valueController instanceof Op?new cw(t.controller):null}),mw=Je({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Te(e,s=>({multiline:s.optional.boolean,readonly:s.required.constant(!0),rows:s.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>sp},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new dl(t.document,{formatter:ao,rows:(e=t.params.rows)!==null&&e!==void 0?e:ri.monitor.defaultRows,value:n,viewProps:t.viewProps}):new ml(t.document,{formatter:ao,value:n,viewProps:t.viewProps})}});class fw{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class vw{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function bw(t,e){var n;const s=t.accept(e.target.read(),e.params);if(Ee(s))return null;const i={target:e.target,initialValue:s.initialValue,params:s.params},r=Te(e.params,g=>({disabled:g.optional.boolean,hidden:g.optional.boolean,label:g.optional.string,tag:g.optional.string})),o=t.binding.reader(i),l=t.binding.constraint?t.binding.constraint(i):void 0,a=new vw({reader:o,target:e.target,writer:t.binding.writer(i)}),c=new ev(Se(o(s.initialValue),{constraint:l,equals:t.binding.equals}),a),p=t.controller({constraint:l,document:e.document,initialValue:s.initialValue,params:s.params,value:c,viewProps:Dn.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})});return new fv(e.document,{blade:ps(),props:fe.fromObject({label:"label"in e.params?(n=r==null?void 0:r.label)!==null&&n!==void 0?n:null:e.target.key}),tag:r==null?void 0:r.tag,value:c,valueController:p})}class ww{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function _w(t,e){return e===0?new Zv:new Jv(t,e??ri.monitor.defaultInterval)}function gw(t,e){var n,s,i;const r=t.accept(e.target.read(),e.params);if(Ee(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},l=Te(e.params,X=>({bufferSize:X.optional.number,disabled:X.optional.boolean,hidden:X.optional.boolean,interval:X.optional.number,label:X.optional.string})),a=t.binding.reader(o),c=(s=(n=l==null?void 0:l.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(r.params))!==null&&s!==void 0?s:1,p=new gv({binding:new ww({reader:a,target:e.target}),bufferSize:c,ticker:_w(e.document,l==null?void 0:l.interval)}),g=t.controller({document:e.document,params:r.params,value:p,viewProps:Dn.create({disabled:l==null?void 0:l.disabled,hidden:l==null?void 0:l.hidden})});return g.viewProps.bindDisabled(p.ticker),g.viewProps.handleDispose(()=>{p.ticker.dispose()}),new yv(e.document,{blade:ps(),props:fe.fromObject({label:"label"in e.params?(i=l==null?void 0:l.label)!==null&&i!==void 0?i:null:e.target.key}),value:p,valueController:g})}class Cw{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!p0(n.core))throw Ie.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,s){return this.pluginsMap_.inputs.reduce((i,r)=>i??bw(r,{document:e,target:n,params:s}),null)}createMonitor_(e,n,s){return this.pluginsMap_.monitors.reduce((i,r)=>i??gw(r,{document:e,params:s,target:n}),null)}createBinding(e,n,s){const i=n.read();if(Ee(i))throw new Ie({context:{key:n.key},type:"nomatchingcontroller"});const r=this.createInput_(e,n,s);if(r)return r;const o=this.createMonitor_(e,n,s);if(o)return o;throw new Ie({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const s=this.pluginsMap_.blades.reduce((i,r)=>i??Xv(r,{document:e,params:n}),null);if(!s)throw new Ie({type:"nomatchingview",context:{params:n}});return s}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((s,i)=>{var r,o;return s||((o=(r=i.api)===null||r===void 0?void 0:r.call(i,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,n??new Is(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((s,i)=>{var r,o;return s||((o=(r=i.api)===null||r===void 0?void 0:r.call(i,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,n??new Is(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(vv(e))return this.createInputBindingApi_(e);if(xv(e))return this.createMonitorBindingApi_(e);throw Ie.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(mv(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((s,i)=>s??i.api({controller:e,pool:this}),null);if(!n)throw Ie.shouldNeverHappen();return this.apiCache_.add(e,n)}}const yw=new fw;function xw(){const t=new Cw(yw);return[Yb,Qb,sw,rw,jb,Ab,Ob,Sb,f0,aw,mw,dw,Sv,zv,ep].forEach(e=>{t.register("core",e)}),t}class Pw extends Rn{constructor(e){super(e),this.emitter_=new De,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Js(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}class Ew extends Rn{}class kw extends Rn{constructor(e){super(e),this.emitter_=new De,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Js(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}class Vw extends Rn{constructor(e){super(e),this.emitter_=new De,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Js(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}const Sw=function(){return{id:"list",type:"blade",core:us,accept(t){const e=Te(t,n=>({options:n.required.custom(ti),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new ei(nl(t.params.options)),n=Se(t.params.value,{constraint:e}),s=new dn(t.document,{props:new fe({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Sn(t.document,{blade:t.blade,props:fe.fromObject({label:t.params.label}),value:n,valueController:s})},api(t){return!(t.controller instanceof Sn)||!(t.controller.valueController instanceof dn)?null:new Pw(t.controller)}}}();class Mw extends Zu{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class $w extends oo{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const tc=_e("spr");class Tw{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(tc()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("hr");s.classList.add(tc("r")),this.element.appendChild(s)}}class nc extends lr{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new Tw(e,{viewProps:n.viewProps})}))}}const Lw={id:"separator",type:"blade",core:us,accept(t){const e=Te(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new nc(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof nc?new Ew(t.controller):null}},Ow={id:"slider",type:"blade",core:us,accept(t){const e=Te(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const s=(e=t.params.value)!==null&&e!==void 0?e:0,i=new Zs({max:t.params.max,min:t.params.min}),r=Se(s,{constraint:i}),o=new Ni(t.document,Object.assign(Object.assign({},rp({formatter:(n=t.params.format)!==null&&n!==void 0?n:Yf,keyScale:Se(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:Du(t.params,s)})),{parser:It,value:r,viewProps:t.viewProps}));return new Sn(t.document,{blade:t.blade,props:fe.fromObject({label:t.params.label}),value:r,valueController:o})},api(t){return!(t.controller instanceof Sn)||!(t.controller.valueController instanceof Ni)?null:new kw(t.controller)}},Aw=function(){return{id:"text",type:"blade",core:us,accept(t){const e=Te(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=Se(t.params.value),s=new Ks(t.document,{parser:t.params.parse,props:fe.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:i=>String(i)}),value:n,viewProps:t.viewProps});return new Sn(t.document,{blade:t.blade,props:fe.fromObject({label:t.params.label}),value:n,valueController:s})},api(t){return!(t.controller instanceof Sn)||!(t.controller.valueController instanceof Ks)?null:new Vw(t.controller)}}}();function Rw(t){const e=t.createElement("div");return e.classList.add(_e("dfw")()),t.body&&t.body.appendChild(e),e}function Dw(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const s=t.createElement("style");s.dataset.tpStyle=e,s.textContent=n,t.head.appendChild(s)}class Fw extends Mw{constructor(e){var n,s;const i=e??{},r=(n=i.document)!==null&&n!==void 0?n:lv(),o=xw(),l=new $w(r,{expanded:i.expanded,blade:ps(),props:fe.fromObject({title:i.title}),viewProps:Dn.create()});super(l,o),this.pool_=o,this.containerElem_=(s=i.container)!==null&&s!==void 0?s:Rw(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Ie.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw Ie.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&Dw(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(s=>{this.pool_.register(e.id,s)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Sw,Lw,Ow,ep,Aw]})}}new Yu("4.0.3");function Ve(t){return t==null}function fl(t){return t!==null&&typeof t=="object"}function uo(t){return t!==null&&typeof t=="object"}function Bw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function $n(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((s,i)=>{const r=t[i],o=e[i];return uo(r)&&uo(o)?Object.assign(Object.assign({},s),{[i]:$n(r,o)}):Object.assign(Object.assign({},s),{[i]:i in e?o:r})},{})}function jw(t){return fl(t)?"target"in t:!1}const Nw={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class We{static alreadyDisposed(){return new We({type:"alreadydisposed"})}static notBindable(){return new We({type:"notbindable"})}static notCompatible(e,n){return new We({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new We({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new We({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=Nw[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class zi{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const s=this.read();if(!zi.isBindable(s))throw We.notBindable();if(!(e in s))throw We.propertyNotFound(e);s[e]=n}}class Ue{constructor(){this.observers_={}}on(e,n){let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:n}),this}off(e,n){const s=this.observers_[e];return s&&(this.observers_[e]=s.filter(i=>i.handler!==n)),this}emit(e,n){const s=this.observers_[e];s&&s.forEach(i=>{i.handler(n)})}}class zw{constructor(e,n){var s;this.constraint_=n==null?void 0:n.constraint,this.equals_=(s=n==null?void 0:n.equals)!==null&&s!==void 0?s:(i,r)=>i===r,this.emitter=new Ue,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const s=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,i)&&!s.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:s,previousRawValue:r,rawValue:i,sender:this}))}}class Iw{constructor(e){this.emitter=new Ue,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const s=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!s.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:s,previousRawValue:i,rawValue:this.value_,sender:this}))}}class Kw{constructor(e){this.emitter=new Ue,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Le(t,e){const n=e==null?void 0:e.constraint,s=e==null?void 0:e.equals;return!n&&!s?new Iw(t):new zw(t,e)}function Uw(t){return[new Kw(t),(e,n)=>{t.setRawValue(e,n)}]}class pe{constructor(e){this.emitter=new Ue,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((s,i)=>Object.assign(s,{[i]:Le(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new pe(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class oi{constructor(e){this.values=pe.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),s=this.values.get("min");return Math.min(Math.max(e,s),n)}}class vl{constructor(e){this.values=pe.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),s=this.values.get("min");let i=e;return Ve(s)||(i=Math.max(i,s)),Ve(n)||(i=Math.min(i,n)),i}}class qw{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,s=Math.round((e-n)/this.step);return n+s*this.step}}class Hw{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const Gw={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class Ww{constructor(e,n,s){this.left=n,this.operator=e,this.right=s}evaluate(){const e=Gw[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Yw={"+":t=>t,"-":t=>-t,"~":t=>~t};class Xw{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=Yw[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function bl(t){return(e,n)=>{for(let s=0;s<t.length;s++){const i=t[s](e,n);if(i!=="")return i}return""}}function Hs(t,e){var n;const s=t.substr(e).match(/^\s+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Zw(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function Gs(t,e){var n;const s=t.substr(e).match(/^[0-9]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function Jw(t,e){const n=Gs(t,e);if(n!=="")return n;const s=t.substr(e,1);if(e+=1,s!=="-"&&s!=="+")return"";const i=Gs(t,e);return i===""?"":s+i}function wl(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const s=Jw(t,e);return s===""?"":n+s}function Ap(t,e){const n=t.substr(e,1);if(n==="0")return n;const s=Zw(t,e);return e+=s.length,s===""?"":s+Gs(t,e)}function Qw(t,e){const n=Ap(t,e);if(e+=n.length,n==="")return"";const s=t.substr(e,1);if(e+=s.length,s!==".")return"";const i=Gs(t,e);return e+=i.length,n+s+i+wl(t,e)}function e_(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const s=Gs(t,e);return e+=s.length,s===""?"":n+s+wl(t,e)}function t_(t,e){const n=Ap(t,e);return e+=n.length,n===""?"":n+wl(t,e)}const n_=bl([Qw,e_,t_]);function s_(t,e){var n;const s=t.substr(e).match(/^[01]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function i_(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const s=s_(t,e);return s===""?"":n+s}function r_(t,e){var n;const s=t.substr(e).match(/^[0-7]+/);return(n=s&&s[0])!==null&&n!==void 0?n:""}function o_(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const s=r_(t,e);return s===""?"":n+s}function l_(t,e){var n;const s=t.substr(e).match(/^[0-9a-f]+/i);return(n=s&&s[0])!==null&&n!==void 0?n:""}function a_(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const s=l_(t,e);return s===""?"":n+s}const c_=bl([i_,o_,a_]),u_=bl([c_,n_]);function p_(t,e){const n=u_(t,e);return e+=n.length,n===""?null:{evaluable:new Hw(n),cursor:e}}function h_(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const s=Dp(t,e);if(!s)return null;e=s.cursor,e+=Hs(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:s.evaluable,cursor:e}}function d_(t,e){var n;return(n=p_(t,e))!==null&&n!==void 0?n:h_(t,e)}function Rp(t,e){const n=d_(t,e);if(n)return n;const s=t.substr(e,1);if(e+=s.length,s!=="+"&&s!=="-"&&s!=="~")return null;const i=Rp(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new Xw(s,i.evaluable)}):null}function m_(t,e,n){n+=Hs(e,n).length;const s=t.filter(i=>e.startsWith(i,n))[0];return s?(n+=s.length,n+=Hs(e,n).length,{cursor:n,operator:s}):null}function f_(t,e){return(n,s)=>{const i=t(n,s);if(!i)return null;s=i.cursor;let r=i.evaluable;for(;;){const o=m_(e,n,s);if(!o)break;s=o.cursor;const l=t(n,s);if(!l)return null;s=l.cursor,r=new Ww(o.operator,r,l.evaluable)}return r?{cursor:s,evaluable:r}:null}}const v_=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>f_(t,e),Rp);function Dp(t,e){return e+=Hs(t,e).length,v_(t,e)}function b_(t){const e=Dp(t,0);return!e||e.cursor+Hs(t,e.cursor).length!==t.length?null:e.evaluable}function Ct(t){var e;const n=b_(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function _l(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Ct(t);if(!Ve(e))return e}return 0}function ze(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function ue(t,e,n,s,i){const r=(t-e)/(n-e);return s+r*(i-s)}function sc(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function $e(t,e,n){return Math.min(Math.max(t,e),n)}function Fp(t,e){return(t%e+e)%e}function w_(t,e){return Ve(t.step)?Math.max(sc(e),2):sc(t.step)}function Bp(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function __(t,e){var n;const s=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return s===0?.1:Math.pow(10,Math.floor(Math.log10(s))-1)}function gl(t,e){return Ve(t.step)?null:new qw(t.step,e)}function Cl(t){return!Ve(t.max)&&!Ve(t.min)?new oi({max:t.max,min:t.min}):!Ve(t.max)||!Ve(t.min)?new vl({max:t.max,min:t.min}):null}function yl(t,e){var n,s,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:ze(w_(t,e)),keyScale:(s=t.keyScale)!==null&&s!==void 0?s:Bp(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:__(t,e)}}function xl(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function Pl(t){return{constraint:t.constraint,textProps:pe.fromObject(yl(t.params,t.initialValue))}}class Bn{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class jn{constructor(e){this.target=e}}class cr extends jn{constructor(e,n,s){super(e),this.value=n,this.last=s??!0}}class g_ extends jn{constructor(e,n){super(e),this.expanded=n}}class C_ extends jn{constructor(e,n){super(e),this.index=n}}class El extends Bn{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ue,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new cr(this,n.binding.target.read(),e.options.last))}}function y_(t,e){const s=Object.keys(e).reduce((i,r)=>{if(i===void 0)return;const o=e[r],l=o(t[r]);return l.succeeded?Object.assign(Object.assign({},i),{[r]:l.value}):void 0},{});return s}function x_(t,e){return t.reduce((n,s)=>{if(n===void 0)return;const i=e(s);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function P_(t){return t===null?!1:typeof t=="object"}function Dt(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const s=t(n);return s!==void 0?{succeeded:!0,value:s}:{succeeded:!1,value:void 0}}}function ic(t){return{custom:e=>Dt(e)(t),boolean:Dt(e=>typeof e=="boolean"?e:void 0)(t),number:Dt(e=>typeof e=="number"?e:void 0)(t),string:Dt(e=>typeof e=="string"?e:void 0)(t),function:Dt(e=>typeof e=="function"?e:void 0)(t),constant:e=>Dt(n=>n===e?e:void 0)(t),raw:Dt(e=>e)(t),object:e=>Dt(n=>{if(P_(n))return y_(n,e)})(t),array:e=>Dt(n=>{if(Array.isArray(n))return x_(n,e)})(t)}}const po={optional:ic(!0),required:ic(!1)};function Oe(t,e){const n=e(po),s=po.required.object(n)(t);return s.succeeded?s.value:void 0}function xt(t,e,n,s){if(e&&!e(t))return!1;const i=Oe(t,n);return i?s(i):!1}function Pt(t,e){var n;return $n((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function Si(t){return"value"in t}function E_(t){if(!fl(t)||!("binding"in t))return!1;const e=t.binding;return jw(e)}const Be="http://www.w3.org/2000/svg";function Ii(t){t.offsetHeight}function k_(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function ur(t){return t.ontouchstart!==void 0}function V_(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const S_={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function pr(t,e){const n=t.createElementNS(Be,"svg");return n.innerHTML=S_[e],n}function jp(t,e,n){t.insertBefore(e,t.children[n])}function kl(t){t.parentElement&&t.parentElement.removeChild(t)}function Np(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function M_(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function Vl(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function mt(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function ft(t,e,n){mt(t.value(e),n)}const $_="tp";function de(t){return(n,s)=>[$_,"-",t,"v",n?`_${n}`:"",s?`-${s}`:""].join("")}const ys=de("lbl");function T_(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}class zp{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ys()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(ys("l")),ft(n.props,"label",r=>{Ve(r)?this.element.classList.add(ys(void 0,"nol")):(this.element.classList.remove(ys(void 0,"nol")),M_(s),s.appendChild(T_(e,r)))}),this.element.appendChild(s),this.labelElement=s;const i=e.createElement("div");i.classList.add(ys("v")),this.element.appendChild(i),this.valueElement=i}}class hr{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new zp(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return xt(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Pt(null,{label:this.props.get("label")})}}function L_(){return["veryfirst","first","last","verylast"]}const rc=de(""),oc={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class li{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{L_().forEach(s=>{n.classList.remove(rc(void 0,oc[s]))}),this.blade.get("positions").forEach(s=>{n.classList.add(rc(void 0,oc[s]))})}),this.viewProps.handleDispose(()=>{kl(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return xt(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Pt(null,Object.assign({},this.viewProps.exportState()))}}class Ki extends li{constructor(e,n){if(n.value!==n.valueController.value)throw We.shouldNeverHappen();const s=n.valueController.viewProps,i=new hr(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new zp(e,{props:n.props,viewProps:s}),viewProps:s})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return xt(e,n=>{var s,i,r;return super.importState(n)&&this.labelController.importProps(n)&&((r=(i=(s=this.valueController).importProps)===null||i===void 0?void 0:i.call(s,e))!==null&&r!==void 0?r:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,s;return Pt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(s=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&s!==void 0?s:{}))}}function Ip(t,e){for(;t.length<e;)t.push(void 0)}function O_(t){const e=[];return Ip(e,t),e}function A_(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function R_(t,e){const n=[...A_(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Ip(n,t.length),n}class D_ extends Bn{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const s=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{s(new jn(this))}),this}}function F_(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function fn(t,e){return n=>{F_(t,e,n)}}function Sl(t,e){mt(t,n=>{e.textContent=n??""})}const Ar=de("btn");class B_{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ar()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("button");s.classList.add(Ar("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const i=e.createElement("div");i.classList.add(Ar("t")),Sl(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class Kp{constructor(e,n){this.emitter=new Ue,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new B_(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return xt(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Pt(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class lc extends li{constructor(e,n){const s=new Kp(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new hr(e,{blade:n.blade,props:n.labelProps,valueController:s});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=s,this.labelController=i}importState(e){return xt(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Pt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class j_{constructor(e){const[n,s]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=s??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const N_=new j_("2.0.0-beta.2");function Ae(t){return Object.assign({core:N_},t)}Ae({id:"button",type:"blade",accept(t){const e=Oe(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new lc(t.document,{blade:t.blade,buttonProps:pe.fromObject({title:t.params.title}),labelProps:pe.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof lc?new D_(t.controller):null}});function z_(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function I_(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function K_(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function U_(t){return fl(t)?"refresh"in t&&typeof t.refresh=="function":!1}function q_(t,e){if(!zi.isBindable(t))throw We.notBindable();return new zi(t,e)}class H_{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Ue,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,s){const i=s??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,q_(e,n),i),l=this.pool_.createBindingApi(o);return this.add(l,i.index)}addFolder(e){return I_(this,e)}addButton(e){return z_(this,e)}addTab(e){return K_(this,e)}add(e,n){const s=e.controller;return this.controller_.rack.add(s,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,s=this.pool_.createBlade(n,e),i=this.pool_.createApi(s);return this.add(i,e.index)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)}),this}refresh(){this.children.forEach(e=>{U_(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,s=this.pool_.createApi(n),i=E_(n.value)?n.value.binding:null;this.emitter_.emit("change",new cr(s,i?i.target.read():n.value.rawValue,e.options.last))}}class Ml extends Bn{constructor(e,n){super(e),this.rackApi_=new H_(e.rackController,n)}}class $l extends li{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return xt(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((s,i)=>s.importState(n.children[i])))}exportState(){return Pt(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function ho(t){return"rackController"in t}class G_{constructor(e){this.emitter=new Ue,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw We.shouldNeverHappen();const s=n!==void 0?n:this.items_.length;this.items_.splice(s,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:s,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const s=this.extract_(e);s&&(s.allItems().forEach(i=>{this.cache_.delete(i)}),s.emitter.off("add",this.onSubListAdd_),s.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function W_(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(Si(s)&&s.value===e)return s}return null}function Y_(t){return ho(t)?t.rackController.rack.bcSet_:null}class X_{constructor(e){var n,s;this.emitter=new Ue,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(s=this.blade_)===null||s===void 0||s.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new G_(Y_),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var s;(s=e.parent)===null||s===void 0||s.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const s=e.item;if(s.viewProps.emitter.on("change",this.onChildViewPropsChange_),s.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),s.viewProps.handleDispose(this.onChildDispose_),Si(s))s.value.emitter.on("change",this.onChildValueChange_);else if(ho(s)){const i=s.rackController.rack;if(i){const r=i.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const s=e.item;if(Si(s))s.value.emitter.off("change",this.onChildValueChange_);else if(ho(s)){const i=s.rackController.rack;if(i){const r=i.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],s=e[e.length-1];this.bcSet_.items.forEach(i=>{const r=[];i===n&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),i===s&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),i.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=W_(this.find(Si),e.sender);if(!n)throw We.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Tl{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new X_({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let s=this.rack.children.length-1;s>=0;s--)this.rack.children[s].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&jp(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&kl(e.bladeController.view.element)}}function Up(){return new pe({positions:Le([],{equals:Bw})})}class ds extends pe{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},s=pe.createCore(n);return new ds(s)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ve(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const s=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};ft(this,"expanded",s),ft(this,"temporaryExpanded",s)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Z_(t,e){let n=0;return k_(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),Ii(e),n=e.clientHeight,t.set("temporaryExpanded",null),Ii(e)}),n}function ac(t,e){e.style.height=t.styleHeight}function dr(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),Ve(t.get("expandedHeight"))){const n=Z_(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),Ii(e)}),t.emitter.on("change",()=>{ac(t,e)}),ac(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class J_ extends Ml{constructor(e,n){super(e,n),this.emitter_=new Ue,this.controller.foldable.value("expanded").emitter.on("change",s=>{this.emitter_.emit("fold",new g_(this,s.sender.rawValue))}),this.rackApi_.on("change",s=>{this.emitter_.emit("change",s)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,s){return this.rackApi_.addBinding(e,n,s)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)}),this}refresh(){this.rackApi_.refresh()}}const qp=de("cnt");class Q_{constructor(e,n){var s;this.className_=de((s=n.viewName)!==null&&s!==void 0?s:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),qp()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),ft(this.foldable_,"completed",fn(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),ft(n.props,"title",c=>{Ve(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(this.className_("t")),Sl(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const a=e.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}}class cc extends $l{constructor(e,n){var s;const i=ds.create((s=n.expanded)!==null&&s!==void 0?s:!0),r=new Q_(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Tl({blade:n.blade,element:r.containerElement,root:n.root,viewProps:n.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,dr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return xt(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Pt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Ae({id:"folder",type:"blade",accept(t){const e=Oe(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new cc(t.document,{blade:t.blade,expanded:t.params.expanded,props:pe.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof cc?new J_(t.controller,t.pool):null}});const eg=de("");function uc(t,e){return fn(t,eg(void 0,e))}class Ut extends pe{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Uw(Le(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,s,i;const r=e??{};return new Ut(pe.createCore({disabled:(n=r.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(s=r.hidden)!==null&&s!==void 0?s:!1,parent:(i=r.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){mt(this.globalDisabled_,uc(e,"disabled")),ft(this,"hidden",uc(e,"hidden"))}bindDisabled(e){mt(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){mt(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const s=e.previousRawValue;s==null||s.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const pc=de("tbp");class tg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(pc()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(pc("c")),this.element.appendChild(s),this.containerElement=s}}const xs=de("tbi");class ng{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(xs()),n.viewProps.bindClassModifiers(this.element),ft(n.props,"selected",r=>{r?this.element.classList.add(xs(void 0,"sel")):this.element.classList.remove(xs(void 0,"sel"))});const s=e.createElement("button");s.classList.add(xs("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const i=e.createElement("div");i.classList.add(xs("t")),Sl(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class sg{constructor(e,n){this.emitter=new Ue,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new ng(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class mo extends $l{constructor(e,n){const s=new tg(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Tl({blade:n.blade,element:s.containerElement,viewProps:n.viewProps}),view:s})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new sg(e,{props:n.itemProps,viewProps:Ut.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,ft(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return xt(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Pt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class ig extends Ml{constructor(e,n){super(e,n),this.emitter_=new Ue,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",s=>{this.emitter_.emit("change",s)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,s=new mo(n,{blade:Up(),itemProps:pe.fromObject({selected:!1,title:e.title}),props:pe.fromObject({selected:!1}),viewProps:Ut.create()}),i=this.pool_.createApi(s);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i)}),this}onSelect_(e){this.emitter_.emit("select",new C_(this,e.rawValue))}}class rg extends Ml{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,s){return this.rackApi_.addBinding(e,n,s)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const hc=-1;class og{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Le(!0),this.selectedIndex=Le(hc),this.items_=[]}add(e,n){const s=n??this.items_.length;this.items_.splice(s,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=hc,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,s)=>{n.rawValue=s===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,s)=>{n.rawValue=s===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(s=>s===e.sender);this.items_.forEach((s,i)=>{s.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const Ps=de("tab");class lg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ps(),qp()),n.viewProps.bindClassModifiers(this.element),mt(n.empty,fn(this.element,Ps(void 0,"nop")));const s=e.createElement("div");s.classList.add(Ps("t")),this.element.appendChild(s),this.itemsElement=s;const i=e.createElement("div");i.classList.add(Ps("i")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Ps("c")),this.element.appendChild(r),this.contentsElement=r}}class dc extends $l{constructor(e,n){const s=new og,i=new lg(e,{empty:s.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Tl({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=s}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;jp(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;kl(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}Ae({id:"tab",type:"blade",accept(t){const e=Oe(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new dc(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const s=new mo(t.document,{blade:Up(),itemProps:pe.fromObject({selected:!1,title:n.title}),props:pe.fromObject({selected:!1}),viewProps:Ut.create()});e.add(s)}),e},api(t){return t.controller instanceof dc?new ig(t.controller,t.pool):t.controller instanceof mo?new rg(t.controller,t.pool):null}});class Ll extends El{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class ag{constructor(){this.disabled=!1,this.emitter=new Ue}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class cg{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Ue,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class ms{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,s)=>s.constrain(n),e)}}function Ws(t,e){if(t instanceof e)return t;if(t instanceof ms){const n=t.constraints.reduce((s,i)=>s||(i instanceof e?i:null),null);if(n)return n}return null}class mr{constructor(e){this.values=pe.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}}function fr(t){var e;const n=po;if(Array.isArray(t))return(e=Oe({items:t},s=>({items:s.required.array(s.required.object({text:s.required.string,value:s.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function Hp(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function Ol(t){return Ve(t)?null:new mr(Hp(t))}const Rr=de("lst");class ug{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(Rr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("select");s.classList.add(Rr("s")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.selectElement=s;const i=e.createElement("div");i.classList.add(Rr("m")),i.appendChild(pr(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,ft(this.props_,"options",r=>{Np(this.selectElement),r.forEach(o=>{const l=e.createElement("option");l.textContent=o.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class os{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new ug(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return xt(e,null,n=>({options:n.required.custom(fr)}),n=>(this.props.set("options",Hp(n.options)),!0))}exportProps(){return Pt(null,{options:this.props.get("options")})}}const mc=de("pop");class pg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(mc()),n.viewProps.bindClassModifiers(this.element),mt(n.shows,fn(this.element,mc(void 0,"v")))}}class Al{constructor(e,n){this.shows=Le(!1),this.viewProps=n.viewProps,this.view=new pg(e,{shows:this.shows,viewProps:this.viewProps})}}const fc=de("txt");class hg{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(fc()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const s=e.createElement("input");s.classList.add(fc("i")),s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class vr{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new hg(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const s=e.currentTarget.value,i=this.parser_(s);Ve(i)||(this.value.rawValue=i),this.view.refresh()}}function dg(t){return String(t)}function Rl(t){return t==="false"?!1:!!t}function vc(t){return dg(t)}function mg(t){return e=>t.reduce((n,s)=>n!==null?n:s(e),null)}const fg=ze(0);function Ui(t){return fg(t)+"%"}function Dl(t){return String(t)}function fo(t){return t}function Nn({primary:t,secondary:e,forward:n,backward:s}){let i=!1;function r(o){i||(i=!0,o(),i=!1)}t.emitter.on("change",o=>{r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{r(()=>{t.setRawValue(s(t.rawValue,e.rawValue),o.options)}),r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),o.options)})}),r(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function je(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Tn(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function yt(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function vg(t){return t==="ArrowUp"||t==="ArrowDown"}function qi(t){return vg(t)||t==="ArrowLeft"||t==="ArrowRight"}function Dr(t,e){var n,s;const i=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+r.left),y:t.pageY-(((s=i&&i.scrollY)!==null&&s!==void 0?s:0)+r.top)}}class Ht{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ue,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const s=this.elem_.ownerDocument;s.addEventListener("mousemove",this.onDocumentMouseMove_),s.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Dr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Dr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Dr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),s=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),s=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const s=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(s?{x:s.clientX-i.left,y:s.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const ct=de("txt");class bg{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ct(),ct(void 0,"num")),n.arrayPosition&&this.element.classList.add(ct(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("input");s.classList.add(ct("i")),s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ct()),this.inputElement.classList.add(ct("i"));const i=e.createElement("div");i.classList.add(ct("k")),this.element.appendChild(i),this.knobElement=i;const r=e.createElementNS(Be,"svg");r.classList.add(ct("g")),this.knobElement.appendChild(r);const o=e.createElementNS(Be,"path");o.classList.add(ct("gb")),r.appendChild(o),this.guideBodyElem_=o;const l=e.createElementNS(Be,"path");l.classList.add(ct("gh")),r.appendChild(l),this.guideHeadElem_=l;const a=e.createElement("div");a.classList.add(de("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(ct(void 0,"drg"));return}this.element.classList.add(ct(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),s=n+(n>0?-1:n<0?1:0),i=$e(-s,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${s+i},0 L${s},4 L${s+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class ai{constructor(e,n){var s;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(s=n.sliderProps)!==null&&s!==void 0?s:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Le(null),this.view=new bg(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Ht(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,s;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),r=(s=this.sliderProps_)===null||s===void 0?void 0:s.get("max");let o=e;return i!==void 0&&(o=Math.max(o,i)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(e){const s=e.currentTarget.value,i=this.parser_(s);Ve(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=je(this.props.get("keyScale"),Tn(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){je(this.props.get("keyScale"),Tn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Fr=de("sld");class wg{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Fr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Fr("t")),n.viewProps.bindTabIndex(s),this.element.appendChild(s),this.trackElement=s;const i=e.createElement("div");i.classList.add(Fr("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=$e(ue(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class _g{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new wg(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ht(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(ue($e(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=je(this.props.get("keyScale"),yt(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){je(this.props.get("keyScale"),yt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Br=de("sldtxt");class gg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Br());const s=e.createElement("div");s.classList.add(Br("s")),this.sliderView_=n.sliderView,s.appendChild(this.sliderView_.element),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Br("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class bc{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new _g(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new ai(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new gg(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return xt(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const s=this.sliderC_.props;return s.set("max",n.max),s.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Pt(null,{max:e.get("max"),min:e.get("min")})}}function Cg(t){return{sliderProps:new pe({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new pe({formatter:Le(t.formatter),keyScale:t.keyScale,pointerScale:Le(t.pointerScale)})}}const yg={containerUnitSize:"cnt-usz"};function Gp(t){return`--${yg[t]}`}class Wp{constructor(e,n){const s=de(n.viewName);this.element=e.createElement("div"),this.element.classList.add(s()),n.viewProps.bindClassModifiers(this.element)}}function Ys(t){return xl(t)}function ln(t){if(uo(t))return Oe(t,Ys)}function Bt(t,e){if(!t)return;const n=[],s=gl(t,e);s&&n.push(s);const i=Cl(t);return i&&n.push(i),new ms(n)}function Yp(t){if(t==="inline"||t==="popup")return t}function vn(t,e){t.write(e)}const wi=de("ckb");class xg{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(wi()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("label");s.classList.add(wi("l")),this.element.appendChild(s);const i=e.createElement("input");i.classList.add(wi("i")),i.type="checkbox",s.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(wi("w")),s.appendChild(r);const o=pr(e,"check");r.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Pg{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new xg(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function Eg(t){const e=[],n=Ol(t.options);return n&&e.push(n),new ms(e)}Ae({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Oe(e,s=>({options:s.optional.custom(fr),readonly:s.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Rl,constraint:t=>Eg(t.params),writer:t=>vn},controller:t=>{const e=t.document,n=t.value,s=t.constraint,i=s&&Ws(s,mr);return i?new os(e,{props:new pe({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new Pg(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof os?new Ll(t.controller):null}});const gn=de("col");class kg{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(gn()),n.foldable.bindExpandedClass(this.element,gn(void 0,"expanded")),ft(n.foldable,"completed",fn(this.element,gn(void 0,"cpl")));const s=e.createElement("div");s.classList.add(gn("h")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(gn("s")),s.appendChild(i),this.swatchElement=i;const r=e.createElement("div");if(r.classList.add(gn("t")),s.appendChild(r),this.textElement=r,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(gn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function Vg(t,e,n){const s=$e(t/255,0,1),i=$e(e/255,0,1),r=$e(n/255,0,1),o=Math.max(s,i,r),l=Math.min(s,i,r),a=o-l;let c=0,p=0;const g=(l+o)/2;return a!==0&&(p=a/(1-Math.abs(o+l-1)),s===o?c=(i-r)/a:i===o?c=2+(r-s)/a:c=4+(s-i)/a,c=c/6+(c<0?1:0)),[c*360,p*100,g*100]}function Sg(t,e,n){const s=(t%360+360)%360,i=$e(e/100,0,1),r=$e(n/100,0,1),o=(1-Math.abs(2*r-1))*i,l=o*(1-Math.abs(s/60%2-1)),a=r-o/2;let c,p,g;return s>=0&&s<60?[c,p,g]=[o,l,0]:s>=60&&s<120?[c,p,g]=[l,o,0]:s>=120&&s<180?[c,p,g]=[0,o,l]:s>=180&&s<240?[c,p,g]=[0,l,o]:s>=240&&s<300?[c,p,g]=[l,0,o]:[c,p,g]=[o,0,l],[(c+a)*255,(p+a)*255,(g+a)*255]}function Mg(t,e,n){const s=$e(t/255,0,1),i=$e(e/255,0,1),r=$e(n/255,0,1),o=Math.max(s,i,r),l=Math.min(s,i,r),a=o-l;let c;a===0?c=0:o===s?c=60*(((i-r)/a%6+6)%6):o===i?c=60*((r-s)/a+2):c=60*((s-i)/a+4);const p=o===0?0:a/o,g=o;return[c,p*100,g*100]}function Xp(t,e,n){const s=Fp(t,360),i=$e(e/100,0,1),r=$e(n/100,0,1),o=r*i,l=o*(1-Math.abs(s/60%2-1)),a=r-o;let c,p,g;return s>=0&&s<60?[c,p,g]=[o,l,0]:s>=60&&s<120?[c,p,g]=[l,o,0]:s>=120&&s<180?[c,p,g]=[0,o,l]:s>=180&&s<240?[c,p,g]=[0,l,o]:s>=240&&s<300?[c,p,g]=[l,0,o]:[c,p,g]=[o,0,l],[(c+a)*255,(p+a)*255,(g+a)*255]}function $g(t,e,n){const s=n+e*(100-Math.abs(2*n-100))/200;return[t,s!==0?e*(100-Math.abs(2*n-100))/s:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function Tg(t,e,n){const s=100-Math.abs(n*(200-e)/100-100);return[t,s!==0?e*n/s:0,n*(200-e)/(2*100)]}function At(t){return[t[0],t[1],t[2]]}function br(t,e){return[t[0],t[1],t[2],e]}const Lg={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:$g,rgb:Sg},hsv:{hsl:Tg,hsv:(t,e,n)=>[t,e,n],rgb:Xp},rgb:{hsl:Vg,hsv:Mg,rgb:(t,e,n)=>[t,e,n]}};function ls(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function Og(t,e){return t===e?e:Fp(t,e)}function Zp(t,e,n){var s;const i=ls(e,n);return[e==="rgb"?$e(t[0],0,i[0]):Og(t[0],i[0]),$e(t[1],0,i[1]),$e(t[2],0,i[2]),$e((s=t[3])!==null&&s!==void 0?s:1,0,1)]}function wc(t,e,n,s){const i=ls(e,n),r=ls(e,s);return t.map((o,l)=>o/i[l]*r[l])}function Jp(t,e,n){const s=wc(t,e.mode,e.type,"int"),i=Lg[e.mode][n.mode](...s);return wc(i,n.mode,"int",n.type)}class ge{static black(){return new ge([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=Zp(e,n,this.type)}getComponents(e){return br(Jp(At(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Zt=de("colp");class Ag{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Zt()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Zt("hsv"));const i=e.createElement("div");i.classList.add(Zt("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),s.appendChild(i);const r=e.createElement("div");r.classList.add(Zt("h")),this.hPaletteView_=n.hPaletteView,r.appendChild(this.hPaletteView_.element),s.appendChild(r),this.element.appendChild(s);const o=e.createElement("div");if(o.classList.add(Zt("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const l=e.createElement("div");l.classList.add(Zt("a"));const a=e.createElement("div");a.classList.add(Zt("ap")),a.appendChild(this.alphaViews_.palette.element),l.appendChild(a);const c=e.createElement("div");c.classList.add(Zt("at")),c.appendChild(this.alphaViews_.text.element),l.appendChild(c),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function Rg(t){return t==="int"?"int":t==="float"?"float":void 0}function Fl(t){return Oe(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Rg)}),expanded:e.optional.boolean,picker:e.optional.custom(Yp),readonly:e.optional.constant(!1)}))}function Ln(t){return t?.1:1}function Qp(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class Bl{constructor(e,n){this.type="float",this.mode=n,this.comps_=Zp(e,n,this.type)}getComponents(e){return br(Jp(At(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Dg={int:(t,e)=>new ge(t,e),float:(t,e)=>new Bl(t,e)};function jl(t,e,n){return Dg[n](t,e)}function Fg(t){return t.type==="float"}function Bg(t){return t.type==="int"}function jg(t){const e=t.getComponents(),n=ls(t.mode,"int");return new ge([Math.round(ue(e[0],0,1,0,n[0])),Math.round(ue(e[1],0,1,0,n[1])),Math.round(ue(e[2],0,1,0,n[2])),e[3]],t.mode)}function Ng(t){const e=t.getComponents(),n=ls(t.mode,"int");return new Bl([ue(e[0],0,n[0],0,1),ue(e[1],0,n[1],0,1),ue(e[2],0,n[2],0,1),e[3]],t.mode)}function Xe(t,e){if(t.type===e)return t;if(Bg(t)&&e==="float")return Ng(t);if(Fg(t)&&e==="int")return jg(t);throw We.shouldNeverHappen()}function zg(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function dt(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const Ig={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function eh(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),s=e[2];return Ig[s](n)}function th(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[dt(e[1],255),dt(e[2],255),dt(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Kg(t){const e=th(t);return e?new ge(e,"rgb"):null}function nh(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[dt(e[1],255),dt(e[2],255),dt(e[3],255),dt(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Ug(t){const e=nh(t);return e?new ge(e,"rgb"):null}function sh(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[eh(e[1]),dt(e[2],100),dt(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function qg(t){const e=sh(t);return e?new ge(e,"hsl"):null}function ih(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[eh(e[1]),dt(e[2],100),dt(e[3],100),dt(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Hg(t){const e=ih(t);return e?new ge(e,"hsl"):null}function rh(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Gg(t){const e=rh(t);return e?new ge(e,"rgb"):null}function oh(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ue(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),ue(parseInt(n[4],16),0,255,0,1)]:null}function Wg(t){const e=oh(t);return e?new ge(e,"rgb"):null}function lh(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Yg(t){return e=>{const n=lh(e);return n?jl(n,"rgb",t):null}}function ah(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Xg(t){return e=>{const n=ah(e);return n?jl(n,"rgb",t):null}}const Zg=[{parser:rh,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:oh,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:th,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:nh,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:sh,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:ih,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:lh,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:ah,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Jg(t){return Zg.reduce((e,{parser:n,result:s})=>e||(n(t)?s:null),null)}function Qg(t,e="int"){const n=Jg(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function ci(t){const e=[Gg,Wg,Kg,Ug,qg,Hg];e.push(Yg("int"),Xg("int"));const n=mg(e);return s=>{const i=n(s);return i?Xe(i,t):null}}function e1(t){const e=ci("int");if(typeof t!="string")return ge.black();const n=e(t);return n??ge.black()}function ch(t){const e=$e(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function Nl(t,e="#"){const n=At(t.getComponents("rgb")).map(ch).join("");return`${e}${n}`}function zl(t,e="#"){const n=t.getComponents("rgb"),s=[n[0],n[1],n[2],n[3]*255].map(ch).join("");return`${e}${s}`}function uh(t){const e=ze(0),n=Xe(t,"int");return`rgb(${At(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function Mi(t){const e=ze(2),n=ze(0);return`rgba(${Xe(t,"int").getComponents("rgb").map((r,o)=>(o===3?e:n)(r)).join(", ")})`}function t1(t){const e=[ze(0),Ui,Ui],n=Xe(t,"int");return`hsl(${At(n.getComponents("hsl")).map((i,r)=>e[r](i)).join(", ")})`}function n1(t){const e=[ze(0),Ui,Ui,ze(2)];return`hsla(${Xe(t,"int").getComponents("hsl").map((i,r)=>e[r](i)).join(", ")})`}function ph(t,e){const n=ze(e==="float"?2:0),s=["r","g","b"],i=Xe(t,e);return`{${At(i.getComponents("rgb")).map((o,l)=>`${s[l]}: ${n(o)}`).join(", ")}}`}function s1(t){return e=>ph(e,t)}function hh(t,e){const n=ze(2),s=ze(e==="float"?2:0),i=["r","g","b","a"];return`{${Xe(t,e).getComponents("rgb").map((l,a)=>{const c=a===3?n:s;return`${i[a]}: ${c(l)}`}).join(", ")}}`}function i1(t){return e=>hh(e,t)}const r1=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Nl},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:zl},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:uh},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Mi},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:t1},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:n1},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:s1(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:i1(e)}],[])];function dh(t){return r1.reduce((e,n)=>e||(zg(n.format,t)?n.stringifier:null),null)}const Es=de("apl");class o1{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Es()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(Es("b")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Es("c")),s.appendChild(i),this.colorElem_=i;const r=e.createElement("div");r.classList.add(Es("m")),this.element.appendChild(r),this.markerElem_=r;const o=e.createElement("div");o.classList.add(Es("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),s=new ge([n[0],n[1],n[2],0],"rgb"),i=new ge([n[0],n[1],n[2],255],"rgb"),r=["to right",Mi(s),Mi(i)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Mi(e);const o=ue(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class l1{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new o1(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ht(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=e.point.x/e.bounds.width,i=this.value.rawValue,[r,o,l]=i.getComponents("hsv");this.value.setRawValue(new ge([r,o,l,s],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=je(Ln(!0),yt(e));if(n===0)return;const s=this.value.rawValue,[i,r,o,l]=s.getComponents("hsv");this.value.setRawValue(new ge([i,r,o,l+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){je(Ln(!0),yt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Un=de("coltxt");function a1(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((s,i)=>{const r=t.createElement("option");return r.textContent=i.text,r.value=i.value,s.appendChild(r),s},t.createDocumentFragment())),e}class c1{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Un()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Un("m")),this.modeElem_=a1(e),this.modeElem_.classList.add(Un("ms")),s.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(Un("mm")),i.appendChild(pr(e,"dropdown")),s.appendChild(i),this.element.appendChild(s);const r=e.createElement("div");r.classList.add(Un("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=n.inputViews,this.applyInputViews_(),mt(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Np(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const s=e.createElement("div");s.classList.add(Un("c")),s.appendChild(n.element),this.inputsElem_.appendChild(s)})}}function u1(t){return ze(t==="float"?2:0)}function p1(t,e,n){const s=ls(t,e)[n];return new oi({min:0,max:s})}function h1(t,e,n){return new ai(t,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:e.parser,props:pe.fromObject({formatter:u1(e.colorType),keyScale:Ln(!1),pointerScale:e.colorType==="float"?.01:1}),value:Le(0,{constraint:p1(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function d1(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Ct,viewProps:e.viewProps};return[0,1,2].map(s=>{const i=h1(t,n,s);return Nn({primary:e.value,secondary:i.value,forward(r){return Xe(r,e.colorType).getComponents(e.colorMode)[s]},backward(r,o){const l=e.colorMode,c=Xe(r,e.colorType).getComponents(l);c[s]=o;const p=jl(br(At(c),c[3]),l,e.colorType);return Xe(p,"int")}}),i})}function m1(t,e){const n=new vr(t,{parser:ci("int"),props:pe.fromObject({formatter:Nl}),value:Le(ge.black()),viewProps:e.viewProps});return Nn({primary:e.value,secondary:n.value,forward:s=>new ge(At(s.getComponents()),s.mode),backward:(s,i)=>new ge(br(At(i.getComponents(s.mode)),s.getComponents()[3]),s.mode)}),[n]}function f1(t){return t!=="hex"}class v1{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Le(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new c1(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return f1(n)?d1(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):m1(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(s=>s.view)}}const jr=de("hpl");class b1{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(jr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(jr("c")),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(jr("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=uh(new ge([n,100,100],"hsv"));const s=ue(n,0,360,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}}class w1{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new b1(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ht(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=ue($e(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,r,o,l]=i.getComponents("hsv");this.value.setRawValue(new ge([s,r,o,l],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=je(Ln(!1),yt(e));if(n===0)return;const s=this.value.rawValue,[i,r,o,l]=s.getComponents("hsv");this.value.setRawValue(new ge([i+n,r,o,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){je(Ln(!1),yt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Nr=de("svp"),_c=64;class _1{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Nr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("canvas");s.height=_c,s.width=_c,s.classList.add(Nr("c")),this.element.appendChild(s),this.canvasElement=s;const i=e.createElement("div");i.classList.add(Nr("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=V_(this.canvasElement);if(!e)return;const s=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,r=this.canvasElement.height,o=e.getImageData(0,0,i,r),l=o.data;for(let p=0;p<r;p++)for(let g=0;g<i;g++){const X=ue(g,0,i,0,100),J=ue(p,0,r,100,0),V=Xp(s[0],X,J),f=(p*i+g)*4;l[f]=V[0],l[f+1]=V[1],l[f+2]=V[2],l[f+3]=255}e.putImageData(o,0,0);const a=ue(s[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const c=ue(s[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class g1{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new _1(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ht(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=ue(e.point.x,0,e.bounds.width,0,100),i=ue(e.point.y,0,e.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new ge([r,s,i,o],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){qi(e.key)&&e.preventDefault();const[n,s,i,r]=this.value.rawValue.getComponents("hsv"),o=Ln(!1),l=je(o,yt(e)),a=je(o,Tn(e));l===0&&a===0||this.value.setRawValue(new ge([n,s+l,i+a,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Ln(!1),s=je(n,yt(e)),i=je(n,Tn(e));s===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class C1{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new w1(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new g1(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new l1(e,{value:this.value,viewProps:this.viewProps}),text:new ai(e,{parser:Ct,props:pe.fromObject({pointerScale:.01,keyScale:.1,formatter:ze(2)}),value:Le(0,{constraint:new oi({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Nn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:s=>s.getComponents()[3],backward:(s,i)=>{const r=s.getComponents();return r[3]=i,new ge(r,s.mode)}}),this.textsC_=new v1(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Ag(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const zr=de("colsw");class y1{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(zr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(zr("sw")),this.element.appendChild(s),this.swatchElem_=s;const i=e.createElement("button");i.classList.add(zr("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=zl(e)}onValueChange_(){this.update_()}}class x1{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new y1(e,{value:this.value,viewProps:this.viewProps})}}class Il{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ds.create(n.expanded),this.swatchC_=new x1(e,{value:this.value,viewProps:this.viewProps});const s=this.swatchC_.view.buttonElement;s.addEventListener("blur",this.onButtonBlur_),s.addEventListener("click",this.onButtonClick_),this.textC_=new vr(e,{parser:n.parser,props:pe.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new kg(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Al(e,{viewProps:this.viewProps}):null;const i=new C1(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Nn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,s=e.relatedTarget;(!s||!n.contains(s))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=Vl(e);s&&n.contains(s)||s&&s===this.swatchC_.view.buttonElement&&!ur(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function P1(t){return At(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function E1(t){return t.getComponents("rgb").reduce((e,n,s)=>{const i=Math.floor(s===3?n*255:n)&255;return e<<8|i},0)>>>0}function k1(t){return new ge([t>>16&255,t>>8&255,t&255],"rgb")}function V1(t){return new ge([t>>24&255,t>>16&255,t>>8&255,ue(t&255,0,255,0,1)],"rgb")}function S1(t){return typeof t!="number"?ge.black():k1(t)}function M1(t){return typeof t!="number"?ge.black():V1(t)}function $i(t,e){return typeof t!="object"||Ve(t)?!1:e in t&&typeof t[e]=="number"}function mh(t){return $i(t,"r")&&$i(t,"g")&&$i(t,"b")}function fh(t){return mh(t)&&$i(t,"a")}function vh(t){return mh(t)}function Kl(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),s=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==s[i])return!1;return!0}function gc(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function $1(t){const e=dh(t);return e?(n,s)=>{vn(n,e(s))}:null}function T1(t){const e=t?E1:P1;return(n,s)=>{vn(n,e(s))}}function L1(t,e,n){const i=Xe(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function O1(t,e,n){const i=Xe(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function A1(t,e){return(n,s)=>{t?L1(n,s,e):O1(n,s,e)}}function R1(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function D1(t){return t?e=>zl(e,"0x"):e=>Nl(e,"0x")}function F1(t){return"color"in t||t.view==="color"}Ae({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!F1(e))return null;const n=Fl(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:R1(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?M1:S1,equals:Kl,writer:t=>T1(t.params.supportsAlpha)},controller:t=>{var e,n;return new Il(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:D1(t.params.supportsAlpha),parser:ci("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function B1(t,e){if(!vh(t))return Xe(ge.black(),e);if(e==="int"){const n=gc(t);return new ge(n,"rgb")}if(e==="float"){const n=gc(t);return new Bl(n,"rgb")}return Xe(ge.black(),"int")}function j1(t){return fh(t)}function N1(t){return e=>{const n=B1(e,t);return Xe(n,"int")}}function z1(t,e){return n=>t?hh(n,e):ph(n,e)}Ae({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!vh(t))return null;const s=Fl(e);return s?{initialValue:t,params:Object.assign(Object.assign({},s),{colorType:(n=Qp(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>N1(t.params.colorType),equals:Kl,writer:t=>A1(j1(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const s=fh(t.initialValue);return new Il(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:z1(s,t.params.colorType),parser:ci("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:s,value:t.value,viewProps:t.viewProps})}});Ae({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=Qg(t,Qp(e));if(!n)return null;const s=dh(n);if(!s)return null;const i=Fl(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:s})}:null},binding:{reader:()=>e1,equals:Kl,writer:t=>{const e=$1(t.params.format);if(!e)throw We.notBindable();return e}},controller:t=>{var e,n;return new Il(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:ci("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class wr{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((s,i)=>{var r,o;return(o=(r=this.components[i])===null||r===void 0?void 0:r.constrain(s))!==null&&o!==void 0?o:s});return this.asm_.fromComponents(n)}}const Cc=de("pndtxt");class I1{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(Cc()),this.textViews.forEach(s=>{const i=e.createElement("div");i.classList.add(Cc("a")),i.appendChild(s.element),this.element.appendChild(i)})}}function K1(t,e,n){return new ai(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Le(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class fs{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((s,i)=>K1(e,n,i)),this.acs_.forEach((s,i)=>{Nn({primary:this.value,secondary:s.value,forward:r=>n.assembly.toComponents(r)[i],backward:(r,o)=>{const l=n.assembly.toComponents(r);return l[i]=o,n.assembly.fromComponents(l)}})}),this.view=new I1(e,{textViews:this.acs_.map(s=>s.view)})}get textControllers(){return this.acs_}}class U1 extends El{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function q1(t,e){const n=[],s=gl(t,e);s&&n.push(s);const i=Cl(t);i&&n.push(i);const r=Ol(t.options);return r&&n.push(r),new ms(n)}Ae({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Oe(e,s=>Object.assign(Object.assign({},xl(s)),{options:s.optional.custom(fr),readonly:s.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>_l,constraint:t=>q1(t.params,t.initialValue),writer:t=>vn},controller:t=>{const e=t.value,n=t.constraint,s=n&&Ws(n,mr);if(s)return new os(t.document,{props:new pe({options:s.values.value("options")}),value:e,viewProps:t.viewProps});const i=yl(t.params,e.rawValue),r=n&&Ws(n,oi);return r?new bc(t.document,Object.assign(Object.assign({},Cg(Object.assign(Object.assign({},i),{keyScale:Le(i.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:Ct,value:e,viewProps:t.viewProps})):new ai(t.document,{parser:Ct,props:pe.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof bc?new U1(t.controller):t.controller.valueController instanceof os?new Ll(t.controller):null}});class pn{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Ve(e))return!1;const n=e.x,s=e.y;return!(typeof n!="number"||typeof s!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const bh={toComponents:t=>t.getComponents(),fromComponents:t=>new pn(...t)},qn=de("p2d");class H1{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(qn()),n.viewProps.bindClassModifiers(this.element),mt(n.expanded,fn(this.element,qn(void 0,"expanded")));const s=e.createElement("div");s.classList.add(qn("h")),this.element.appendChild(s);const i=e.createElement("button");i.classList.add(qn("b")),i.appendChild(pr(e,"p2dpad")),n.viewProps.bindDisabled(i),s.appendChild(i),this.buttonElement=i;const r=e.createElement("div");if(r.classList.add(qn("t")),s.appendChild(r),this.textElement=r,n.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(qn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const Jt=de("p2dp");class G1{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Jt()),n.layout==="popup"&&this.element.classList.add(Jt(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Jt("p")),n.viewProps.bindTabIndex(s),this.element.appendChild(s),this.padElement=s;const i=e.createElementNS(Be,"svg");i.classList.add(Jt("g")),this.padElement.appendChild(i),this.svgElem_=i;const r=e.createElementNS(Be,"line");r.classList.add(Jt("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=e.createElementNS(Be,"line");o.classList.add(Jt("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const l=e.createElementNS(Be,"line");l.classList.add(Jt("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const a=e.createElement("div");a.classList.add(Jt("m")),this.padElement.appendChild(a),this.markerElem_=a,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),s=this.props_.get("max"),i=ue(e,-s,+s,0,100),r=ue(n,-s,+s,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function yc(t,e,n){return[je(e[0],yt(t)),je(e[1],Tn(t))*(n?1:-1)]}class W1{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new G1(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ht(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const s=this.props.get("max"),i=ue(e.point.x,0,e.bounds.width,-s,+s),r=ue(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-s,+s);this.value.setRawValue(new pn(i,r),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){qi(e.key)&&e.preventDefault();const[n,s]=yc(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&s===0||this.value.setRawValue(new pn(this.value.rawValue.x+n,this.value.rawValue.y+s),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,s]=yc(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Y1{constructor(e,n){var s,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ds.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new Al(e,{viewProps:this.viewProps}):null;const r=new W1(e,{layout:n.pickerLayout,props:new pe({invertsY:Le(n.invertsY),max:Le(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new fs(e,{assembly:bh,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new H1(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Nn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,s=e.relatedTarget;(!s||!n.contains(s))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=Vl(e);s&&n.contains(s)||s&&s===this.view.buttonElement&&!ur(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function X1(t){return pn.isObject(t)?new pn(t.x,t.y):new pn}function Z1(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function J1(t,e){return new wr({assembly:bh,components:[Bt(Object.assign(Object.assign({},t),t.x),e.x),Bt(Object.assign(Object.assign({},t),t.y),e.y)]})}function xc(t,e){var n,s;if(!Ve(t.min)||!Ve(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((s=t.max)!==null&&s!==void 0?s:0));const i=Bp(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function Q1(t,e){var n,s;const i=xc($n(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),r=xc($n(t,(s=t.y)!==null&&s!==void 0?s:{}),e.y);return Math.max(i,r)}function eC(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}Ae({id:"input-point2d",type:"input",accept:(t,e)=>{if(!pn.isObject(t))return null;const n=Oe(e,s=>Object.assign(Object.assign({},Ys(s)),{expanded:s.optional.boolean,picker:s.optional.custom(Yp),readonly:s.optional.constant(!1),x:s.optional.custom(ln),y:s.optional.object(Object.assign(Object.assign({},Ys(s)),{inverted:s.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>X1,constraint:t=>J1(t.params,t.initialValue),equals:pn.equals,writer:()=>Z1},controller:t=>{var e,n;const s=t.document,i=t.value,r=t.constraint,o=[t.params.x,t.params.y];return new Y1(s,{axes:i.rawValue.getComponents().map((l,a)=>{var c;return Pl({constraint:r.components[a],initialValue:l,params:$n(t.params,(c=o[a])!==null&&c!==void 0?c:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:eC(t.params),max:Q1(t.params,i.rawValue),parser:Ct,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});class es{constructor(e=0,n=0,s=0){this.x=e,this.y=n,this.z=s}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Ve(e))return!1;const n=e.x,s=e.y,i=e.z;return!(typeof n!="number"||typeof s!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const wh={toComponents:t=>t.getComponents(),fromComponents:t=>new es(...t)};function tC(t){return es.isObject(t)?new es(t.x,t.y,t.z):new es}function nC(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function sC(t,e){return new wr({assembly:wh,components:[Bt(Object.assign(Object.assign({},t),t.x),e.x),Bt(Object.assign(Object.assign({},t),t.y),e.y),Bt(Object.assign(Object.assign({},t),t.z),e.z)]})}Ae({id:"input-point3d",type:"input",accept:(t,e)=>{if(!es.isObject(t))return null;const n=Oe(e,s=>Object.assign(Object.assign({},Ys(s)),{readonly:s.optional.constant(!1),x:s.optional.custom(ln),y:s.optional.custom(ln),z:s.optional.custom(ln)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>tC,constraint:t=>sC(t.params,t.initialValue),equals:es.equals,writer:t=>nC},controller:t=>{const e=t.value,n=t.constraint,s=[t.params.x,t.params.y,t.params.z];return new fs(t.document,{assembly:wh,axes:e.rawValue.getComponents().map((i,r)=>{var o;return Pl({constraint:n.components[r],initialValue:i,params:$n(t.params,(o=s[r])!==null&&o!==void 0?o:{})})}),parser:Ct,value:e,viewProps:t.viewProps})}});class ts{constructor(e=0,n=0,s=0,i=0){this.x=e,this.y=n,this.z=s,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Ve(e))return!1;const n=e.x,s=e.y,i=e.z,r=e.w;return!(typeof n!="number"||typeof s!="number"||typeof i!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const _h={toComponents:t=>t.getComponents(),fromComponents:t=>new ts(...t)};function iC(t){return ts.isObject(t)?new ts(t.x,t.y,t.z,t.w):new ts}function rC(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function oC(t,e){return new wr({assembly:_h,components:[Bt(Object.assign(Object.assign({},t),t.x),e.x),Bt(Object.assign(Object.assign({},t),t.y),e.y),Bt(Object.assign(Object.assign({},t),t.z),e.z),Bt(Object.assign(Object.assign({},t),t.w),e.w)]})}Ae({id:"input-point4d",type:"input",accept:(t,e)=>{if(!ts.isObject(t))return null;const n=Oe(e,s=>Object.assign(Object.assign({},Ys(s)),{readonly:s.optional.constant(!1),w:s.optional.custom(ln),x:s.optional.custom(ln),y:s.optional.custom(ln),z:s.optional.custom(ln)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>iC,constraint:t=>oC(t.params,t.initialValue),equals:ts.equals,writer:t=>rC},controller:t=>{const e=t.value,n=t.constraint,s=[t.params.x,t.params.y,t.params.z,t.params.w];return new fs(t.document,{assembly:_h,axes:e.rawValue.getComponents().map((i,r)=>{var o;return Pl({constraint:n.components[r],initialValue:i,params:$n(t.params,(o=s[r])!==null&&o!==void 0?o:{})})}),parser:Ct,value:e,viewProps:t.viewProps})}});function lC(t){const e=[],n=Ol(t.options);return n&&e.push(n),new ms(e)}Ae({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Oe(e,s=>({readonly:s.optional.constant(!1),options:s.optional.custom(fr)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Dl,constraint:t=>lC(t.params),writer:t=>vn},controller:t=>{const e=t.document,n=t.value,s=t.constraint,i=s&&Ws(s,mr);return i?new os(e,{props:new pe({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new vr(e,{parser:r=>r,props:pe.fromObject({formatter:fo}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof os?new Ll(t.controller):null}});const ui={monitor:{defaultInterval:200,defaultRows:3}},Pc=de("mll");class aC{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Pc()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("textarea");s.classList.add(Pc("i")),s.style.height=`calc(var(${Gp("containerUnitSize")}) * ${n.rows})`,s.readOnly=!0,n.viewProps.bindDisabled(s),this.element.appendChild(s),this.textareaElem_=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,s=[];this.value.rawValue.forEach(i=>{i!==void 0&&s.push(this.formatter_(i))}),e.textContent=s.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class Ul{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new aC(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const Ec=de("sgl");class cC{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Ec()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("input");s.classList.add(Ec("i")),s.readOnly=!0,s.type="text",n.viewProps.bindDisabled(s),this.element.appendChild(s),this.inputElement=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class ql{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new cC(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}Ae({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Oe(e,s=>({readonly:s.required.constant(!0),rows:s.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Rl},controller:t=>{var e;return t.value.rawValue.length===1?new ql(t.document,{formatter:vc,value:t.value,viewProps:t.viewProps}):new Ul(t.document,{formatter:vc,rows:(e=t.params.rows)!==null&&e!==void 0?e:ui.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class uC extends El{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Qt=de("grl");class pC{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Qt()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const s=e.createElementNS(Be,"svg");s.classList.add(Qt("g")),s.style.height=`calc(var(${Gp("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(s),this.svgElem_=s;const i=e.createElementNS(Be,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const r=e.createElement("div");r.classList.add(Qt("t"),de("tt")()),this.element.appendChild(r),this.tooltipElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,s=this.props_.get("min"),i=this.props_.get("max"),r=[];this.value.rawValue.forEach((p,g)=>{if(p===void 0)return;const X=ue(g,0,n,0,e.width),J=ue(p,s,i,e.height,0);r.push([X,J].join(","))}),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const o=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){o.classList.remove(Qt("t","a"));return}const a=ue(this.cursor_.rawValue,0,n,0,e.width),c=ue(l,s,i,e.height,0);o.style.left=`${a}px`,o.style.top=`${c}px`,o.textContent=`${this.formatter_(l)}`,o.classList.contains(Qt("t","a"))||(o.classList.add(Qt("t","a"),Qt("t","in")),Ii(o),o.classList.remove(Qt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Hl{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Le(-1),this.view=new pC(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!ur(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const s=new Ht(this.view.element);s.emitter.on("down",this.onGraphPointerDown_),s.emitter.on("move",this.onGraphPointerMove_),s.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return xt(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Pt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(ue(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(ue(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function vo(t){return Ve(t.format)?ze(2):t.format}function hC(t){var e;return t.value.rawValue.length===1?new ql(t.document,{formatter:vo(t.params),value:t.value,viewProps:t.viewProps}):new Ul(t.document,{formatter:vo(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:ui.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function dC(t){var e,n,s;return new Hl(t.document,{formatter:vo(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:ui.monitor.defaultRows,props:pe.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(s=t.params.min)!==null&&s!==void 0?s:0}),value:t.value,viewProps:t.viewProps})}function kc(t){return t.view==="graph"}Ae({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Oe(e,s=>({format:s.optional.function,max:s.optional.number,min:s.optional.number,readonly:s.required.constant(!0),rows:s.optional.number,view:s.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>kc(t)?64:1,reader:t=>_l},controller:t=>kc(t.params)?dC(t):hC(t),api:t=>t.controller.valueController instanceof Hl?new uC(t.controller):null});Ae({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Oe(e,s=>({multiline:s.optional.boolean,readonly:s.required.constant(!0),rows:s.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Dl},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new Ul(t.document,{formatter:fo,rows:(e=t.params.rows)!==null&&e!==void 0?e:ui.monitor.defaultRows,value:n,viewProps:t.viewProps}):new ql(t.document,{formatter:fo,value:n,viewProps:t.viewProps})}});class gh{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const s=n.bind(this);return this.controller_.emitter.on(e,()=>{s(new jn(this))}),this}}class mC extends jn{constructor(e,n,s){super(e),this.cell=n,this.index=s}}class Ch extends Bn{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new Ue;const n=this.controller.valueController;n.cellControllers.forEach((s,i)=>{const r=new gh(s);this.cellToApiMap_.set(s,r),s.emitter.on("click",()=>{const o=i%n.size[0],l=Math.floor(i/n.size[0]);this.emitter_.emit("click",{event:new mC(this,r,[o,l])})})})}cell(e,n){const s=this.controller.valueController,i=s.cellControllers[n*s.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const s=n.bind(this);return this.emitter_.on(e,i=>{s(i.event)}),this}}class yh{constructor(e,n){this.size=n.size;const[s,i]=this.size,r=[];for(let o=0;o<i;o++)for(let l=0;l<s;l++){const a=new Kp(e,{props:pe.fromObject(Object.assign({},n.cellConfig(l,o))),viewProps:Ut.create()});r.push(a)}this.cellCs_=r,this.viewProps=Ut.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(o=>{o.viewProps.set("disposed",!0)})}),this.view=new Wp(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${s}, 1fr)`,this.cellCs_.forEach(o=>{this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}}class Vc extends li{constructor(e,n){const s=n.valueController,i=new hr(e,{blade:n.blade,props:n.labelProps,valueController:s});super({blade:n.blade,view:i.view,viewProps:s.viewProps}),this.valueController=s,this.labelController=i}}const fC=Ae({id:"buttongrid",type:"blade",accept(t){const e=Oe(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Vc(t.document,{blade:t.blade,labelProps:pe.fromObject({label:t.params.label}),valueController:new yh(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof Vc?new Ch(t.controller):null}});class xh extends Bn{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const s=n.bind(this);return this.controller.valueController.value.emitter.on(e,i=>{s(new cr(this,i.rawValue,i.options.last))}),this}}function ut(t,e,n){return t*(1-n)+e*n}const vC=20,bC=.001,Ir=100;function wC(t,e){let n=.25,s=.5,i=-1;for(let r=0;r<vC;r++){const[o,l]=t.curve(s);if(s+=n*(o<e?1:-1),i=l,n*=.5,Math.abs(e-o)<bC)break}return i}class mn{constructor(e=0,n=0,s=1,i=1){this.cache_=[],this.comps_=[e,n,s,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return Ve(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=ut(0,this.x1,e),s=ut(0,this.y1,e),i=ut(this.x1,this.x2,e),r=ut(this.y1,this.y2,e),o=ut(this.x2,1,e),l=ut(this.y2,1,e),a=ut(n,i,e),c=ut(s,r,e),p=ut(i,o,e),g=ut(r,l,e);return[ut(a,p,e),ut(c,g,e)]}y(e){if(this.cache_.length===0){const n=[];for(let s=0;s<Ir;s++)n.push(wC(this,ue(s,0,Ir-1,0,1)));this.cache_=n}return this.cache_[Math.round(ue($e(e,0,1),0,1,0,Ir-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const Gl={toComponents:t=>t.toObject(),fromComponents:t=>new mn(...t)};function _C(t){const e=ze(2);return`cubic-bezier(${t.toObject().map(s=>e(s)).join(", ")})`}const Sc=[0,.5,.5,1];function gC(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new mn(...Sc);const n=[e[1],e[2],e[3],e[4]].reduce((s,i)=>{if(!s)return null;const r=Number(i);return isNaN(r)?null:[...s,r]},[]);return new mn(...n??Sc)}const Cn=de("cbz");class Ph{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Cn()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,Cn(void 0,"expanded")),ft(n.foldable,"completed",fn(this.element,Cn(void 0,"cpl")));const s=e.createElement("div");s.classList.add(Cn("h")),this.element.appendChild(s);const i=e.createElement("button");i.classList.add(Cn("b")),n.viewProps.bindDisabled(i);const r=e.createElementNS(Be,"svg");r.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(r),s.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(Cn("t")),s.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const l=e.createElement("div");l.classList.add(Cn("p")),this.element.appendChild(l),this.pickerElement=l}else this.pickerElement=null}}const Kr=de("cbzp");class Eh{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Kr()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("div");s.classList.add(Kr("g")),this.element.appendChild(s),this.graphElement=s;const i=e.createElement("div");i.classList.add(Kr("t")),this.element.appendChild(i),this.textElement=i}}function kh(t,e){const n=new MutationObserver(i=>{for(const r of i)r.type==="childList"&&r.addedNodes.forEach(o=>{o.contains(o)&&(e(),n.disconnect())})}),s=t.ownerDocument;n.observe(s.body,{attributes:!0,childList:!0,subtree:!0})}const en=de("cbzg");function CC(t,e){return n=>e(t(n))}class Vh{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(en()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const s=e.createElement("div");s.classList.add(en("p")),this.element.appendChild(s),this.previewElement=s;const i=e.createElementNS(Be,"svg");i.classList.add(en("g")),this.element.appendChild(i),this.svgElem_=i;const r=e.createElementNS(Be,"path");r.classList.add(en("u")),this.svgElem_.appendChild(r),this.guideElem_=r;const o=e.createElementNS(Be,"polyline");o.classList.add(en("l")),this.svgElem_.appendChild(o),this.lineElem_=o,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(l=>{l.classList.add(en("h")),this.element.appendChild(l)}),this.vectorElems_=[e.createElementNS(Be,"line"),e.createElementNS(Be,"line")],this.vectorElems_.forEach(l=>{l.classList.add(en("v")),this.svgElem_.appendChild(l)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((l,a)=>{mt(this.sel_,CC(c=>c===a,fn(l,en("h","sel"))))}),kh(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const{clientWidth:s,clientHeight:i}=this.element,r=this.getVertMargin_(i);return{x:ue(e,0,1,0,s),y:ue(n,0,1,i-r,r)}}positionToValue(e,n){const s=this.element.getBoundingClientRect(),i=s.width,r=s.height,o=this.getVertMargin_(r);return{x:$e(ue(e,0,i,0,1),0,1),y:ue(n,r-o,o,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(r=>{const o=this.valueToPosition(0,r),l=this.valueToPosition(1,r);return[`M ${o.x},${o.y}`,`L ${l.x},${l.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let s=0;for(;;){const r=this.valueToPosition(...e.curve(s));if(n.push([r.x,r.y].join(",")),s>=1)break;s=Math.min(s+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const i=e.toObject();[0,1].forEach(r=>{const o=this.valueToPosition(r,r),l=this.valueToPosition(i[r*2],i[r*2+1]),a=this.vectorElems_[r];a.setAttributeNS(null,"x1",String(o.x)),a.setAttributeNS(null,"y1",String(o.y)),a.setAttributeNS(null,"x2",String(l.x)),a.setAttributeNS(null,"y2",String(l.y));const c=this.handleElems_[r];c.style.left=`${l.x}px`,c.style.top=`${l.y}px`})}onValueChange_(){this.refresh()}}const Mc=24,$c=400,Tc=1e3,Hn=de("cbzprv");class Sh{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Hn()),n.viewProps.bindClassModifiers(this.element);const s=e.createElementNS(Be,"svg");s.classList.add(Hn("g")),this.element.appendChild(s),this.svgElem_=s;const i=e.createElementNS(Be,"path");i.classList.add(Hn("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const r=e.createElement("div");r.classList.add(Hn("m")),this.element.appendChild(r),this.markerElem_=r,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),kh(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(Hn("m","a")),this.startTime_=new Date().getTime()+$c,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(Hn("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y($e(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const{clientWidth:e,clientHeight:n}=this.svgElem_,s=[],i=this.value_.rawValue;for(let r=0;r<Mc;r++){const o=ue(r,0,Mc-1,0,1),l=ue(i.y(o),0,1,0,e);s.push(`M ${l},0 v${n}`)}this.ticksElem_.setAttributeNS(null,"d",s.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/Tc;this.updateMarker_(n),e>Tc+$c&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function bo(t,e,n,s){const i=n-t,r=s-e;return Math.sqrt(i*i+r*r)}function yC(t,e,n,s){const i=bo(t,e,n,s),r=Math.atan2(s-e,n-t),o=Math.round(r/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(o)*i,y:e+Math.sin(o)*i}}class Mh{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=Le(0),this.viewProps=n.viewProps,this.view=new Vh(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new Sh(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",i=>{i.stopImmediatePropagation(),i.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const s=new Ht(this.view.element);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,s){const i=this.sel_.rawValue,r=this.value.rawValue.toObject(),o=this.view.positionToValue(e.x,e.y),l=n?yC(i,i,o.x,o.y):o;r[i*2]=l.x,r[i*2+1]=l.y,this.value.setRawValue(new mn(...r),s)}onPointerDown_(e){const n=e.data;if(!n.point)return;const s=this.value.rawValue,i=this.view.valueToPosition(s.x1,s.y1),r=bo(n.point.x,n.point.y,i.x,i.y),o=this.view.valueToPosition(s.x2,s.y2),l=bo(n.point.x,n.point.y,o.x,o.y);this.sel_.rawValue=r<=l?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){qi(e.key)&&e.preventDefault();const n=this.sel_.rawValue,s=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;s[n*2]+=je(i,yt(e)),s[n*2+1]+=je(i,Tn(e)),this.value.setRawValue(new mn(...s),{forceEmit:!1,last:!1})}onKeyUp_(e){qi(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,s=je(n,yt(e)),i=je(n,Tn(e));s===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class $h{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Eh(e,{viewProps:this.viewProps}),this.gc_=new Mh(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const s=Object.assign(Object.assign({},n.axis),{constraint:new vl({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new fs(e,{assembly:Gl,axes:[s,i,s,i],parser:Ct,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class wo{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ds.create(n.expanded),this.view=new Ph(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new vr(e,{parser:gC,props:pe.fromObject({formatter:_C}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new Al(e,{viewProps:this.viewProps}):null;const s=new $h(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});s.allFocusableElements.forEach(i=>{i.addEventListener("blur",this.onPopupChildBlur_),i.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),mt(this.popC_.shows,i=>{i&&s.refresh()}),Nn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:i=>i,backward:(i,r)=>r})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dr(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,s=Vl(e);s&&n.contains(s)||s&&s===this.view.buttonElement&&!ur(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function xC(){return new wr({assembly:Gl,components:[0,1,2,3].map(t=>t%2===0?new vl({min:0,max:1}):void 0)})}const PC=Ae({id:"cubicbezier",type:"blade",accept(t){const e=Oe(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(s=>s==="inline"||s==="popup"?s:void 0)}));return e?{params:e}:null},controller(t){var e,n;const s=new mn(...t.params.value),i=Le(s,{constraint:xC(),equals:mn.equals}),r=new wo(t.document,{axis:{textProps:pe.fromObject({keyScale:.1,pointerScale:.01,formatter:ze(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps});return new Ki(t.document,{blade:t.blade,props:pe.fromObject({label:t.params.label}),value:i,valueController:r})},api(t){return!(t.controller instanceof Ki)||!(t.controller.valueController instanceof wo)?null:new xh(t.controller)}});class Th extends Bn{get fps(){return this.controller.valueController.fps}get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}on(e,n){const s=n.bind(this);return this.controller.valueController.ticker.emitter.on(e,()=>{s(new jn(this))}),this}}const Lc=20;class Lh{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=Lc)return;const e=this.timestamps_.length-Lc;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(s=>{s.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const ks=de("fps");class Oh{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ks()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(ks("g")),this.element.appendChild(this.graphElement);const s=e.createElement("div");s.classList.add(ks("l")),this.element.appendChild(s);const i=e.createElement("span");i.classList.add(ks("v")),i.textContent="--",s.appendChild(i),this.valueElement=i;const r=e.createElement("span");r.classList.add(ks("u")),r.textContent="FPS",s.appendChild(r)}}class Ah{constructor(e,n){this.stopwatch_=new Lh,this.onTick_=this.onTick_.bind(this),this.ticker=n.ticker,this.ticker.emitter.on("tick",this.onTick_),this.props=n.props,this.value_=n.value,this.viewProps=n.viewProps,this.view=new Oh(e,{viewProps:this.viewProps}),this.graphC_=new Hl(e,{formatter:ze(0),props:this.props,rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker.dispose()})}get fps(){return this.stopwatch_.fps}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=R_(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class Oc extends li{constructor(e,n){const s=n.valueController,i=new hr(e,{blade:n.blade,props:n.labelProps,valueController:s});super({blade:n.blade,view:i.view,viewProps:s.viewProps}),this.valueController=s,this.labelController=i}}function EC(t,e){return e===0?new ag:new cg(t,e??ui.monitor.defaultInterval)}const kC=Ae({id:"fpsgraph",type:"blade",accept(t){const e=Oe(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,s,i;const r=(e=t.params.interval)!==null&&e!==void 0?e:500;return new Oc(t.document,{blade:t.blade,labelProps:pe.fromObject({label:t.params.label}),valueController:new Ah(t.document,{props:pe.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:90,min:(s=t.params.min)!==null&&s!==void 0?s:0}),rows:(i=t.params.rows)!==null&&i!==void 0?i:2,ticker:EC(t.document,r),value:Le(O_(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof Oc?new Th(t.controller):null}});class rt{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,s=e.max;return!(typeof n!="number"||typeof s!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const Wl={fromComponents:t=>new rt(t[0],t[1]),toComponents:t=>[t.min,t.max]};class Yl{constructor(e){this.edge=e}constrain(e){var n,s,i,r,o,l,a,c;if(e.min<=e.max)return new rt((s=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&s!==void 0?s:e.min,(r=(i=this.edge)===null||i===void 0?void 0:i.constrain(e.max))!==null&&r!==void 0?r:e.max);const p=(e.min+e.max)/2;return new rt((l=(o=this.edge)===null||o===void 0?void 0:o.constrain(p))!==null&&l!==void 0?l:p,(c=(a=this.edge)===null||a===void 0?void 0:a.constrain(p))!==null&&c!==void 0?c:p)}}const Ur=de("rsltxt");class Rh{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(Ur());const s=e.createElement("div");s.classList.add(Ur("s")),s.appendChild(this.sliderView_.element),this.element.appendChild(s);const i=e.createElement("div");i.classList.add(Ur("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const yn=de("rsl");class Dh{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(yn()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const s=e.createElement("div");s.classList.add(yn("t")),this.element.appendChild(s),this.trackElement=s;const i=e.createElement("div");i.classList.add(yn("b")),s.appendChild(i),this.barElement=i;const r=["min","max"].map(o=>{const l=e.createElement("div");return l.classList.add(yn("k"),yn("k",o)),s.appendChild(l),l});this.knobElements=[r[0],r[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),s=this.sliderProps_.get("max");return $e(ue(e,n,s,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(yn(void 0,"zero")):this.element.classList.remove(yn(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((s,i)=>{s.style.left=`${n[i]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class Fh{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new Dh(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const s=new Ht(this.view.trackElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,s=this.sliderProps.get("min"),i=this.sliderProps.get("max");return ue(n,0,1,s,i)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,s=this.value.rawValue,i=this.sliderProps.get("min"),r=this.sliderProps.get("max"),o=ue(s.min,i,r,0,1),l=ue(s.max,i,r,0,1);Math.abs(l-n)<=.025?this.grabbing_="max":Math.abs(o-n)<=.025?this.grabbing_="min":n>=o&&n<=l?(this.grabbing_="length",this.grabOffset_=ue(n-o,0,1,0,r-i)):n<o?(this.grabbing_="min",this.onPointerMove_(e)):n>l&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const s=this.valueFromData_(e);if(s===null)return;const i=this.sliderProps.get("min"),r=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new rt(s,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new rt(this.value.rawValue.min,s),n);else if(this.grabbing_==="length"){const o=this.value.rawValue.length;let l=s-this.grabOffset_,a=l+o;l<i?(l=i,a=i+o):a>r&&(l=r-o,a=r),this.value.setRawValue(new rt(l,a),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class Bh{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new Fh(e,n);const s={constraint:n.constraint,textProps:n.textProps};this.tc_=new fs(e,{assembly:Wl,axes:[s,s],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new Rh(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function VC(t){return rt.isObject(t)?new rt(t.min,t.max):new rt(0,0)}function SC(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function MC(t){const e=[],n=Cl(t);n&&e.push(n);const s=gl(t);return s&&e.push(s),new Yl(new ms(e))}const $C=Ae({id:"input-interval",type:"input",accept:(t,e)=>{if(!rt.isObject(t))return null;const n=Oe(e,s=>Object.assign(Object.assign({},xl(s)),{readonly:s.optional.constant(!1)}));return n?{initialValue:new rt(t.min,t.max),params:n}:null},binding:{reader:t=>VC,constraint:t=>MC(t.params),equals:rt.equals,writer:t=>SC},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof Yl))throw We.shouldNeverHappen();const s=(e.rawValue.min+e.rawValue.max)/2,i=pe.fromObject(yl(t.params,s)),r=n.edge&&Ws(n.edge,oi);if(r)return new Bh(t.document,{constraint:n.edge,parser:Ct,sliderProps:new pe({keyScale:i.value("keyScale"),max:r.values.value("max"),min:r.values.value("min")}),textProps:i,value:e,viewProps:t.viewProps});const o={constraint:n.edge,textProps:i};return new fs(t.document,{assembly:Wl,axes:[o,o],parser:Ct,value:e,viewProps:t.viewProps})}});class jh{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class Nh extends cr{constructor(e,n,s,i,r){super(e,i,r),this.cell=n,this.index=s}}class zh extends Bn{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(s=>{const i=new jh(s);this.cellToApiMap_.set(s,i)})}get value(){return this.controller.value}cell(e,n){const s=this.controller.valueController,i=s.cellControllers[n*s.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const s=n.bind(this);this.controller.value.emitter.on(e,i=>{const r=this.controller.valueController,o=r.findCellByValue(i.rawValue);if(!o)return;const l=this.cellToApiMap_.get(o);if(!l)return;const a=r.cellControllers.indexOf(o);s(new Nh(this,l,[a%r.size[0],Math.floor(a/r.size[0])],i.rawValue))})}}const Vs=de("rad");class Ih{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Vs()),n.viewProps.bindClassModifiers(this.element);const s=e.createElement("label");s.classList.add(Vs("l")),this.element.appendChild(s);const i=e.createElement("input");i.classList.add(Vs("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),s.appendChild(i),this.inputElement=i;const r=e.createElement("div");r.classList.add(Vs("b")),s.appendChild(r);const o=e.createElement("div");o.classList.add(Vs("t")),r.appendChild(o),ft(n.props,"title",l=>{o.textContent=l})}}class Kh{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new Ih(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class Hi{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[s,i]=this.size;for(let r=0;r<i;r++)for(let o=0;o<s;o++){const l=new Kh(e,{name:n.groupName,props:pe.fromObject(Object.assign({},n.cellConfig(o,r))),viewProps:Ut.create()});this.cellCs_.push(l),this.cellValues_.push(n.cellConfig(o,r).value)}this.value=n.value,mt(this.value,r=>{const o=this.findCellByValue(r);o&&(o.view.inputElement.checked=!0)}),this.viewProps=Ut.create(),this.view=new Wp(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${s}, 1fr)`,this.cellCs_.forEach(r=>{r.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(r.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(s=>s===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,s=this.cellCs_.findIndex(i=>i.view.inputElement===n);s<0||(this.value.rawValue=this.cellValues_[s])}}const TC=function(){return Ae({id:"radiogrid",type:"blade",accept(t){const e=Oe(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=Le(t.params.value);return new Ki(t.document,{blade:t.blade,props:pe.fromObject({label:t.params.label}),value:e,valueController:new Hi(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof Ki)||!(t.controller.valueController instanceof Hi)?null:new zh(t.controller)}})}();function Xl(t){return Ae({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const s=Oe(n,i=>({cells:i.required.function,groupName:i.required.string,size:i.required.array(i.required.number),view:i.required.constant("radiogrid")}));return s?{initialValue:e,params:s}:null},binding:t.binding,controller:e=>new Hi(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const LC=Xl({isType:t=>typeof t=="number",binding:{reader:t=>_l,writer:t=>vn}}),OC=Xl({isType:t=>typeof t=="string",binding:{reader:t=>Dl,writer:t=>vn}}),AC=Xl({isType:t=>typeof t=="boolean",binding:{reader:t=>Rl,writer:t=>vn}}),RC="essentials",DC='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',FC=[fC,PC,kC,$C,TC,AC,LC,OC],BC=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:gh,ButtonGridApi:Ch,ButtonGridController:yh,CubicBezier:mn,CubicBezierApi:xh,CubicBezierAssembly:Gl,CubicBezierController:wo,CubicBezierGraphController:Mh,CubicBezierGraphView:Vh,CubicBezierPickerController:$h,CubicBezierPickerView:Eh,CubicBezierPreviewView:Sh,CubicBezierView:Ph,FpsGraphBladeApi:Th,FpsGraphController:Ah,FpsView:Oh,Fpswatch:Lh,Interval:rt,IntervalAssembly:Wl,IntervalConstraint:Yl,RadioCellApi:jh,RadioController:Kh,RadioGridApi:zh,RadioGridController:Hi,RadioView:Ih,RangeSliderController:Fh,RangeSliderTextController:Bh,RangeSliderTextView:Rh,RangeSliderView:Dh,TpRadioGridChangeEvent:Nh,css:DC,id:RC,plugins:FC},Symbol.toStringTag,{value:"Module"}));/*!
* v-tweakpane v0.3.2
* (c) 2024 Vinayak Kulkarni
* @license MIT
*/const jC={class:"w-full h-full"},NC=Oo({__name:"VTweakpane",props:{pane:{}},emits:["on-pane-created"],setup(t,{emit:e}){const n=t,s=e,i=Yr(null),r=Yr(null);return Ao(()=>{iu(()=>{i.value instanceof Element&&(r.value=new Fw({container:i.value,title:n.pane.title,expanded:n.pane.expanded}),r.value.registerPlugin(BC),s("on-pane-created",r.value))})}),(o,l)=>(Fo(),Bo("main",jC,[jo("div",{ref_key:"el",ref:i},null,512)]))}}),zC=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},IC=zC(NC,[["__scopeId","data-v-29b6d810"]]),k={radius:Math.PI*2,display:{styles:["Still","StraightLine","Rise","Bounce","Speed","Drop","Crazy","Confetti","Throw","TheCube"],kappa:{styles:{Burst:{},Fireworks:{},Spiral:{},Pyramid:{},SmallPyramid:{},Fountain:{},Stampede:{},Confetti:{},Conga:{},TheCube:{size:8/10,center:!0,speed:5,faces:!1},Text:{message:["HYPE!"],time:3}},conga:{time:5}}},emote:{time:5,max:0,queue:0,size:{ratio:{normal:1/12,small:1/24},min:16,max:256},cube:{speed:5},animation:{fade:{in:8,out:8},zoom:{in:17,out:8}},in:{fade:!0,zoom:!0},out:{fade:!0,zoom:!0}}},D={display:{Still:{time:1},StraightLine:{time:1},Rise:{origin:{min:.8,max:1.1},time:1,wiggle:{delay:{min:0,max:3/25},min:2/5,max:1}},Bounce:{origin:{min:0,max:.2},time:1,velocity:{h:{min:3,max:9},v:{min:4,max:7},loss:.3},gravity:1},Speed:{origin:{min:.3,max:.7},time:1,delay:.1},Drop:{time:1},Crazy:{time:1,distance:7e3,squash:{width:2,height:.7,time:1/50}},Confetti:{time:1},Throw:{time:1,twist:7/50,toss:1/5,drop:4/5,dest:{h:{min:.3,max:.7},v:{min:.3,max:.7}}},TheCube:{time:1},Fountain:{time:1/2}},kappa:{Rise:{time:2},Speed:{time:2},Crazy:{time:2},Burst:{time:1.5,top:{min:1/4,max:3/4},left:{min:1/4,max:3/4}},Fireworks:{time:1,origin:{x:[1/2],y:[1]},dest:{x:[1/4,1/2,3/4],y:[1/3]},speed:{rocket:2/5,burst:1/50},quantity:{small:1/8,medium:3/4,large:1/8},radius:{base:2/3,small:1/3,medium:2/3,large:1},spread:12,delays:{small:2/25,large:1/10}},Spiral:{time:1/2,bulk:8,vectors:{min:40,max:60}},Pyramid:{time:1,show:{total:.8,min:75},pause:.2,hide:.01},SmallPyramid:{time:1,show:{total:.8,min:100},pause:.2,hide:.01},Fountain:{time:1.5,top:{min:3/20,max:2/5},left:{min:1/3,max:2/3}},Stampede:{time:1,speed:2/5,maxdensity:6,top:{min:.5,max:.5},height:3,bunch:{1:{min:1,max:5},2:8,4:{min:0,max:3}},pause:{1:4/5,2:2/5},smallSleep:{min:90,max:100}},Confetti:{time:1},Conga:{time:{show:2,hide:2},size:5/3,height:5/6,avoidMiddle:6},TheCube:{time:1},Text:{time:1,show:{total:.8,min:75},hide:.01}}},KC="https://cdn.7tv.app/emote/6548b7074789656a7be787e1/4x.webp",tn=[1,2,3,4,5,6,7,8,9,10,9,8,7,6,5,4,3,2,1],_i={A:[[0,1,1,1,1,1,0,0,0],[0,0,0,0,1,0,1,0,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,1,0,0],[0,1,1,1,1,1,0,0,0]],a:[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0],[0,1,0,0,0,0,0,0,0]],B:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,1,1,0,0]],b:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,0,0]],C:[[0,0,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,0,0,0,1,0,0]],c:[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0]],D:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,0,0]],d:[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,1,1,1,1,1,1,0]],E:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,0,0,0,1,0]],e:[[0,0,1,1,1,0,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,0,0,0,1,0,0,0,0]],F:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,0,0,0,1,0]],f:[[0,0,0,0,1,0,0,0,0],[0,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,1,0,0]],G:[[0,0,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,1,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,1,0,1,0,0]],g:[[1,0,0,1,1,0,0,0,0],[1,0,1,0,0,1,0,0,0],[1,0,1,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0]],H:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,1,1,1,1,1,1,1,0]],h:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,1,1,1,0,0,0,0,0]],I:[[0,1,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,1,0]],i:[[0,1,0,0,1,0,0,0,0],[0,1,1,1,1,0,1,0,0],[0,1,0,0,0,0,0,0,0]],J:[[0,0,1,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,1,0]],j:[[1,0,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0,0],[0,1,1,1,1,0,1,0,0]],K:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,0,0],[0,0,0,1,0,1,0,0,0],[0,0,1,0,0,0,1,0,0],[0,1,0,0,0,0,0,1,0]],k:[[0,1,1,1,1,1,1,1,0],[0,0,0,1,0,0,0,0,0],[0,0,1,0,1,0,0,0,0],[0,1,0,0,0,1,0,0,0]],L:[[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0]],l:[[0,1,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0]],M:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,0]],m:[[0,1,1,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0],[0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0]],N:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,1,0,0],[0,0,0,1,1,1,0,0,0],[0,0,1,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0]],n:[[0,1,1,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0]],O:[[0,0,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,0,0]],o:[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,0,0]],P:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,0,1,1,0,0]],p:[[1,1,1,1,1,0,0,0,0],[0,0,1,0,0,1,0,0,0],[0,0,1,0,0,1,0,0,0],[0,0,0,1,1,0,0,0,0]],Q:[[0,0,1,1,1,1,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0],[0,0,1,0,0,0,0,1,0],[1,1,0,1,1,1,1,0,0]],q:[[0,0,0,1,1,0,0,0,0],[0,0,1,0,0,1,0,0,0],[0,0,1,0,0,1,0,0,0],[1,1,1,1,1,0,0,0,0]],R:[[0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,1,1,0,0,1,0],[0,0,1,0,1,0,0,1,0],[0,1,0,0,0,1,1,0,0]],r:[[0,1,1,1,1,1,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0,0]],S:[[0,0,1,0,0,1,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,0,1,0,0]],s:[[0,1,0,0,1,0,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,0,1,0,0,1,0,0,0]],T:[[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0]],t:[[0,0,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0,0],[0,0,1,1,1,1,1,1,0],[0,1,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0,0]],U:[[0,0,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,0]],u:[[0,0,1,1,1,1,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,1,1,1,1,0,0,0]],V:[[0,0,0,0,1,1,1,1,0],[0,0,1,1,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0],[0,0,0,0,1,1,1,1,0]],v:[[0,0,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0],[0,0,0,0,1,1,0,0,0]],W:[[0,0,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,0]],w:[[0,0,1,1,1,1,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0,0]],X:[[0,1,1,0,0,0,1,1,0],[0,0,0,1,0,1,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,1,0,1,0,0,0],[0,1,1,0,0,0,1,1,0]],x:[[0,1,0,0,0,1,0,0,0],[0,0,1,0,1,0,0,0,0],[0,0,0,1,0,0,0,0,0],[0,0,1,0,1,0,0,0,0],[0,1,0,0,0,1,0,0,0]],Y:[[0,0,0,0,0,0,1,1,0],[0,0,0,0,1,1,0,0,0],[0,1,1,1,0,0,0,0,0],[0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,1,1,0]],y:[[1,0,0,1,1,1,0,0,0],[1,0,1,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,0],[0,1,1,1,1,1,0,0,0]],Z:[[0,1,1,0,0,0,0,1,0],[0,1,0,1,0,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,0,1,0,1,0],[0,1,0,0,0,0,1,1,0]],z:[[0,1,0,0,0,1,0,0,0],[0,1,1,0,0,1,0,0,0],[0,1,0,1,0,1,0,0,0],[0,1,0,0,1,1,0,0,0],[0,1,0,0,0,1,0,0,0]],1:[[0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0]],2:[[0,1,1,0,0,0,1,0,0],[0,1,0,1,0,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,0,1,0,1,0],[0,1,0,0,0,0,1,0,0]],3:[[0,0,1,0,0,0,1,0,0],[0,1,0,0,0,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,1,1,0,0]],4:[[0,0,0,1,1,0,0,0,0],[0,0,0,1,0,1,1,1,0],[0,0,0,1,0,0,0,0,0],[0,1,1,1,1,1,1,1,0],[0,0,0,1,0,0,0,0,0]],5:[[0,0,1,0,0,1,1,1,0],[0,1,0,0,0,1,0,1,0],[0,1,0,0,0,1,0,1,0],[0,0,1,1,1,0,0,1,0]],6:[[0,0,1,1,1,1,0,0,0],[0,1,0,0,1,0,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,0,0,0,0]],7:[[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0],[0,1,1,1,0,0,0,1,0],[0,0,0,0,1,1,0,1,0],[0,0,0,0,0,0,1,1,0]],8:[[0,0,1,1,0,1,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,1,1,0,0]],9:[[0,0,0,0,0,1,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,0,1,0,1,0,0,1,0],[0,0,0,1,1,1,1,0,0]],0:[[0,0,1,1,1,1,1,0,0],[0,1,1,0,0,0,0,1,0],[0,1,0,1,1,1,0,1,0],[0,1,0,0,0,0,1,1,0],[0,0,1,1,1,1,1,0,0]],">":[[0,1,0,0,0,0,0,1,0],[0,0,1,0,0,0,1,0,0],[0,0,0,1,0,1,0,0,0],[0,0,0,0,1,0,0,0,0]],"<":[[0,0,0,0,1,0,0,0,0],[0,0,0,1,0,1,0,0,0],[0,0,1,0,0,0,1,0,0],[0,1,0,0,0,0,0,1,0]],":":[[0,0,1,0,0,1,0,0,0]],".":[[0,1,0,0,0,0,0,0,0]],",":[[1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0]],"'":[[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,1]],"-":[[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0]],_:[[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0]],"+":[[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0]],"=":[[0,0,0,1,0,1,0,0,0],[0,0,0,1,0,1,0,0,0],[0,0,0,1,0,1,0,0,0]],"!":[[0,0,0,0,0,1,1,0,0],[0,1,0,1,1,1,1,1,0],[0,0,0,0,0,1,1,0,0]],"@":[[0,0,1,1,1,1,1,0,0],[0,1,0,0,1,0,0,1,0],[0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0],[0,1,0,0,1,1,1,0,0]],"#":[[0,0,0,0,1,0,1,0,0],[0,0,0,1,1,1,1,1,0],[0,0,0,0,1,0,1,0,0],[0,0,0,1,1,1,1,1,0],[0,0,0,0,1,0,1,0,0]],$:[[0,0,1,0,0,1,1,0,0],[0,1,0,0,1,0,0,1,0],[1,1,1,1,1,1,1,1,1],[0,1,0,0,1,0,0,1,0],[0,0,1,1,0,0,1,0,0]],"¢":[[0,0,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0],[1,1,1,1,1,1,1,0,0],[0,1,0,0,0,1,0,0,0]],"€":[[0,0,0,1,0,1,0,0,0],[0,0,1,1,1,1,1,0,0],[0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0],[0,1,0,0,0,0,0,1,0]],"£":[[0,1,0,0,1,0,1,0,0],[0,1,1,1,1,1,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,1,0,0,1,0],[0,1,0,0,0,0,1,0,0]],"¥":[[0,0,0,0,1,0,1,1,0],[0,0,1,0,1,1,0,0,0],[0,1,1,1,1,0,0,0,0],[0,0,1,0,1,1,0,0,0],[0,0,0,0,1,0,1,1,0]],"%":[[0,1,0,0,0,0,1,1,0],[0,0,1,1,0,0,1,1,0],[0,0,0,0,1,0,0,0,0],[0,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,0,1,0]],"?":[[0,0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,1,0],[0,1,0,1,1,0,0,1,0],[0,0,0,0,1,0,0,1,0],[0,0,0,0,0,1,1,0,0]]},m=function(){const t=["__proto__","constructor","prototype"];function e(V){if(typeof V=="object"&&V!==null){if(typeof Object.getPrototypeOf=="function"){const f=Object.getPrototypeOf(V);return f===Object.prototype||f===null}return Object.prototype.toString.call(V)==="[object Object]"}return!1}function n(...V){return V.reduce((f,j)=>(Object.keys(j).forEach(K=>{t.includes(K)||(Array.isArray(f[K])&&Array.isArray(j[K])?f[K]=j[K]:e(f[K])&&e(j[K])?f[K]=n(f[K],j[K]):f[K]=j[K])}),f),{})}function s(V=1){return new Promise(function(f){if(V<1){f(!1);return}let j=0;function K(){if(j++,j<V){requestAnimationFrame(K);return}f(!0)}requestAnimationFrame(K)})}function i(V,f=!1){f===!1&&(f=Math.floor(k.emote.time*1e3));const K=Math.floor(f/m.msPerFrame.value)/V;return K>1?{f:Math.ceil(K),ct:1}:{f:1,ct:Math.ceil(1/K)}}function r(V){return V<m.msPerFrame.value?s():new Promise(f=>{let j=0;function K(re){if(j===0){j=re,requestAnimationFrame(K);return}else if(re-j<V){requestAnimationFrame(K);return}f(!0)}requestAnimationFrame(K)})}function o(V,f,j,K,re,ie,le,be){const ee=Math.floor(V+K*Math.cos(j)),ae=Math.floor(f+K*Math.sin(j)),se=Math.tan(j);let $=Number.MAX_SAFE_INTEGER,S=0,P=Number.MAX_SAFE_INTEGER,x=0;if(ee<re?$=V-(S=re):ee>le&&($=(S=le)-V),ae<ie?P=f-(x=ie):ae>be&&(P=(x=be)-f),x===0&&S===0)return!0;let d=x,b=S;return $>P?b=Math.floor((d-f)/se+V):d=Math.floor((b-V)*se+f),Math.sqrt(Math.abs(V-b)**2+Math.abs(f-d)**2)>Math.ceil(K/2)}function l(V,f){V.alt="",V.onload=function(){V.onerror=null,V.onload=null},V.onerror=function(){V.onerror=null,V.onload=null,V.src=KC},V.src=f}function a(V,f,j,K,re,ie){let le="";return V.length>0&&(le+=" animation-name: "+V.join()+";",le+=" animation-delay: "+f.join()+";",le+=" animation-duration: "+j.join()+";",le+=" animation-timing-function: "+K.join()+";",le+=" animation-fill-mode: "+re.join()+";",le+=" animation-iteration-count: "+ie.join()+";"),V.includes("fadeIn")&&(le+=" opacity: 0;"),le}function c(V,f,j,K,re,ie,le=!0,be=!0,ee=!0,ae=!0,se=!1){se===!1&&(se=Math.floor(k.emote.time*1e3));const $=k.emote.animation.fade.in/100,S=k.emote.animation.fade.out/100,P=k.emote.animation.zoom.in/100,x=k.emote.animation.zoom.out/100;return le&&(V.push("fadeIn"),f.push("0s"),j.push(Math.floor(se*$)+"ms"),K.push("ease-in"),re.push("forwards"),ie.push("1")),be&&(V.push("zoomIn"),f.push("0s"),j.push(Math.floor(se*P)+"ms"),K.push("linear"),re.push("forwards"),ie.push("1")),ee?(V.push("fadeOut"),f.push(Math.floor(se-se*S)+"ms"),j.push(Math.floor(se*S)+"ms"),K.push("ease-out"),re.push("forwards"),ie.push("1")):(V.push("noFadeOut"),f.push(se-50+"ms"),j.push("50ms"),K.push("ease-out"),re.push("forwards"),ie.push("1")),ae&&(V.push("zoomOut"),f.push(Math.floor(se-se*x)+"ms"),j.push(Math.floor(se*x)+"ms"),K.push("linear"),re.push("forwards"),ie.push("1")),a(V,f,j,K,re,ie)}function p(V){const f=new Uint32Array(1);crypto.getRandomValues(f);const j=f[0]/4294967295;return V===void 0?j:V<1?j*V:Math.floor(j*V)}function g(V){return m.random(V.max-V.min)+V.min}function X(V){const f=[];for(let re=1,ie=arguments.length;re<ie;re++)f.push(arguments[re]);let j=!1;function K(){if(j===!1){j=!0,requestAnimationFrame(K);return}V(...f)}requestAnimationFrame(K)}const J=function(){let V,f=0;const j=[];function K(){J.value===0&&requestAnimationFrame(ie)}function re(){V!==void 0&&(cancelAnimationFrame(V),V=void 0)}function ie(le){if(f!==0&&j.push(le-f),j.length>2&&(J.value=j.reduce((be,ee)=>be+ee)/j.length),j.length>300){J.value=Math.round(J.value*1e3)/1e3;return}f=le,V=requestAnimationFrame(ie)}return{start:K,stop:re,value:0}}();return{deepMerge:n,framePause:s,countEstimatedTime:i,sleep:r,safePoints:o,setImgSrc:l,styleEmote:c,styleEmoteString:a,random:p,randomFromRange:g,doNextFrame:X,msPerFrame:J}}();function UC(t){let e=0,n=0;const s=function(){const c={};let p=!1;function g(){if(p===!1)return;clearTimeout(p),p=!1;let J=!0;const V=new Date().getTime();for(const f in c){if(!c.hasOwnProperty(f))continue;J=!1;const j=c[f].img,K=c[f].end,re=c[f].dec;if(c[f].space){const ie=j.getBoundingClientRect();if(K>V&&ie.bottom>0&&ie.right>0&&ie.top<innerHeight&&ie.left<innerWidth)continue}else if(K>V)continue;delete c[f],j.parentNode!==null&&t.removeChild(j),re===!0?e--:re!==!1&&!isNaN(re)&&(e-=re)}J||(p=setTimeout(g,500))}function X(J,V=!0,f=!0,j=!1){j===!1&&(j=Math.floor(k.emote.time*1e3));let K=0;do K++;while(c.hasOwnProperty(K));c[K]={img:J,space:V,dec:f,end:new Date().getTime()+j},p===!1&&(p=setTimeout(g,500))}return{hook:X}}(),i=function(){const c=[];let p=!1;const g=function(){function V($,S,P,x,d=0){if(d===0&&(d=new Date().getTime()),n>d)return;let b=x;$.width!==void 0&&$.height!==void 0&&(b=$.width/$.height*x);const v=m.random(S-b);let w="top: "+m.random(P-x)+"px;";w+=" left: "+v+"px;",w+=" --emote-height: "+x+"px;",w+=" --emote-width: "+b+"px;";const E=Math.floor(k.emote.time*1e3*D.display.Still.time);if(w+=m.styleEmote([],[],[],[],[],[],k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,E),o(d,$.url,{style:w},!1,{space:!1,time:E}),$.hasOwnProperty("zwe"))for(let M=0,C=$.zwe.length;M<C;M++)o(d,$.zwe[M].url,{style:w},!1,{space:!1,time:E})}function f($,S,P,x,d=!1,b=!1,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;let y=x;$.width!==void 0&&$.height!==void 0&&(y=$.width/$.height*x);const w=Math.ceil(x/2),E=Math.ceil(y/2);let M=d;M===!1&&(M=m.random(S)-E);let C=b;C===!1&&(C=m.random(P)-w);const A=Math.min(S,P)*(m.random()+1);let L=m.random()*k.radius;if(!d&&!b){const G=x*-1,q=y*-1;for(;!m.safePoints(M,C,L,A,q,G,S,P);)L=m.random()*k.radius}const R=Math.floor(M+A*Math.cos(L)),N=Math.floor(C+A*Math.sin(L));let B="--emote-height: "+x+"px;";B+=" --emote-width: "+y+"px;";const F=Math.floor(k.emote.time*1e3*D.display.StraightLine.time);if(B+=" transform: translate("+M+"px, "+C+"px);",B+=m.styleEmote([],[],[],[],[],[],k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,F),o(v,$.url,{style:B,classes:["etStraightLine"]},!1,{time:F},{x:R,y:N}),$.hasOwnProperty("zwe"))for(let G=0,q=$.zwe.length;G<q;G++)o(v,$.zwe[G].url,{style:B,classes:["etStraightLine"]},!1,{time:F},{x:R,y:N})}function j($,S,P,x,d=0){if(d===0&&(d=new Date().getTime()),n>d)return;let b=x;$.width!==void 0&&$.height!==void 0&&(b=$.width/$.height*x);const v=Math.ceil(b/2),y=m.random(S)-v,w=Math.floor(P*m.randomFromRange(D.display.Rise.origin));let E="left: "+y+"px;";E+=" --emote-height: "+x+"px;",E+=" --emote-width: "+b+"px;",k.emote.out.fade||k.emote.out.zoom?E+=' offset-path: path("M 0 '+w+" L 0 "+Math.floor(w*.05)+'") ;':E+=' offset-path: path("M 0 '+w+" L 0 -"+x+'") ;';const M=[],C=[],A=[],L=[],R=[],N=[];m.random(2)===0?M.push("wiggleL"):M.push("wiggleR");const B=Math.floor(k.emote.time*1e3*D.display.Rise.time),F=Math.floor(B*m.randomFromRange(D.display.Rise.wiggle.delay));C.push(F+"ms");const G=Math.floor(B*m.randomFromRange(D.display.Rise.wiggle));if(A.push(G+"ms"),L.push("ease-in-out"),R.push("both"),N.push("infinite"),M.push("offsetPath"),C.push("0s"),A.push(B+"ms"),L.push("linear"),R.push("forwards"),N.push("1"),E+=m.styleEmote(M,C,A,L,R,N,k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,B),o(d,$.url,{style:E},!1,{space:!1,time:B}),$.hasOwnProperty("zwe"))for(let q=0,ne=$.zwe.length;q<ne;q++)o(d,$.zwe[q].url,{style:E},!1,{space:!1,time:B})}const K=function(){function $(P,x,d,b,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;let y=b;P.width!==void 0&&P.height!==void 0&&(y=P.width/P.height*b);const w=Math.ceil(y/2),E=Math.ceil(x/2),M=Math.floor(m.random(x)-w),C=Math.floor(d*m.randomFromRange(D.display.Bounce.origin)),A=Math.floor(k.emote.time*1e3*D.display.Bounce.time),L=A/300/(16+2/3);let R=m.randomFromRange(D.display.Bounce.velocity.h);const N=m.randomFromRange(D.display.Bounce.velocity.v);M+w>E&&(R=-1*R);let B="--emote-height: "+b+"px;";B+=" --emote-width: "+y+"px;",B+=m.styleEmote([],[],[],[],[],[],k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,A),B+=" transform: translate("+M+"px, "+C+"px);";const F=M,G=C,q=[];if(q.push(o(v,P.url,{style:B},!0,{time:A})),P.hasOwnProperty("zwe"))for(let ne=0,Z=P.zwe.length;ne<Z;ne++)q.push(o(v,P.zwe[ne].url,{style:B},!0,{time:A}));requestAnimationFrame(function(ne){S(v,q,F,G,R,N,L,d,b,ne,ne)})}function S(P,x,d,b,v,y,w,E,M,C,A){if(n>P||x[0].parentElement===null)return;let L=1;C===0||(L=Math.max(1,Math.floor((A-C)/16))),C=A;for(let R=0;R<L;R++){d+=v/w,b+=y/w,y+=D.display.Bounce.gravity/w;const N=E-M;b>=N&&(b=N,y*=-1*(1-D.display.Bounce.velocity.loss),y=Math.floor(y))}for(let R=0,N=x.length;R<N;R++)x[R].style.transform="translate("+d+"px, "+b+"px)";requestAnimationFrame(function(R){S(P,x,d,b,v,y,w,E,M,C,R)})}return $}();function re($,S,P,x,d=0){if(d===0&&(d=new Date().getTime()),n>d)return;let b=x;$.width!==void 0&&$.height!==void 0&&(b=$.width/$.height*x);const v=Math.ceil(b/2),y=Math.ceil(S/2),w=m.random(S)-v;let M="top: "+Math.floor(P*m.randomFromRange(D.display.Speed.origin))+"px;";M+=" left: "+w+"px;",M+=" --emote-height: "+x+"px;",M+=" --emote-width: "+b+"px;";const C=[],A=[],L=[],R=[],N=[],B=[],F={};w+v>y?(F.origin="right",C.push("speedL")):(F.origin="left",C.push("speedR"));const G=Math.floor(k.emote.time*1e3*D.display.Speed.time),q=Math.floor(G*D.display.Speed.delay);if(A.push(q+"ms"),L.push(G-q+"ms"),R.push("ease-in"),N.push("forwards"),B.push("1"),M+=m.styleEmote(C,A,L,R,N,B,k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,G),o(d,$.url,{style:M,dataset:F},!1,{time:G}),$.hasOwnProperty("zwe"))for(let ne=0,Z=$.zwe.length;ne<Z;ne++)o(d,$.zwe[ne].url,{style:M,dataset:F},!1,{time:G})}function ie($,S,P,x,d=0){if(d===0&&(d=new Date().getTime()),n>d)return;let b=x;$.width!==void 0&&$.height!==void 0&&(b=$.width/$.height*x);const v=Math.ceil(b/2);let w="left: "+(m.random(S)-v)+"px;";w+=" --emote-height: "+x+"px;",w+=" --emote-width: "+b+"px;";const E=[],M=[],C=[],A=[],L=[],R=[],N={};m.random(2)===0?(N.origin="topleft",E.push("dropL")):(N.origin="topright",E.push("dropR")),M.push("0s");const B=Math.floor(k.emote.time*1e3*D.display.Drop.time);if(C.push(B+"ms"),A.push("ease-in"),L.push("forwards"),R.push("1"),w+=m.styleEmote(E,M,C,A,L,R,!1,!1,k.emote.out.fade,k.emote.out.zoom,B),o(d,$.url,{style:w,dataset:N},!1,{space:!1,time:B}),$.hasOwnProperty("zwe"))for(let F=0,G=$.zwe.length;F<G;F++)o(d,$.zwe[F].url,{style:w,dataset:N},!1,{space:!1,time:B})}const le=function(){function $(d,b,v,y,w=0){if(w===0&&(w=new Date().getTime()),n>w)return;let E=y;d.width!==void 0&&d.height!==void 0&&(E=d.width/d.height*y);const M=b-E,C=v-y,A=m.random(M-5)+10,L=m.random(C-5)+10;let R="top: "+L+"px;";R+=" left: "+A+"px;",R+=" --emote-height: "+y+"px;",R+=" --emote-width: "+E+"px;";const N=[],B=Math.floor(k.emote.time*1e3*D.display.Crazy.time),F=Math.sqrt(D.display.Crazy.distance**2/2)/B,G={x:0,y:0};for(;G.x===0&&G.y===0;)G.x=m.random()*(F*2)-F,G.y=m.random()*(F*2)-F;const q={x:A,y:L,t:0};let ne=0,Z=0;const Q=Math.floor(B*D.display.Crazy.squash.time*2);for(;Z*Q+q.t<B;){q.x+=G.x,q.y+=G.y,q.t+=1;let O=!1;q.x<=0?(q.x=0,G.x*=-1,O=1):q.x>=M&&(q.x=M,G.x*=-1,O=3),q.y<=0?(q.y=0,G.y*=-1,O=2):q.y>=C&&(q.y=C,G.y*=-1,O=4),O!==!1&&(Z++,N.push({x:Math.floor(q.x),y:Math.floor(q.y),t:q.t-ne,w:O}),ne=q.t)}N.push({x:q.x,y:q.y,t:q.t-ne,w:0}),R+=m.styleEmote([],[],[],[],[],[],k.emote.in.fade,k.emote.in.zoom,k.emote.out.fade,k.emote.out.zoom,B);const u=[];if(u.push(o(w,d.url,{style:R},!0,{space:!1,time:B})),d.hasOwnProperty("zwe"))for(let O=0,U=d.zwe.length;O<U;O++)u.push(o(w,d.zwe[O].url,{style:R},!0,{space:!1,time:B}));const h=0,_=u.length,T=N.length;m.doNextFrame(S,w,_,u,T,N,h)}function S(d,b,v,y,w,E){if(n>d||E>=y)return;const M=Math.floor(k.emote.time*1e3*D.display.Crazy.time*D.display.Crazy.squash.time);for(let C=0;C<b;C++)v[C].dataset.origin="center",v[C].dataset.squash="no",v[C].style.top=w[E].y+"px",v[C].style.left=w[E].x+"px",v[C].style.transition="top "+w[E].t+"ms linear, left "+w[E].t+"ms linear, transform "+M+"ms linear";E++,setTimeout(P,w[E-1].t,d,b,v,y,w,E)}function P(d,b,v,y,w,E){if(n>d)return;const M=Math.floor(k.emote.time*1e3*D.display.Crazy.time*D.display.Crazy.squash.time);for(let C=0;C<b;C++)switch(w[E-1].w){case 1:v[C].dataset.origin="left",v[C].dataset.squash="horizontal";break;case 2:v[C].dataset.origin="top",v[C].dataset.squash="vertical";break;case 3:v[C].dataset.origin="right",v[C].dataset.squash="horizontal";break;case 4:v[C].dataset.origin="bottom",v[C].dataset.squash="vertical";break}setTimeout(x,M,d,b,v,y,w,E)}function x(d,b,v,y,w,E){if(n>d)return;const M=Math.floor(k.emote.time*1e3*D.display.Crazy.time*D.display.Crazy.squash.time);for(let C=0;C<b;C++)v[C].dataset.squash="no";setTimeout(S,M,d,b,v,y,w,E)}return $}();function be($,S,P,x,d=0){if(d===0&&(d=new Date().getTime()),n>d)return;let b=x;$.width!==void 0&&$.height!==void 0&&(b=$.width/$.height*x);const v=Math.ceil(b/2);let w="left: "+(m.random(S)-v)+"px;";w+=" --emote-height: "+x+"px;",w+=" --emote-width: "+b+"px;";const E=[],M=[],C=[],A=[],L=[],R=[];switch(m.random(3)){case 0:E.push("confettiA");break;case 1:E.push("confettiB");break;case 2:E.push("confettiC");break}M.push("0s");const N=Math.floor(k.emote.time*1e3*D.display.Confetti.time);if(C.push(N+"ms"),A.push("linear"),L.push("forwards"),R.push("1"),w+=m.styleEmote(E,M,C,A,L,R,!1,!1,k.emote.out.fade,!1,N),o(d,$.url,{style:w},!1,{space:!1,time:N}),$.hasOwnProperty("zwe"))for(let B=0,F=$.zwe.length;B<F;B++)o(d,$.zwe[B].url,{style:w},!1,{space:!1,time:N})}const ee=function(){function $(x,d,b,v,y=0){if(y===0&&(y=new Date().getTime()),n>y)return;let w=v;x.width!==void 0&&x.height!==void 0&&(w=x.width/x.height*v);const E=d-w,M=b-v,C=m.random(2)===0?w*-1:d,A=m.random(b+v)-v,L=Math.floor(E*m.randomFromRange(D.display.Throw.dest.h)),R=Math.floor(M*m.randomFromRange(D.display.Throw.dest.v)),N=m.random()*v,B=Math.floor(k.emote.time*1e3*D.display.Throw.time),F=Math.floor(B*D.display.Throw.toss),G=Math.floor(B*D.display.Throw.drop);let q="--emote-height: "+v+"px;";q+=" --emote-width: "+w+"px;",q+=" transform: translate("+C+"px, "+A+"px);";let ne="--emote-height: "+v+"px;";ne+=" --emote-width: "+w+"px;";let Z="360";C>0&&(Z="-360"),ne+=" transform: translate("+L+"px, "+(b-N)+"px) rotate("+Z+"deg);";const Q=[],u=[],h=[],_=[],T=[],O=[];if(k.emote.out.fade){const W=k.emote.animation.fade.out/100,I=G*W;Q.push("fadeOut"),u.push(Math.floor(G-I)+"ms"),h.push(Math.floor(I)+"ms"),_.push("ease-out"),T.push("forwards"),O.push("1")}else Q.push("noFadeOut"),u.push(G-50+"ms"),h.push("50ms"),_.push("ease-out"),T.push("forwards"),O.push("1");if(k.emote.out.zoom){const W=k.emote.animation.zoom.out/100,I=G*W;Q.push("zoomOut"),u.push(Math.floor(G-I)+"ms"),h.push(Math.floor(I)+"ms"),_.push("linear"),T.push("forwards"),O.push("1")}ne+=m.styleEmoteString(Q,u,h,_,T,O,B);const U=[];if(U.push(o(y,x.url,{style:q,classes:["etThrowTwist"]},!0,{space:!1,time:B})),x.hasOwnProperty("zwe"))for(let W=0,I=x.zwe.length;W<I;W++)U.push(o(y,x.zwe[W].url,{style:q,classes:["etThrowTwist"]},!0,{space:!1,time:B}));m.doNextFrame(S,y,U,L,R),setTimeout(P,F,y,U,ne)}function S(x,d,b,v){if(!(n>x))for(let y=0,w=d.length;y<w;y++)d[y].style.transform="translate("+b+"px, "+v+"px)"}function P(x,d,b){if(!(n>x))for(let v=0,y=d.length;v<y;v++)d[v].classList.replace("etThrowTwist","etThrowDrop"),d[v].setAttribute("style",b)}return $}(),ae=function(){function $(P,x,d,b,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;const y=document.createElement("div");y.setAttribute("class","scene fit cube");const w=Math.ceil(b/2),E=w*-1,M=Math.floor(k.emote.time*1e3*D.display.TheCube.time),C=document.createElement("div");if(C.setAttribute("class","cube"),C.setAttribute("style","transform: translateZ("+E+"px);"),!P.hasOwnProperty("zwe")||P.zwe.length===0){const ne=document.createElement("img");m.setImgSrc(ne,P.url),ne.dataset.face="front",C.appendChild(ne);const Z=document.createElement("img");m.setImgSrc(Z,P.url),Z.dataset.face="back",C.appendChild(Z);const Q=document.createElement("img");m.setImgSrc(Q,P.url),Q.dataset.face="right",C.appendChild(Q);const u=document.createElement("img");m.setImgSrc(u,P.url),u.dataset.face="left",C.appendChild(u);const h=document.createElement("img");m.setImgSrc(h,P.url),h.dataset.face="top",C.appendChild(h);const _=document.createElement("img");m.setImgSrc(_,P.url),_.dataset.face="bottom",C.appendChild(_)}else{const ne=P.zwe.length,Z=document.createElement("div");Z.dataset.face="front";const Q=document.createElement("img");m.setImgSrc(Q,P.url),Z.appendChild(Q);for(let H=0;H<ne;H++){const te=document.createElement("img");m.setImgSrc(te,P.zwe[H].url),Z.appendChild(te)}C.appendChild(Z);const u=document.createElement("div");u.dataset.face="back";const h=document.createElement("img");m.setImgSrc(h,P.url),u.appendChild(h);for(let H=0;H<ne;H++){const te=document.createElement("img");m.setImgSrc(te,P.zwe[H].url),u.appendChild(te)}C.appendChild(u);const _=document.createElement("div");_.dataset.face="right";const T=document.createElement("img");m.setImgSrc(T,P.url),_.appendChild(T);for(let H=0;H<ne;H++){const te=document.createElement("img");m.setImgSrc(te,P.zwe[H].url),_.appendChild(te)}C.appendChild(_);const O=document.createElement("div");O.dataset.face="left";const U=document.createElement("img");m.setImgSrc(U,P.url),O.appendChild(U);for(let H=0;H<ne;H++){const te=document.createElement("img");m.setImgSrc(te,P.zwe[H].url),O.appendChild(te)}C.appendChild(O);const W=document.createElement("div");W.dataset.face="top";const I=document.createElement("img");m.setImgSrc(I,P.url),W.appendChild(I);for(let H=0;H<ne;H++){const te=document.createElement("img");m.setImgSrc(te,P.zwe[H].url),W.appendChild(te)}C.appendChild(W);const Y=document.createElement("div");Y.dataset.face="bottom";const z=document.createElement("img");m.setImgSrc(z,P.url),Y.appendChild(z);for(let H=0;H<ne;H++){const te=document.createElement("img");m.setImgSrc(te,P.zwe[H].url),Y.appendChild(te)}C.appendChild(Y)}y.appendChild(C);const A=m.random(x)-w,L=m.random(d)-w,R=Math.min(x,d)*(m.random()+1);let N=m.random()*k.radius;const B=b*-1;for(;!m.safePoints(A,L,N,R,B,B,x,d);)N=m.random()*k.radius;const F=Math.floor(A+R*Math.cos(N)),G=Math.floor(L+R*Math.sin(N));let q="--emote-height: "+b+"px;";q+=" --emote-width: "+b+"px;",q+=" --cube-depth: "+w+"px;",q+=" perspective: "+b*3+"px;",q+=" transform: translate("+A+"px, "+L+"px);",q+=m.styleEmote([],[],[],[],[],[],k.emote.in.fade,!1,k.emote.out.fade,!1,M),y.setAttribute("style",q),e+=6,t.appendChild(y),s.hook(y,!0,6,M),m.doNextFrame(S,v,C,y,F,G,b)}function S(P,x,d,b,v,y){if(n>P)return;const w=Math.ceil(y/2)*-1;let E=0,M=0;for(;Math.abs(E)+Math.abs(M)<45;)E=(360-m.random()*720)*k.emote.cube.speed,M=(360-m.random()*720)*k.emote.cube.speed;x.style.transform="translateZ("+w+"px) rotateX("+E+"deg) rotateY("+M+"deg)",d.style.transform="translate("+b+"px, "+v+"px)"}return $}();function se($,S,P,x,d,b,v=0){if(v===0&&(v=new Date().getTime()),n>v)return;const y=Math.floor(k.emote.time*1e3*D.display.Fountain.time);let w=x;$.width!==void 0&&$.height!==void 0&&(w=$.width/$.height*x);const E=S-w,M=P-x;let C=d;C===!1&&(C=Math.floor(m.random()*(E*.33)+E*.33));let A;m.random(2)===0?A=C-m.random(E*.2):A=C+m.random(E*.2);let L="--emote-height: "+x+"px;";L+=" --emote-width: "+w+"px;",L+=" transform: translateX("+C+"px);",L+=' offset-path: path("M 0 '+P+" L 0 "+Math.floor(b*P+m.random(M/2))+" L 0 "+(P+x)+'");';const R=[],N=[],B=[],F=[],G=[],q=[];if(R.push("offsetPath"),N.push("0s"),B.push(y+"ms"),F.push("cubic-bezier(0, 0.9, 1, 0.15)"),G.push("forwards"),q.push("1"),L+=m.styleEmoteString(R,N,B,F,G,q,y),o(v,$.url,{style:L,classes:["etFountain"]},!1,{time:y,space:!1},{x:A}),$.hasOwnProperty("zwe"))for(let ne=0,Z=$.zwe.length;ne<Z;ne++)o(v,$.zwe[ne].url,{style:L,classes:["etFountain"]},!1,{time:y,space:!1},{x:A})}return{Still:V,StraightLine:f,Rise:j,Bounce:K,Speed:re,Drop:ie,Crazy:le,Confetti:be,Throw:ee,TheCube:ae,Fountain:se}}();function X(V){const f=innerWidth,j=innerHeight,K=Math.max(k.emote.size.min,Math.min(k.emote.size.max,Math.floor(f*k.emote.size.ratio.normal),Math.floor(j*k.emote.size.ratio.normal)));document.documentElement.style.setProperty("--height",j+"px"),document.documentElement.style.setProperty("--width",f+"px");const re=k.display.styles[m.random(k.display.styles.length)];re!==void 0&&i.list[re](V,f,j,K)}function J(V){c.push(...V),p!==!1&&(clearTimeout(p),p=!1);const f=()=>p=setTimeout(()=>{j.showEmotes([])},500);if(k.emote.max>0&&e>=k.emote.max){f();return}let j=null;for(;(j=c.shift())!==void 0;)if(X(j),k.emote.max>0&&e>k.emote.max){k.emote.queue>0&&c.length>k.emote.queue&&c.splice(0,c.length-k.emote.queue),f();break}}return{showEmotes:J,list:g}}(),r=function(){const c=[],p=function(){return{Fireworks:function(){function ee($,S,P,x,d){const b=new Date().getTime();if(n>b)return;const v=$[m.random($.length)];let y=x;v.width!==void 0&&v.height!==void 0&&(y=v.width/v.height*x);const w=Math.ceil(y/2),E=S*D.kappa.Fireworks.origin.x[m.random(D.kappa.Fireworks.origin.x.length)]-w,M=P*D.kappa.Fireworks.origin.y[m.random(D.kappa.Fireworks.origin.y.length)],C=S*D.kappa.Fireworks.dest.x[m.random(D.kappa.Fireworks.dest.x.length)],A=P*D.kappa.Fireworks.dest.y[m.random(D.kappa.Fireworks.dest.y.length)],L=Math.floor(k.emote.time*1e3*D.kappa.Fireworks.time),R=Math.floor(L*D.kappa.Fireworks.speed.rocket);let N="--emote-height: "+x+"px;";N+=" --emote-width: "+y+"px;",N+=" transform: translate("+E+"px, "+M+"px);";const B=[];if(e--,B.push(o(b,v.url,{style:N,classes:["ktFireworkRocket"]},!0,!1,{x:C-w,y:A})),v.hasOwnProperty("zwe"))for(let F=0,G=v.zwe.length;F<G;F++)B.push(o(b,v.zwe[F].url,{style:N,classes:["ktFireworkRocket"]},!0,!1,{x:C-w,y:A}));setTimeout(ae,R,b,$,B,C,A,x,S,P,d)}async function ae($,S,P,x,d,b,v,y,w){if(n>$)return;for(let Z=0,Q=P.length;Z<Q;Z++)t.removeChild(P[Z]),e--;const E=Math.floor(k.emote.time*1e3*D.kappa.Fireworks.time),M=Math.floor(E*D.kappa.Fireworks.speed.burst),C=m.countEstimatedTime(w,M),A=Math.min(v,y)*D.kappa.Fireworks.radius.base,L=Math.max(3,Math.floor(w*D.kappa.Fireworks.quantity.small)),R=Math.floor(w*D.kappa.Fireworks.quantity.medium),N=Math.max(3,Math.floor(w*D.kappa.Fireworks.quantity.large)),B=S.length,F=A*D.kappa.Fireworks.radius.small;for(let Z=0;Z<L;Z++){if(n>$)return;const Q=S[m.random(B)];let u=b;Q.width!==void 0&&Q.height!==void 0&&(u=Q.width/Q.height*b);const h=m.random();if(e--,se($,Q.url,x,d,u,b,F,h),Q.hasOwnProperty("zwe"))for(let _=0,T=Q.zwe.length;_<T;_++)se($,Q.zwe[_].url,x,d,u,b,F,h);Z%C.ct===C.ct-1&&await m.framePause(C.f)}await m.sleep(Math.floor(E*D.kappa.Fireworks.delays.small));const G=A*D.kappa.Fireworks.radius.medium,q=Math.ceil(C.ct/D.kappa.Fireworks.spread);for(let Z=0;Z<R;Z++){if(n>$)return;const Q=S[m.random(B)];let u=b;Q.width!==void 0&&Q.height!==void 0&&(u=Q.width/Q.height*b);const h=m.random();if(e--,se($,Q.url,x,d,u,b,G,h),Q.hasOwnProperty("zwe"))for(let _=0,T=Q.zwe.length;_<T;_++)se($,Q.zwe[_].url,x,d,u,b,G,h);Z%q===q-1&&await m.framePause()}await m.sleep(Math.floor(E*D.kappa.Fireworks.delays.large));const ne=A*D.kappa.Fireworks.radius.large;for(let Z=0;Z<N;Z++){if(n>$)return;const Q=S[m.random(B)];let u=b;Q.width!==void 0&&Q.height!==void 0&&(u=Q.width/Q.height*b);const h=m.random();if(e--,se($,Q.url,x,d,u,b,ne,h),Q.hasOwnProperty("zwe"))for(let _=0,T=Q.zwe.length;_<T;_++)se($,Q.zwe[_].url,x,d,u,b,ne,h);Z%C.ct===C.ct-1&&await m.framePause(C.f)}}function se($,S,P,x,d,b,v,y){if(n>$)return;const w=y*k.radius,E=Math.ceil(d/2),M=P-E,C=Math.floor(M+v*Math.cos(w)),A=Math.floor(x+v*Math.sin(w)),L=Math.floor(k.emote.time*1e3*D.kappa.Fireworks.time);let R="--emote-height: "+b+"px;";R+=" --emote-width: "+d+"px;",R+=" transform: translate("+M+"px, "+x+"px);",R+=m.styleEmote([],[],[],[],[],[],!0,!1,!0,!1,L),o($,S,{style:R,classes:["ktFireworkSparkler"]},!1,{space:!1,time:L},{x:C,y:A})}return ee}(),Spiral:function(){function ee($,S,P,x,d){const b=new Date().getTime();if(n>b)return;const v=m.random()*S,y=m.random(P-x),w=Math.min(S,P);m.doNextFrame(ae,b,$,v,y,x,w,d)}async function ae($,S,P,x,d,b,v){if(n>$)return;const y=k.radius/(m.randomFromRange(D.kappa.Spiral.vectors)+m.random()*2);let w=m.random()*k.radius;const E=m.random(2)===0,M=Math.floor(k.emote.time*1e3*D.kappa.Spiral.time),C=m.countEstimatedTime(v,M);C.ct>D.kappa.Spiral.bulk&&(C.ct=D.kappa.Spiral.bulk);for(let A=0;A<v;A++){if(n>$)return;E?(w-=y,w<=0&&(w+=k.radius)):(w+=y,w>=k.radius&&(w-=k.radius));const L=S[m.random(S.length)];let R=d;L.width!==void 0&&L.height!==void 0&&(R=L.width/L.height*d);const N=Math.ceil(R/2);if(e--,se($,L.url,P-N,x,R,d,b,w),L.hasOwnProperty("zwe"))for(let B=0,F=L.zwe.length;B<F;B++)se($,L.zwe[B].url,P-N,x,R,d,b,w);A%C.ct===C.ct-1&&await m.framePause(C.f)}}function se($,S,P,x,d,b,v,y){if(n>$)return;const w=Math.floor(P+v*Math.cos(y)),E=Math.floor(x+v*Math.sin(y)),M=Math.floor(k.emote.time*1e3*D.kappa.Spiral.time);let C="--emote-height: "+b+"px;";C+=" --emote-width: "+d+"px;",C+=" transform: translate("+P+"px, "+x+"px);",C+=m.styleEmote([],[],[],[],[],[],!0,!1,!0,!1,M),o($,S,{style:C,classes:["ktSpiral"]},!1,{space:!1,time:M},{x:w,y:E})}return ee}(),Pyramid:function(){function ee(S,P,x){const d=new Date().getTime();if(n>d)return;const b=[];let v=0;const y=tn.length,w=P/y;for(let N=0;N<y;N++)b.push(0),v+=tn[N];const E=Math.floor(k.emote.time*1e3*D.kappa.Pyramid.time),M=E*D.kappa.Pyramid.show.total,C=Math.max(Math.floor(M/v),D.kappa.Pyramid.show.min),A=C*v,L=Math.floor(E*D.kappa.Pyramid.pause);let R=0;for(let N=0;N<v;N++){if(n>d)return;let B;do B=m.random(y);while(b[B]>=tn[B]);const F=S[m.random(S.length)];if(ae(d,F.url,B,R,w,x,b[B]+1,A+L),F.hasOwnProperty("zwe"))for(let G=0,q=F.zwe.length;G<q;G++)e++,ae(d,F.zwe[G].url,B,R,w,x,b[B]+1,A+L);b[B]++,R+=C}}function ae(S,P,x,d,b,v,y,w){if(n>S)return;const E=document.createElement("img");E.setAttribute("class","emote fit ktPyramid"),m.setImgSrc(E,P);const M=Math.floor(b*x),C=-1*b,A=v-b*y;let L="top: 0px;";L+=" left: "+M+"px;",L+=" --emote-height: "+b+"px;",L+=" --emote-width: "+b+"px;",L+=" transform: translateY("+C+"px);",E.setAttribute("style",L),t.appendChild(E),setTimeout($,Math.floor(d/10+w),S,E,v),setTimeout(se,d,S,E,A)}function se(S,P,x){n>S||(P.style.transform="translateY("+x+"px)")}function $(S,P,x){if(n>S)return;const d=Math.floor(k.emote.time*1e3*D.kappa.Pyramid.time),b=Math.floor(d*D.kappa.Pyramid.hide);P.classList.replace("ktPyramid","ktPyramidDrop"),P.style.transform="translateY("+x+"px)",s.hook(P,!1,!0,b)}return ee}(),SmallPyramid:function(){function ee(S,P,x){const d=new Date().getTime();if(n>d)return;const b=[];let v=0;const y=tn.length,w=Math.min(P/y,Math.floor(P*k.emote.size.ratio.small),Math.floor(x*k.emote.size.ratio.small));for(let B=0;B<y;B++)b.push(0),v+=tn[B];const E=Math.floor(k.emote.time*1e3*D.kappa.SmallPyramid.time),M=E*D.kappa.SmallPyramid.show.total,C=Math.max(Math.floor(M/v),D.kappa.SmallPyramid.show.min),A=C*v,L=Math.floor(E*D.kappa.SmallPyramid.pause),R=m.random(P-w*y);let N=0;for(let B=0;B<v;B++){if(n>d)return;let F;do F=m.random(y);while(b[F]>=tn[F]);const G=S[m.random(S.length)];if(ae(d,G.url,R,F,N,w,x,b[F]+1,A+L),G.hasOwnProperty("zwe"))for(let q=0,ne=G.zwe.length;q<ne;q++)e++,ae(d,G.zwe[q].url,R,F,N,w,x,b[F]+1,A+L);b[F]++,N+=C}}function ae(S,P,x,d,b,v,y,w,E){if(n>S)return;const M=document.createElement("img");M.setAttribute("class","emote fit ktSmallPyramid"),m.setImgSrc(M,P);const C=x+v*d,A=-1*v,L=y-v*w;let R="top: 0px;";R+=" left: "+C+"px;",R+=" --emote-height: "+v+"px;",R+=" --emote-width: "+v+"px;",R+=" transform: translateY("+A+"px);",M.setAttribute("style",R),t.appendChild(M),setTimeout($,Math.floor(b/10+E),S,M,y),setTimeout(se,b,S,M,L)}function se(S,P,x){n>S||(P.style.transform="translateY("+x+"px)")}function $(S,P,x){if(n>S)return;const d=Math.floor(k.emote.time*1e3*D.kappa.SmallPyramid.time),b=Math.floor(d*D.kappa.SmallPyramid.hide);P.classList.replace("ktSmallPyramid","ktSmallPyramidDrop"),P.style.transform="translateY("+x+"px)",s.hook(P,!1,!0,b)}return ee}(),Stampede:function(){async function ee(S,P,x,d,b){const v=new Date().getTime();if(n>v)return;const y=d*D.kappa.Stampede.height,w=m.random(2)===0,E=m.random(x-y+d*D.kappa.Stampede.top.min+d*D.kappa.Stampede.top.max)+d*(-1*D.kappa.Stampede.top.min),M=m.randomFromRange(D.kappa.Stampede.bunch[1]),C=m.random(D.kappa.Stampede.bunch[2]-M)+M,A=m.randomFromRange(D.kappa.Stampede.bunch[4]);e+=M+C+b+A;const L=A>0,R=Math.floor(k.emote.time*1e3*D.kappa.Stampede.time),N=Math.floor(R*D.kappa.Stampede.speed),B=Math.floor(N*D.kappa.Stampede.pause[1]);let F=0;for(let ne=0,Z=S.length;ne<Z;ne++){let Q=d;S[ne].width!==void 0&&S[ne].height!==void 0&&(Q=S[ne].width/S[ne].height*d),Q>F&&(F=Q)}if(await ae(v,S,M,B,!1,E,y,w,P,d,F),n>v)return;const G=Math.floor(N*D.kappa.Stampede.pause[2]);if(await ae(v,S,C,G,!1,E,y,w,P,d,F),n>v)return;const q=m.countEstimatedTime(b,R);q.ct>D.kappa.Stampede.maxdensity&&(q.ct=D.kappa.Stampede.maxdensity),await ae(v,S,b,L,q,E,y,w,P,d,F),!(n>v)&&L&&await ae(v,S,A,!1,!1,E,y,w,P,d,F)}async function ae(S,P,x,d,b,v,y,w,E,M,C){if(n>S)return;const A=[];for(let L=0;L<x;L++){if(n>S)return;const R=P[m.random(P.length)];let N=M;R.width!==void 0&&R.height!==void 0&&(N=R.width/R.height*M);const B=v+m.random(y);if(e--,A.push(se(S,R.url,B,w,E,N,M,C)),R.hasOwnProperty("zwe"))for(let F=0,G=R.zwe.length;F<G;F++)se(S,R.zwe[F].url,B,w,E,N,M,C);if(b===!1)await m.sleep(m.randomFromRange(D.kappa.Stampede.smallSleep));else if(L%b.ct===b.ct-1){let F=b.f;F===1?F=m.random(3):F*=m.random()*3/2,F!==0&&await m.framePause(F)}}if(d!==!1){if(d!==!0){await m.sleep(d);return}do{if(n>S)return;await m.sleep(100);for(let L=A.length-1;L>=0;L--)(A[L]===null||A[L].hasAttribute("deleted"))&&A.splice(L,1)}while(A.length>0)}}function se(S,P,x,d,b,v,y,w){if(n>S)return;const E=-2*w,M=Math.floor(k.emote.time*1e3*D.kappa.Stampede.time),C=Math.floor(M*D.kappa.Stampede.speed);let A="--emote-height: "+y+"px;";A+=" --emote-width: "+v+"px;",d?A+=" transform: translate("+b+"px, "+x+"px);":A+=" transform: translate("+E+"px, "+x+"px);",A+=m.styleEmoteString([],[],[],[],[],[]);let L;return d?L=o(S,P,{style:A,classes:["ktStampede"]},!0,{space:!1,time:C},{x:E,y:x}):L=o(S,P,{style:A,classes:["ktStampede"]},!0,{space:!1,time:C},{x:b,y:x}),setTimeout($,C,S,L),L}function $(S,P){n>S||P!==null&&(P.parentNode!==null&&t.removeChild(P),P.setAttribute("deleted",!0))}return ee}(),Conga:function(){async function ee(S,P,x,d,b){const v=new Date().getTime();if(n>v)return;let y=0,w=!1;const E=Math.ceil(d*D.kappa.Conga.size),M=Math.floor(d*D.kappa.Conga.height),C=Math.floor(x/M);let A=C;for(b&&(A=D.kappa.Conga.avoidMiddle);c.length>=A;){if(n>v)return;await m.sleep(250)}for(;!w;){if(y=m.random(C)*M,b){y=m.random(D.kappa.Conga.avoidMiddle);const Q=Math.floor(D.kappa.Conga.avoidMiddle/2);y>=Q&&(y=C-1-(y-Q)),y*=M}let Z=!1;for(let Q=0,u=c.length;Q<u;Q++)if(c[Q].row===y){Z=!0;break}Z||(w=!0)}c.push({row:y,done:!1});const L=[],R=[],N=Math.floor(P/E);for(let Z=0;Z<N;Z++){const Q=S[m.random(S.length)];L.push(Q.url);const u=[];if(Q.hasOwnProperty("zwe"))for(let h=0,_=Q.zwe.length;h<_;h++)u.push(Q.zwe[h].url);R.push(u)}const B=y/M%2===0,F=Math.floor((P-N*E)/2),G=[],q=[];for(let Z=0;Z<N;Z++){G.push(ae(v,L[Z],Z,P,y,d,E,N,B,F));const Q=[];for(let u=0,h=R[Z].length;u<h;u++)Q.push(ae(v,R[Z][u],Z,P,y,d,E,N,B,F));q.push(Q)}const ne=Math.floor(k.emote.time*1e3*D.kappa.Conga.time.show);await m.sleep(ne),await m.sleep(Math.floor(k.display.kappa.conga.time*1e3));for(let Z=0,Q=G.length;Z<Q;Z++){se(v,G[Z],Z,P,y,d,E,N,B,F);for(let u=0,h=q[Z].length;u<h;u++)se(v,q[Z][u],Z,P,y,d,E,N,B,F)}await m.sleep(ne);for(let Z=0,Q=c.length;Z<Q;Z++)if(c[Z].row===y){c.splice(Z,1);break}}function ae(S,P,x,d,b,v,y,w,E,M){if(n>S)return;const C=document.createElement("div");C.setAttribute("class","scene ktCongaIn");const A=document.createElement("img");A.setAttribute("class","dancer fit"),m.setImgSrc(A,P);let L="--emote-height: "+v+"px;";L+=" --emote-width: "+v+"px;",A.setAttribute("style",L);let R=y*x+M,N=R-d;return E&&(R=y*(w-1-x)+M,N=R+d),L="top: "+b+"px;",L+=" left: 0px;",L+=" height: "+y+"px;",L+=" width: "+y+"px;",L+=" z-index: "+b+";",L+=" transform: translateX("+N+"px);",C.setAttribute("style",L),e++,C.appendChild(A),t.appendChild(C),m.doNextFrame($,S,C,R),C}function se(S,P,x,d,b,v,y,w,E,M){if(n>S)return;let C=y*x+M,A=C+d;E&&(C=y*(w-1-x)+M,A=C-d);const L=Math.floor(k.emote.time*1e3*D.kappa.Conga.time.hide);P.classList.replace("ktCongaIn","ktCongaOut"),s.hook(P,!0,!0,Math.ceil(L*1.25)),m.doNextFrame($,S,P,A)}function $(S,P,x){n>S||(P.style.transform="translateX("+x+"px)")}return ee}(),TheCube:function(){function ee(se,$,S,P,x,d){const b=new Date().getTime();if(n>b)return;const v=Math.ceil(P/2),y=v*-1,w=Math.ceil($/2),E=Math.ceil(S/2),M=document.createElement("div");M.setAttribute("class","scene fit cube kappa");const C=Math.floor(k.emote.time*1e3*D.kappa.TheCube.time),A=document.createElement("div");A.setAttribute("class","cube"),A.setAttribute("style","transform: translateZ("+y+"px);");const L=["front","back","right","left","top","bottom"],R=[];for(let G=0;G<6;G++)R.push(se[m.random(se.length)]);for(let G=0;G<6;G++)if(!R[G].hasOwnProperty("zwe")||R[G].zwe.length===0){const q=document.createElement("img");m.setImgSrc(q,R[G].url),q.dataset.face=L[G],A.appendChild(q)}else{const q=document.createElement("div");q.dataset.face=L[G];const ne=document.createElement("img");m.setImgSrc(ne,R[G].url),q.appendChild(ne);for(let Z=0,Q=R[G].zwe.length;Z<Q;Z++){const u=document.createElement("img");m.setImgSrc(u,R[G].zwe[Z].url),q.appendChild(u)}A.appendChild(q)}M.appendChild(A);let N=m.random($-P),B=m.random(S-P);x&&(N=Math.floor(w-v),B=Math.floor(E-v));let F="--emote-height: "+P+"px;";F+=" --emote-width: "+P+"px;",F+=" --cube-depth: "+v+"px;",F+=" perspective: "+P*3+"px;",F+=" transform: translate("+N+"px, "+B+"px);",F+=m.styleEmote([],[],[],[],[],[],k.emote.in.fade,!1,k.emote.out.fade,!1,C),M.setAttribute("style",F),t.appendChild(M),s.hook(M,!1,6,C),m.doNextFrame(ae,b,A,d,P)}function ae(se,$,S,P){if(n>se)return;const x=Math.ceil(P/2)*-1;let d=0,b=0;for(;Math.abs(d)+Math.abs(b)<45;)d=(360-m.random()*720)*S,b=(360-m.random()*720)*S;$.style.transform="translateZ("+x+"px) rotateX("+d+"deg) rotateY("+b+"deg)"}return ee}(),Text:function(){let ee=0;function ae(x,d,b,v,y){const w=new Date().getTime();if(n>w)return;const E=se(v);let M=0,C=0;const A=[],L=E.length;for(let h=0;h<L;h++){const _=E[h].length;for(let T=0;T<_;T++)E[h][T]!==0&&(C+=1);M+=_,A.push(0)}const R=Math.min(Math.floor(d/(L+2)),Math.floor(d*k.emote.size.ratio.small),Math.floor(b*k.emote.size.ratio.small)),B=Math.floor(y*1e3*D.kappa.Text.time)*D.kappa.Text.show.total,F=Math.max(Math.floor(B/M),D.kappa.Text.show.min),G=F*C,q=E[0].length,ne=R*q,Z=m.random(b-ne)+ne,Q=m.random(d-R*L);let u=0;for(let h=0;h<M;h++){if(n>w)return;let _;do _=m.random(L);while(A[_]>=E[_].length);if(E[_][A[_]]!==0){const T=x[m.random(x.length)];if($(w,T.url,Z,Q,A[_]+1,F,G,y,_,u,b,R),T.hasOwnProperty("zwe"))for(let O=0,U=T.zwe.length;O<U;O++)$(w,T.zwe[O].url,Z,Q,A[_]+1,F,G,y,_,u,b,R);u+=F}A[_]++}}function se(x){const d=[],b=[];if(ee===0)for(let v=0,y=Object.keys(_i),w=y.length;v<w;v++)ee=Math.max(ee,_i[y[v]][0].length);for(let v=0;v<ee;v++)b.push(0);for(let v=0,y=x.length;v<y;v++){if(v>0&&d.push(b),x[v]===" "){d.push(b),d.push(b);continue}const w=x[v];if(!_i.hasOwnProperty(w))continue;const E=_i[w];for(let M=0,C=E.length;M<C;M++)d.push(E[M])}return d}function $(x,d,b,v,y,w,E,M,C,A,L,R){if(n>x)return;const N=document.createElement("img");N.setAttribute("class","emote fit"),m.setImgSrc(N,d);const B=v+R*C,F=-1*R,G=b-R*y;let q="top: 0px;";q+=" left: "+B+"px;",q+=" --emote-height: "+R+"px;",q+=" --emote-width: "+R+"px;",q+=" transition: transform "+w+"ms ease-in;",q+=" transform: translateY("+F+"px);",N.setAttribute("style",q),t.appendChild(N),e++;const ne=Math.floor(M*1e3*D.kappa.Text.time);setTimeout(P,Math.floor(E+ne+A/10),x,N,L,ne),setTimeout(S,A,x,N,G)}function S(x,d,b){n>x||(d.style.transform="translateY("+b+"px)")}function P(x,d,b,v){if(n>x)return;const y=Math.floor(v*D.kappa.Text.hide);d.style.transform="translateY("+b+"px)",d.style.transitionDuration=y+"ms",s.hook(d,!1,!0,y)}return ae}()}}();function g(V){switch(V.style){case"Pyramid":case"SmallPyramid":let f=0;for(let ae=0,se=tn.length;ae<se;ae++)f+=tn[ae];return f;case"Fireworks":const j=Math.max(3,Math.floor(V.count*D.kappa.Fireworks.quantity.small)),K=Math.floor(V.count*D.kappa.Fireworks.quantity.medium),re=Math.max(3,Math.floor(V.count*D.kappa.Fireworks.quantity.large));return 1+j+K+re;case"Conga":const ie=innerWidth,le=innerHeight,be=Math.max(k.emote.size.min,Math.min(k.emote.size.max,Math.floor(ie*k.emote.size.ratio.normal),Math.floor(le*k.emote.size.ratio.normal))),ee=Math.ceil(be*D.kappa.Conga.size);return Math.floor(ie/ee);case"TheCube":return 6}return V.count}async function X(V,f){const j=innerWidth,K=innerHeight,re=Math.max(k.emote.size.min,Math.min(k.emote.size.max,Math.floor(j*k.emote.size.ratio.normal),Math.floor(K*k.emote.size.ratio.normal))),ie=Math.max(k.emote.size.min,Math.min(Math.floor(k.emote.size.max/2),Math.floor(j*k.emote.size.ratio.small),Math.floor(K*k.emote.size.ratio.small))),le=K-re;document.documentElement.style.setProperty("--height",K+"px"),document.documentElement.style.setProperty("--width",j+"px");const be=g(f);e+=be;const ee=V.length,ae=new Date().getTime();let se=Math.floor(k.emote.time*1e3);switch(D.kappa.hasOwnProperty(f.style)&&D.kappa[f.style].hasOwnProperty("time")?se=Math.floor(k.emote.time*1e3*D.kappa[f.style].time):D.display.hasOwnProperty(f.style)&&D.display[f.style].hasOwnProperty("time")&&(se=Math.floor(k.emote.time*1e3*D.display[f.style].time)),f.style){case"Stampede":e-=be,await p.Stampede(V,j,K,re,f.count);break;case"Fireworks":p.Fireworks(V,j,K,ie,f.count);break;case"Spiral":p.Spiral(V,j,K,ie,f.count);break;case"Pyramid":p.Pyramid(V,j,K);break;case"SmallPyramid":p.SmallPyramid(V,j,K);break;case"Conga":e-=be;let $=!1;f.prefs.hasOwnProperty("avoidMiddle")&&f.prefs.avoidMiddle===!0&&($=!0),p.Conga(V,j,K,re,$);break;case"Text":e-=be;let S="HYPE!";k.display.kappa.styles.hasOwnProperty(f.style)&&k.display.kappa.styles[f.style].hasOwnProperty("message")&&(S=k.display.kappa.styles[f.style].message[m.random(k.display.kappa.styles[f.style].message.length)]),f.prefs.hasOwnProperty("message")&&Array.isArray(f.prefs.message)&&f.prefs.message.length>0&&(S=f.prefs.message[m.random(f.prefs.message.length)]);let P=k.emote.time;k.display.kappa.styles.hasOwnProperty(f.style)&&k.display.kappa.styles[f.style].hasOwnProperty("time")&&(P=k.display.kappa.styles[f.style].time),f.prefs.hasOwnProperty("time")&&f.prefs.time>0&&(P=f.prefs.time),p.Text(V,j,K,S,P);break;case"TheCube":const x=Math.min(j,K);let d=8/10;k.display.kappa.styles.hasOwnProperty(f.style)&&k.display.kappa.styles[f.style].hasOwnProperty("size")&&(d=k.display.kappa.styles[f.style].size),f.prefs.hasOwnProperty("size")&&(d=f.prefs.size);let b=!0;k.display.kappa.styles.hasOwnProperty(f.style)&&k.display.kappa.styles[f.style].hasOwnProperty("center")&&(b=k.display.kappa.styles[f.style].center),f.prefs.hasOwnProperty("center")&&(b=f.prefs.center);let v=5;k.display.kappa.styles.hasOwnProperty(f.style)&&k.display.kappa.styles[f.style].hasOwnProperty("speed")&&(v=k.display.kappa.styles[f.style].speed),f.prefs.hasOwnProperty("speed")&&(v=f.prefs.speed||1);let y=!1;k.display.kappa.styles.hasOwnProperty(f.style)&&k.display.kappa.styles[f.style].hasOwnProperty("faces")&&(y=k.display.kappa.styles[f.style].faces),f.prefs.hasOwnProperty("faces")&&(y=f.prefs.faces===!0);let w=[];y?w=V:w.push(V[m.random(ee)]),p.TheCube(w,j,K,Math.floor(x*d),b,v);break;case"Burst":const E=m.randomFromRange(D.kappa[f.style].left),M=m.randomFromRange(D.kappa[f.style].top)*le,C=m.countEstimatedTime(f.count,se);for(let B=0;B<f.count;B++){if(n>ae)return;const F=m.random(ee);e--;let G=re;V[F].width!==void 0&&V[F].height!==void 0&&(G=V[F].width/V[F].height*re);const q=j-Math.ceil(G/2);i.list.StraightLine(V[F],j,K,re,E*q,M,ae),B%C.ct===C.ct-1&&await m.framePause(C.f)}break;case"Fountain":const A=m.randomFromRange(D.kappa[f.style].left)*j,L=m.randomFromRange(D.kappa[f.style].top),R=m.countEstimatedTime(f.count,se);for(let B=0;B<f.count;B++){if(n>ae)return;const F=m.random(ee);e--,i.list.Fountain(V[F],j,K,re,A,L,ae),B%R.ct===R.ct-1&&await m.framePause(R.f)}break;case"Confetti":const N=m.countEstimatedTime(f.count,se);for(let B=0;B<f.count;B++){if(n>ae)return;const F=m.random(ee);e--,i.list.Confetti(V[F],j,K,ie,ae),B%N.ct===N.ct-1&&await m.framePause(N.f)}break}}function J(){c.length=0}return{run:X,stop:J}}();function o(c,p,g={},X=!1,J={},V=!1){if(n>c)return;const f=document.createElement("img"),j=[];if(j.push("emote"),g.hasOwnProperty("classes")&&j.push(...g.classes),f.classList.add(...j),m.setImgSrc(f,p),g.hasOwnProperty("style")&&f.setAttribute("style",g.style),g.hasOwnProperty("dataset"))for(let le=0,be=Object.keys(g.dataset),ee=be.length;le<ee;le++)f.setAttribute("data-"+be[le],g.dataset[be[le]]);e++,t.appendChild(f);let K=!0,re=!0,ie=!1;if(J!==!1&&(J.hasOwnProperty("space")&&(K=J.space),J.hasOwnProperty("decrement")&&(re=J.decrement),J.hasOwnProperty("time")&&(ie=J.time),s.hook(f,K,re,ie)),V!==!1){let le=null;V.hasOwnProperty("x")&&V.hasOwnProperty("y")?le="translate("+V.x+"px, "+V.y+"px)":V.hasOwnProperty("x")?le="translateX("+V.x+"px)":V.hasOwnProperty("y")&&(le="translateY("+V.y+"px)"),le!==null&&m.doNextFrame(l,c,f,le)}if(X)return f}function l(c,p,g){n>c||(p.style.transform=g)}function a(){n=new Date().getTime(),r.stop();const c=document.getElementsByClassName("scene");for(;c.length;)c[0].parentElement.removeChild(c[0]);const p=document.getElementsByTagName("img");for(;p.length;)p[0].parentElement.removeChild(p[0]);e=0}return{emote:i,kappa:r,clear:a}}const qC=Oo({__name:"kappagen",props:{isRave:{type:Boolean,default:!1},config:{}},setup(t,{expose:e}){const n=t,s=Md(),i=Vu(()=>UC(s.value));return Ci(()=>n.config,r=>{r&&(k.emote=m.deepMerge(k.emote,Oi(n.config)))},{deep:!0,immediate:!0}),Ao(()=>{m.msPerFrame.start()}),Ro(()=>{m.msPerFrame.stop()}),e({clear(){i.value.clear()},showEmotes(r){i.value.emote.showEmotes(r)},playAnimation(r,o){return i.value.kappa.run(r,o)}}),(r,o)=>(Fo(),Bo("div",{class:Zi(["kappagen",{rave:r.isRave}]),ref_key:"kappagenEl",ref:s},null,2))}}),bt={TheCube:"TheCube",Text:"Text",Confetti:"Confetti",Spiral:"Spiral",Stampede:"Stampede",Burst:"Burst",Fountain:"Fountain",SmallPyramid:"SmallPyramid",Pyramid:"Pyramid",Fireworks:"Fireworks",Conga:"Conga"},Ac=[{style:bt.TheCube,prefs:{size:.1,center:!1,speed:6,faces:!1}},{style:bt.Text,prefs:{message:["Twir"],time:3}},{style:bt.Confetti,count:150},{style:bt.Spiral,count:150},{style:bt.Stampede,count:150},{style:bt.Burst,count:150},{style:bt.Fountain,count:150},{style:bt.SmallPyramid},{style:bt.Pyramid},{style:bt.Fireworks,count:150},{style:bt.Conga,prefs:{avoidMiddle:!1}}],HC=Oo({__name:"App",setup(t){const e=As({isRave:!1,emoteUrl:"https://cdn.7tv.app/emote/6548b7074789656a7be787e1/4x.webp",emoteZWEUrl:"https://cdn.7tv.app/emote/6128ed55a50c52b1429e09dc/4x.webp"}),n=As({max:10,time:10,queue:100,cube:{speed:10},size:{min:1,max:256,ratio:{normal:1/12,small:1/24}}}),s=Yr();function i(){return[{url:e.emoteUrl,zwe:[{url:e.emoteZWEUrl}]}]}async function r(c){if(!s.value)return;const p=Ac.find(g=>g.style===c);p&&await s.value.playAnimation(i(),p)}function o(){if(!s.value)return;const c=Math.floor(Math.random()*20),p=Array.from({length:c}).map(()=>({url:e.emoteUrl}));s.value.showEmotes(p)}function l(){s.value&&s.value.clear()}function a(c){const p=c.addFolder({title:"Emotes"});p.addBinding(e,"isRave",{label:"Rave"}),p.addBinding(n,"max",{label:"Max",min:1,max:100,step:1}),p.addBinding(n,"time",{label:"Time",min:1,max:1e3,step:1}),p.addBinding(n,"queue",{label:"Queue",min:1,max:1e3,step:1}),p.addBinding(e,"emoteUrl",{label:"Emote"}),p.addBinding(e,"emoteZWEUrl",{label:"Emote Zero Width"});const g=c.addFolder({title:"Size"});g.addBinding(n.size,"min",{label:"Min",min:1,max:256,step:1}),g.addBinding(n.size,"max",{label:"Max",min:1,max:256,step:1}),g.addBinding(n.size.ratio,"normal",{label:"Ratio (normal)",min:.01,max:1,step:.01}),g.addBinding(n.size.ratio,"small",{label:"Ratio (small)",min:.01,max:1,step:.01});const X=c.addFolder({title:"Animations"});for(const J of Ac)X.addButton({title:J.style}).on("click",()=>{r(J.style)});c.addBlade({view:"separator"}),c.addButton({title:"Show random emotes"}).on("click",o),c.addButton({title:"Clear"}).on("click",l)}return(c,p)=>(Fo(),Bo(Vt,null,[Nt(Oi(IC),{pane:{title:"Kappagen Playground"},onOnPaneCreated:a}),Nt(Oi(qC),{ref_key:"kappagen",ref:s,"is-rave":e.isRave,config:n},null,8,["is-rave","config"])],64))}});hf(HC).mount("#app");
